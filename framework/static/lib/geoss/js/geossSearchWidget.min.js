function checkFormButtons(){var t=!1;($("#FirstLongiutde").val()||$("#FirstLatitude").val()||$("#SecondLongiutde").val()||$("#SecondLatitude").val()||$("#w3w_search").val()||$("#geolocation_search").val())&&(t=!0),GeossUtil.isAnyFilterSelected()||t?$("button#clear_filters_button").prop("disabled",!1):$("button#clear_filters_button").prop("disabled",!0)}function chooseFilteringIcon(){for(var t=$(".row-search .search-button-1 span"),e=!1,a=0;a<MyWorkspace.Search.customFields.length;a++)if(MyWorkspace.isCustomFieldSelect(a)){var i=MyWorkspace.Search.customFields[a];t.hasClass(i.fieldName+"Checked")&&(e=!0)}t.hasClass("checkboxChecked")||t.hasClass("countryChecked")||t.hasClass("timeChecked")||t.hasClass("radioChecked")||e?t.addClass("filtering"):t.removeClass("filtering"),checkFormButtons()}function clearFilteringIcon(){$(".row-search .search-button-1 span").removeClass("filtering checkboxChecked countryChecked timeChecked radioChecked");for(var t=0;t<MyWorkspace.Search.customFields.length;t++)if(MyWorkspace.isCustomFieldSelect(t)){var e=MyWorkspace.Search.customFields[t];$(".row-search .search-button-1 span").removeClass(e.fieldName+"Checked")}}function chooseCurrentSearchIcons(){$(".box-search").hasClass("current-search-error")||"0"==$(".row-result-form .number-result .number-results").text()?($("#saved_filters_button").prop("disabled",!0),$("#share_button").prop("disabled",!0)):($("#saved_filters_button").prop("disabled",!1),$("#share_button").prop("disabled",!1))}function readSearchForm(t,e){searchFormAttributes=DAB.View.generateSearchFormAttributes();var a=new Object;a.query=GeossUtil.findSpaceAndChangeOr();for(var i=0;i<MyWorkspace.Search.customFields.length;i++)MyWorkspace.getCustomFieldValue(i)&&(a[MyWorkspace.getCustomFieldParamName(i)]=MyWorkspace.getCustomFieldValue(i));var r=$(".row-form-search .date #date-from").val();r&&(a.ts=r+"T00:00:00Z");var o=$(".row-form-search .date #date-to").val();o&&(a.te=o+"T00:00:00Z"),$(".row-form-search .checkbox-decoration input").prop("checked")&&(a.gdc=!0);var s=",,,";currentCoordinates&&$(".row-form-search .w3w-input").hasClass("hidden")&&(s=coordinatesForSearch(currentCoordinates)),a.bbox=s;var l=$("#w3w_search").val();if("Enter words"==l||$(".row-form-search .w3w-input").hasClass("hidden")||(re.test(l)?a.w3w=l:GeossUtil.showMessage(TITLE_W3W_ERROR,MSG_W3W_ERROR)),GWP&&",,,"==a.bbox&&void 0==a.w3w){var n=Geoss.mainMap.getView().calculateExtent(Geoss.mainMap.getSize());if(n=ol.proj.transformExtent(n,"EPSG:3857","EPSG:4326"),W=Math.round(1e5*n[0])/1e5,S=Math.round(1e5*n[1])/1e5,E=Math.round(1e5*n[2])/1e5,N=Math.round(1e5*n[3])/1e5,Geoss.mainMap.getView().getZoom()>2.5){var c=normalizeLongitude(W,E);W=c[0],E=c[1],s=W+","+S+","+E+","+N}else s=",,,";a.bbox=s}if($(".row-form-search .radio_w3w input:checked").attr("id")){var d=$(".row-form-search .radio_w3w input:checked").attr("id").split("_")[1].toUpperCase();a.rel=d}if(t)if(DAB.View.isIrisSearch()){var u=$(".row-result-form .show-result .iris-filters .magt option:selected").val();u&&(a.magt=u);var p=$(".row-result-form .show-result .iris-filters .evtord option:selected").val();p&&(a.evtOrd=p);var m=$("#mag-slider-range").slider("values",0);a.minmag=m;var h=$("#mag-slider-range").slider("values",1);a.maxmag=h;var g=$("#depth-slider-range").slider("values",0);a.mind=g;var v=$("#depth-slider-range").slider("values",1);a.maxd=v;var f=$(".iris-filters .date #date-from-iris").val();f?a.ts=f:void 0!==a.ts&&delete a.ts;var w=$(".iris-filters .date #date-to-iris").val();w?a.te=w:void 0!==a.te&&delete a.te}else{$(".filters").data("searchType","faceted");var b=$(".filters .tags-select .active input").attr("value");void 0!=b&&"keyword"!=b&&(a.kwd=b);var x=$(".filters .format-select .active input").attr("value");"format"!=x&&void 0!=x&&(a.frmt=x);var y=$(".filters .source-select .active input").attr("value");y&&"source"!=y.toLowerCase()&&(a.sources=y);var k=$(".filters .protocol-select .active input").attr("value");"protocol"!=k&&void 0!=k&&(a.prot=k);var C=$(".filters .organisation-select .active input").attr("value");"organisation"!=C&&void 0!=C&&(a.organisationName=C)}else if(Object.keys(MyWorkspace.Search.filterParams).length>0){var A=Object.keys(MyWorkspace.Search.filterParams);"iris-filters"==MyWorkspace.Search.filterSet?(A.indexOf("magt")>=0&&(a.magt=MyWorkspace.Search.filterParams.magt),A.indexOf("evtOrd")>=0&&(a.evtOrd=MyWorkspace.Search.filterParams.evtOrd),A.indexOf("minMag")>=0&&(a.minmag=MyWorkspace.Search.filterParams.minMag),A.indexOf("maxMag")>=0&&(a.maxmag=MyWorkspace.Search.filterParams.maxMag),A.indexOf("minDep")>=0&&(a.mind=MyWorkspace.Search.filterParams.minDep),A.indexOf("maxDep")>=0&&(a.maxd=MyWorkspace.Search.filterParams.maxDep),A.indexOf("dateFromIris")>=0&&(a.ts=MyWorkspace.Search.filterParams.dateFromIris),A.indexOf("dateToIris")>=0&&(a.te=MyWorkspace.Search.filterParams.dateToIris)):"faceted-filters"==MyWorkspace.Search.filterSet&&(A.indexOf("keyword")>=0&&(a.kwd=MyWorkspace.Search.filterParams.keyword),A.indexOf("format")>=0&&(a.format=MyWorkspace.Search.filterParams.format),A.indexOf("source")>=0&&(a.sources=MyWorkspace.Search.filterParams.source),A.indexOf("protocol")>=0&&(a.prot=MyWorkspace.Search.filterParams.protocol),A.indexOf("organisation")>=0&&(a.organisationName=MyWorkspace.Search.filterParams.organisation))}else DAB.View.hideIrisFilters(),$(".filters").data("searchType","new"),$(".filters .organisation-select .active").removeClass("active"),$(".filters .organisation-select li").eq(0).addClass("active"),$(".tags-select .multiselect").attr("title","KEYWORD"),$(".filters .tags-select .active").removeClass("active"),$(".filters .tags-select li").eq(0).addClass("active"),$(".format-select .multiselect").attr("title","FORMAT"),$(".filters .format-select .active").removeClass("active"),$(".filters .format-select li").eq(0).addClass("active"),$(".source-select .multiselect").attr("title","SOURCES"),$(".filters .source-select .active").removeClass("active"),$(".filters .source-select li").eq(0).addClass("active"),$(".protocol-select .multiselect").attr("title","PROTOCOL"),$(".filters .protocol-select .active").removeClass("active"),$(".filters .protocol-select li").eq(0).addClass("active"),$(".organisation-select .multiselect").attr("title","ORGANISATION");return a.si=1,!e&&DAB.View.currentResults&&DAB.View.currentResults.startIndex&&(a.si=DAB.View.currentResults.startIndex),a}function init_custom_selects(){if(!GWP){var t=new Array;t.push({fieldLabel:"Earth observations catalogs",fieldName:"type-select",fieldType:"PREDEFINED_MULTISELECT",paramName:"sources",paramValue:""}),t.push({fieldLabel:"Thematical Areas",fieldName:"views-select",fieldType:"PREDEFINED_SELECT",paramName:"viewid",paramValue:""}),MyWorkspace.Search.customFields=t}for(var e=0;e<MyWorkspace.Search.customFields.length;e++)if(MyWorkspace.isCustomFieldSelect(e)){var a=MyWorkspace.Search.customFields[e];$(".row-form-search ."+a.fieldName+" select").multiselect({enableFiltering:!0,enableCaseInsensitiveFiltering:!0,nonSelectedText:a.fieldLabel,maxHeight:340,numberDisplayed:1,nonSelectedText:a.fieldLabel,onChange:function(t,e,a){var i=$(t).parent().attr("data-field-name");$(".row-form-search ."+i+" select").val()?($(".row-search .search-button-1 span").addClass(i+"Checked"),"type-select"==i&&$(".row-form-search ."+i).addClass("selected")):($(".row-search .search-button-1 span").removeClass(i+"Checked"),"type-select"==i&&$(".row-form-search ."+i).removeClass("selected")),chooseFilteringIcon()}})}}function init_selects(){$(".row-form-search .search-option-select .single-select").multiselect({enableFiltering:!0,enableCaseInsensitiveFiltering:!0,maxHeight:270,onChange:function(t,e,a){$(".ol-buttons.draw-btn button").hasClass("checked-button")&&$("#type").trigger("click"),clearAoi($(t).val())}}),$(".row-form-search .country-select .single-select").multiselect({enableFiltering:!0,enableCaseInsensitiveFiltering:!0,maxHeight:270,onChange:function(t,e,a){var i=$(t).val();if("Continent or Country"==$(t).text())clearAoi("ContinentAndCountry");else{var r=parseCoordinates(i);drawLayerAoi(r[0],r[1],r[2],r[3]),centerMapOnAoi()}}})}function init_date_inputs(){$(".date .datepicker").datetimepicker({timepicker:!1,scrollInput:!1,format:"Y-m-d",onChangeDateTime:function(t,e){var a=e.attr("id"),i=e.val();"date-from"==a||"date-to"==a?($("#date-from").val()||$("#date-to").val()?$(".row-search .search-button-1 span").addClass("timeChecked"):$(".row-search .search-button-1 span").removeClass("timeChecked"),$(".row-form-search .box-size.radio input:checked").length>0&&($(".row-search .search-button-1 span").removeClass("radioChecked"),$(".row-form-search .box-size.radio input:checked").prop("checked",!1)),chooseFilteringIcon()):"date-from-granula"==a?i!=granuleDateFrom&&(granuleDateFrom=i,DAB.View.reloadGranulaData()):"date-to-granula"==a?i!=granuleDateTo&&(granuleDateTo=i,DAB.View.reloadGranulaData()):"date-from-iris"==a?($(".row-form-search .date #date-from").val($(".iris-filters .date #date-from-iris").val()),i||(i=DAB.View.getDefaultIrisFromDate(),$(".row-form-search .date #date-from").val(i),$(".iris-filters .date #date-from-iris").val(i)),i!=irisDateFrom&&(irisDateFrom=i,removeBboxLayers(Geoss.mainMap),Geoss.actionBeforeRequest(),DAB.Facade.filterQuery(readSearchForm(!0,!0)))):"date-to-iris"==a&&($(".row-form-search .date #date-to").val($(".iris-filters .date #date-to-iris").val()),i!=irisDateTo&&(irisDateTo=i,removeBboxLayers(Geoss.mainMap),Geoss.actionBeforeRequest(),DAB.Facade.filterQuery(readSearchForm(!0,!0))))},onGenerate:function(t){var e=function(t){$(".xdsoft_today").trigger("click.xdsoft")};$(".xdsoft_today_button").on("touchstart.xdsoft mousedown.xdsoft",e)}})}function init_slider(){$("#slider-range").slider({range:!0,min:0,max:100,values:[0,50],slide:function(t,e){$("#amount").val("$"+e.values[0]+" - $"+e.values[1])}})}function placeQuerySearch(t,e){function a(e,a){if(a==google.maps.places.PlacesServiceStatus.OK)if(0==e.length)GeossUtil.standardSearchProcess();else if(1==e.length&&e[0].geometry&&e[0].geometry.viewport){var i={N:e[0].geometry.viewport.getNorthEast().lat(),E:e[0].geometry.viewport.getNorthEast().lng(),S:e[0].geometry.viewport.getSouthWest().lat(),W:e[0].geometry.viewport.getSouthWest().lng(),name:e[0].formatted_address};$(".chooseSearchMessage .button_yes").data("query",t),$(".chooseSearchMessage .button_yes").data("W",i.W),$(".chooseSearchMessage .button_yes").data("E",i.E),$(".chooseSearchMessage .button_yes").data("N",i.N),$(".chooseSearchMessage .button_yes").data("S",i.S),$(".chooseSearchMessage .button_yes").data("name",i.name),t?GeossUtil.showChooseSearchMessage(t,i.name):!t&&(i.name.match(/,/g)||[]).length<2?GeossUtil.showChooseSearchMessage(t,i.name):GeossUtil.standardSearchProcess()}else GeossUtil.standardSearchProcess();else GeossUtil.standardSearchProcess()}var i;!function(){var t={query:e};(i=new google.maps.places.PlacesService(document.createElement("div"))).textSearch(t,a)}()}function searches(){$(".row-result-form").show(),MyWorkspace.isRestoredBookmark()||(DAB.View.isIrisSearch()?($(".row-result-form .filters").removeClass("active").hide(),DAB.View.closeAndClearGranulaFilters(),DAB.View.showIrisFilters()):DAB.View.drillDownSearch?($(".row-result-form .filters").removeClass("active").hide(),DAB.View.hideIrisFilters(),DAB.View.granulaFiltersEnabled?($("div.granula-filters").addClass("active").show(),$(".row-result-form .datepicker").show()):($(".row-result-form .datepicker").hide(),DAB.View.closeGranulaFilters())):($(".row-result-form .filters").addClass("active").show(),DAB.View.closeAndClearGranulaFilters(),DAB.View.hideIrisFilters())),$(".row-result-form .show-result button.btn-form-results").addClass("rotating"),$(".wrap-result-list").show()}function initGoogleGeolocation(){if($("#geolocationForm").submit(function(t){t.preventDefault()}),$("#geolocation_search").on("input",function(){clearAoi()}),"object"==typeof google&&google.maps){var t=new google.maps.places.Autocomplete($("#geolocation_search")[0],{});google.maps.event.addListener(t,"place_changed",function(e){var a=t.getPlace();if(a.geometry&&a.geometry.viewport){var i=a.geometry.viewport.getNorthEast().lat(),r=a.geometry.viewport.getNorthEast().lng(),o=a.geometry.viewport.getSouthWest().lat(),s=a.geometry.viewport.getSouthWest().lng();GeossUtil.setChosenGeolocation(s,o,r,i)}})}}function initSearchBar(){var t="",e="",a="";GWP&&(t='<button class="glyphicon showAllMap" title="Show all map" type="button"></button><button class="glyphicon showAllMap2" title="Show all map" type="button"></button>',e='<button class="share glyphicon" id="share_button" title="Share search" type="button" disabled></button>',a='<option title="What3Words" value="What3Words">What3Words</option>');var i='<div class="box-search">\t<div id="query-auto-list-control" class="row-search box-size dropdown">\t\t<div class="search-button-1">\t\t\t<span class="glyphicon" id="advanced_search" title="Advanced search"></span>\t\t</div>\t\t<div class="search-input">\t\t\t\t<form id="searchForm">\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label>Enter search words</label>\t\t\t\t\t\t<input type="search" placeholder="Enter search words ..." id="query_search">\t\t\t\t\t</fieldset>\t\t\t\t</form>\t\t</div>\t\t<div class="search-button-2">'+t+'\t\t\t<button class="save glyphicon" id="saved_filters_button" title="Save search" type="button" disabled></button>'+e+'\t\t\t<button class="close glyphicon" id="clear_filters_button" title="Clear All" type="button" disabled></button>\t\t\t<span class="glyphicon" id="search_button" title="Search"></span>\t\t</div>\t\t<ul id="query-auto-list-search" class="dropdown-menu">\t\t</ul>\t</div>\t\x3c!-- START SEARCH FORM --\x3e\t\t<div class="row-form-search">\t\t\t<form>\t\t\t\t<fieldset>\t\t\t\t\t<div class="box-size checkbox-decoration full-width dataset-checkbox-area">\t\t\t\t\t\t<input type="checkbox" id="Full_and_Open_Dataset">\t\t\t\t\t\t<label for="Full_and_Open_Dataset" class="box-size">\t\t\t\t\t\t</label>\t\t\t\t\t\t<img src="'+Geoss.imagesLocation+'images/img/geossWhite.png" alt="Full and Open Dataset" title="Full and Open Dataset" />\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\x3c!-- EO Catalogs multiple select --\x3e\t\t\t\t\t<div class="box-size break1 filter-select type-select">\t\t\t\t\t\t<label class="not-show">Earth observations catalogs</label>\t\t\t\t\t\t<select class="multiple-select" multiple="multiple"  data-field-name="type-select">\t\t\t\t\t\t</select>\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\x3c!-- Thematical Areas single select --\x3e\t\t\t\t\t<div class="box-size break1 filter-select views-select">\t\t\t\t\t\t<label class="not-show">Thematical Areas</label>\t\t\t\t\t\t<select class="single-select" data-field-name="views-select">\t\t\t\t\t\t\t<option title="Thematical Areas" value="">Thematical Areas</option>\t\t\t\t\t\t</select>\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\x3c!-- SELECT SEARCH OPTION --\x3e\t\t\t\t\t<div class="box-size break2 search-option-select filter-select">\t\t\t\t\t\t<label class="not-show">Choose selector options</label>\t\t\t\t\t\t<select class="single-select">\t\t\t\t\t\t\t<option title="Choose selector options" value="ChooseSelectorOptions">Choose selector options</option>\t\t\t\t\t\t\t<option title="Geolocation" value="Geolocation" selected>Geolocation</option>\t\t\t\t\t\t\t<option title="Continent & Country" value="ContinentAndCountry">Continent & Country</option>\t\t\t\t\t\t\t'+a+'\t\t\t\t\t\t\t<option title="Coordinates" value="Coordinates">Coordinates</option>\t\t\t\t\t\t</select>\t\t\t\t\t</div>\t\t\t\t\x3c!-- END SELECT SEARCH OPTION --\x3e\t\t\t\t\x3c!-- SELECT COUNTRY --\x3e\t\t\t\t\t<div class="box-size break2 country-select filter-select hidden">\t\t\t\t\t\t<label class="not-show">Country</label>\t\t\t\t\t\t<select class="single-select">\t\t\t\t\t\t<option title="Continent or Country" value="-180, -90, 180, 90">Continent or Country</option>\t\t\t\t\t\t\t<option title="Africa" value="-17.3,-34.6,51.1,38.2">Africa</option>\t\t\t\t\t\t\t<option title="Asia" value="31.0,10.8,179.9,83.5">Asia</option>\t\t\t\t\t\t\t<option title="Central America" value="-120.17,3.21,-74.83,36.91">Central America</option>\t\t\t\t\t\t\t<option title="Europe" value="-11.5,35.3,43.2,81.4">Europe</option>\t\t\t\t\t\t\t<option title="North America" value="-166.3,7.2,-14.4,85.0">North America</option>\t\t\t\t\t\t\t<option title="South America" value="-82.1,-55.4,-33.8,13.0">South America</option>\t\t\t\t\t\t\t<option title="Afghanistan" value="60.504,29.406,74.916,38.472">Afghanistan</option>\t\t\t\t\t\t\t<option title="Albania" value="19.289,39.645,21.053,42.66">Albania</option>\t\t\t\t\t\t\t<option title="Algeria" value="-8.667,18.976,11.986,37.09">Algeria</option>\t\t\t\t\t\t\t<option title="American Samoa" value="-170.823,-14.376,-170.562,-14.254">American Samoa</option>\t\t\t\t\t\t\t<option title="Andorra" value="1.421,42.436,1.782,42.656">Andorra</option>\t\t\t\t\t\t\t<option title="Angola" value="11.731,-18.016,24.084,-4.389">Angola</option>\t\t\t\t\t\t\t<option title="Anguilla" value="-63.168,18.164,-62.973,18.273">Anguilla</option>\t\t\t\t\t\t\t<option title="Antarctica" value="-180.0,-90.0,180.0,-60.503">Antarctica</option>\t\t\t\t\t\t\t<option title="Antigua and Barbuda" value="-61.891,16.99,-61.667,17.724">Antigua and Barbuda</option>\t\t\t\t\t\t\t<option title="Arctic Sea" value="-180.0,48.0,180.0,90.0">Arctic Sea</option>\t\t\t\t\t\t\t<option title="Argentina" value="-73.582,-55.052,-53.65,-21.781">Argentina</option>\t\t\t\t\t\t\t<option title="Armenia" value="43.454,38.841,46.621,41.297">Armenia</option>\t\t\t\t\t\t\t<option title="Aruba" value="-70.06,12.411,-69.875,12.628">Aruba</option>\t\t\t\t\t\t\t<option title="Ascension Island" value="0.0,0.0,0.0,0.0">Ascension Island</option>\t\t\t\t\t\t\t<option title="Australia" value="112.907,-54.754,158.96,-10.136">Australia</option>\t\t\t\t\t\t\t<option title="Austria" value="9.534,46.407,17.166,49.019">Austria</option>\t\t\t\t\t\t\t<option title="Azerbaijan, Republic of" value="44.779,38.389,50.375,41.897">Azerbaijan, Republic of</option>\t\t\t\t\t\t\t<option title="Azores" value="0.0,0.0,0.0,0.0">Azores</option>\t\t\t\t\t\t\t<option title="Bahamas" value="-78.979,20.915,-72.739,26.929">Bahamas</option>\t\t\t\t\t\t\t<option title="Bahrain" value="50.453,25.572,50.796,26.289">Bahrain</option>\t\t\t\t\t\t\t<option title="Bangladesh" value="88.044,20.745,92.669,26.626">Bangladesh</option>\t\t\t\t\t\t\t<option title="Barbados" value="-59.659,13.051,-59.427,13.337">Barbados</option>\t\t\t\t\t\t\t<option title="Belarus" value="23.165,51.252,32.74,56.167">Belarus</option>\t\t\t\t\t\t\t<option title="Belgium" value="2.542,49.509,6.398,51.501">Belgium</option>\t\t\t\t\t\t\t<option title="Belize" value="-89.216,15.89,-87.78,18.49">Belize</option>\t\t\t\t\t\t\t<option title="Benin" value="0.777,6.219,3.855,12.397">Benin</option>\t\t\t\t\t\t\t<option title="Bermuda" value="-64.823,32.261,-64.677,32.38">Bermuda</option>\t\t\t\t\t\t\t<option title="Bhutan" value="88.752,26.704,92.114,28.325">Bhutan</option>\t\t\t\t\t\t\t<option title="Bolivia" value="-69.656,-22.901,-57.521,-9.679">Bolivia</option>\t\t\t\t\t\t\t<option title="Bosnia and Herzegovina" value="15.741,42.566,19.62,45.266">Bosnia and Herzegovina</option>\t\t\t\t\t\t\t<option title="Botswana" value="19.996,-26.876,29.374,-17.782">Botswana</option>\t\t\t\t\t\t\t<option title="Bouvet Island" value="3.342,-54.463,3.484,-54.384">Bouvet Island</option>\t\t\t\t\t\t\t<option title="Brazil" value="-74.005,-33.741,-34.793,5.273">Brazil</option>\t\t\t\t\t\t\t<option title="British Indian Ocean Ter" value="72.358,-7.436,72.494,-7.233">British Indian Ocean Ter</option>\t\t\t\t\t\t\t<option title="British Virgin Island" value="-64.698,18.384,-64.325,18.505">British Virgin Island</option>\t\t\t\t\t\t\t<option title="Brunei Darussalam" value="114.095,4.018,115.36,5.053">Brunei Darussalam</option>\t\t\t\t\t\t\t<option title="Bulgaria" value="22.365,41.243,28.605,44.225">Bulgaria</option>\t\t\t\t\t\t\t<option title="Burkina Faso" value="-5.521,9.396,2.398,15.083">Burkina Faso</option>\t\t\t\t\t\t\t<option title="Burundi" value="28.985,-4.448,30.853,-2.302">Burundi</option>\t\t\t\t\t\t\t<option title="Cambodia" value="102.347,10.423,107.636,14.709">Cambodia</option>\t\t\t\t\t\t\t<option title="Cameroon" value="8.502,1.654,16.207,13.085">Cameroon</option>\t\t\t\t\t\t\t<option title="Canada" value="-141.003,41.676,-52.617,83.114">Canada</option>\t\t\t\t\t\t\t<option title="Canary Islands" value="0.0,0.0,0.0,0.0">Canary Islands</option>\t\t\t\t\t\t\t<option title="Cape Verde" value="-25.361,14.811,-22.666,17.192">Cape Verde</option>\t\t\t\t\t\t\t<option title="Cayman Island" value="-81.401,19.265,-81.093,19.354">Cayman Island</option>\t\t\t\t\t\t\t<option title="Central African Republic" value="14.419,2.221,27.46,11.001">Central African Republic</option>\t\t\t\t\t\t\t<option title="Chad" value="13.462,7.459,24.003,23.451">Chad</option>\t\t\t\t\t\t\t<option title="Chile" value="-109.446,-55.902,-66.421,-17.505">Chile</option>\t\t\t\t\t\t\t<option title="China" value="73.62,18.169,134.768,53.554">China</option>\t\t\t\t\t\t\t<option title="China, Taiwan Prov of" value="118.279,21.928,122.0,25.284">China, Taiwan Prov of</option>\t\t\t\t\t\t\t<option title="Christmas Island" value="105.629,-10.511,105.752,-10.384">Christmas Island</option>\t\t\t\t\t\t\t<option title="Cocos Islands" value="96.817,-12.199,96.865,-12.13">Cocos Islands</option>\t\t\t\t\t\t\t<option title="Colombia" value="-81.72,-4.237,-66.87,12.59">Colombia</option>\t\t\t\t\t\t\t<option title="Comoros" value="43.214,-12.383,44.53,-11.367">Comoros</option>\t\t\t\t\t\t\t<option title="Congo, Dem Republic of" value="10.03,-9.22,34.77,2.1">Congo, Dem Republic of</option>\t\t\t\t\t\t\t<option title="Congo, Republic of" value="11.141,-5.015,18.644,3.711">Congo, Republic of</option>\t\t\t\t\t\t\t<option title="Cook Islands" value="-165.848,-21.941,-157.704,-10.881">Cook Islands</option>\t\t\t\t\t\t\t<option title="Costa Rica" value="-85.911,8.026,-82.561,11.213">Costa Rica</option>\t\t\t\t\t\t\t<option title="Croatia" value="13.505,42.4,19.425,46.536">Croatia</option>\t\t\t\t\t\t\t<option title="Cuba" value="-84.953,19.822,-74.131,23.194">Cuba</option>\t\t\t\t\t\t\t<option title="Cyprus" value="32.27,34.64,34.586,35.689">Cyprus</option>\t\t\t\t\t\t\t<option title="Czech Republic" value="12.094,48.581,18.852,51.052">Czech Republic</option>\t\t\t\t\t\t\t<option title="Denmark" value="8.093,54.562,15.149,57.746">Denmark</option>\t\t\t\t\t\t\t<option title="Djibouti" value="41.76,10.942,43.42,12.708">Djibouti</option>\t\t\t\t\t\t\t<option title="Dominica" value="-61.491,15.198,-61.251,15.632">Dominica</option>\t\t\t\t\t\t\t<option title="Dominican Republic" value="-72.003,17.604,-68.323,19.931">Dominican Republic</option>\t\t\t\t\t\t\t<option title="East Timor" value="124.84,-9.38,127.35,-8.02">East Timor</option>\t\t\t\t\t\t\t<option title="Ecuador" value="-91.664,-5.0,-75.217,1.438">Ecuador</option>\t\t\t\t\t\t\t<option title="Egypt" value="24.707,21.994,36.896,31.647">Egypt</option>\t\t\t\t\t\t\t<option title="El Salvador" value="-90.108,13.156,-87.695,14.432">El Salvador</option>\t\t\t\t\t\t\t<option title="Equatorial Guinea" value="8.424,0.93,11.354,3.763">Equatorial Guinea</option>\t\t\t\t\t\t\t<option title="Eritrea" value="36.443,12.364,43.121,17.995">Eritrea</option>\t\t\t\t\t\t\t<option title="Estonia" value="21.837,57.523,28.194,59.665">Estonia</option>\t\t\t\t\t\t\t<option title="Ethiopia" value="32.992,3.407,47.988,14.884">Ethiopia</option>\t\t\t\t\t\t\t<option title="Faeroe Islands" value="-7.433,61.388,-6.39,62.358">Faeroe Islands</option>\t\t\t\t\t\t\t<option title="Falkland Islands" value="-61.148,-52.343,-57.733,-51.249">Falkland Islands</option>\t\t\t\t\t\t\t<option title="Far East" value="52.95,-12.47,148.51,56.15">Far East</option>\t\t\t\t\t\t\t<option title="Fiji Islands" value="175.0,-19.163,180.0,-16.153">Fiji Islands</option>\t\t\t\t\t\t\t<option title="Finland" value="19.511,59.807,31.582,70.089">Finland</option>\t\t\t\t\t\t\t<option title="France" value="-5.79,41.365,9.562,51.091">France</option>\t\t\t\t\t\t\t<option title="French Guiana" value="-54.604,2.113,-51.648,5.755">French Guiana</option>\t\t\t\t\t\t\t<option title="French Polynesia" value="-151.498,-17.871,-138.81,-8.778">French Polynesia</option>\t\t\t\t\t\t\t<option title="French South Terr" value="51.651,-49.725,70.567,-46.328">French South Terr</option>\t\t\t\t\t\t\t<option title="Gabon" value="8.701,-3.925,14.52,2.318">Gabon</option>\t\t\t\t\t\t\t<option title="Gambia" value="-16.822,13.06,-13.799,13.826">Gambia</option>\t\t\t\t\t\t\t<option title="Gaza Strip" value="34.217,31.217,34.559,31.596">Gaza Strip</option>\t\t\t\t\t\t\t<option title="Georgia" value="40.003,41.048,46.711,43.585">Georgia</option>\t\t\t\t\t\t\t<option title="Germany" value="5.865,47.275,15.034,55.057">Germany</option>\t\t\t\t\t\t\t<option title="Ghana" value="-3.249,4.727,1.203,11.156">Ghana</option>\t\t\t\t\t\t\t<option title="Gibraltar" value="-5.356,36.112,-5.335,36.163">Gibraltar</option>\t\t\t\t\t\t\t<option title="Greece" value="19.64,34.931,28.238,41.748">Greece</option>\t\t\t\t\t\t\t<option title="Greenland" value="-73.054,59.79,-12.158,83.624">Greenland</option>\t\t\t\t\t\t\t<option title="Grenada" value="-61.785,11.997,-61.596,12.237">Grenada</option>\t\t\t\t\t\t\t<option title="Guadeloupe" value="-61.796,15.87,-61.187,16.513">Guadeloupe</option>\t\t\t\t\t\t\t<option title="Guam" value="144.634,13.235,144.953,13.652">Guam</option>\t\t\t\t\t\t\t<option title="Guatemala" value="-92.247,13.746,-88.215,17.821">Guatemala</option>\t\t\t\t\t\t\t<option title="Guinea" value="-15.081,7.194,-7.653,12.678">Guinea</option>\t\t\t\t\t\t\t<option title="Guinea-Bissau" value="-16.718,10.925,-13.644,12.685">Guinea-Bissau</option>\t\t\t\t\t\t\t<option title="Guyana" value="-61.39,1.187,-56.471,8.535">Guyana</option>\t\t\t\t\t\t\t<option title="Haiti" value="-74.468,18.023,-71.629,20.091">Haiti</option>\t\t\t\t\t\t\t<option title="Heard and McDonald Is" value="73.235,-53.199,73.774,-52.965">Heard and McDonald Is</option>\t\t\t\t\t\t\t<option title="Honduras" value="-89.35,12.985,-83.132,16.436">Honduras</option>\t\t\t\t\t\t\t<option title="Hungary" value="16.112,45.748,22.895,48.576">Hungary</option>\t\t\t\t\t\t\t<option title="Iceland" value="-24.538,63.39,-13.499,66.536">Iceland</option>\t\t\t\t\t\t\t<option title="India" value="68.144,6.746,97.381,35.506">India</option>\t\t\t\t\t\t\t<option title="Indonesia" value="95.211,-10.93,141.007,5.913">Indonesia</option>\t\t\t\t\t\t\t<option title="Iran, Islamic Rep of" value="44.035,25.076,63.33,39.779">Iran, Islamic Rep of</option>\t\t\t\t\t\t\t<option title="Iraq" value="38.795,29.062,48.561,37.384">Iraq</option>\t\t\t\t\t\t\t<option title="Ireland" value="-10.475,51.446,-6.013,55.38">Ireland</option>\t\t\t\t\t\t\t<option title="Isle of Man" value="-4.787,54.056,-4.309,54.416">Isle of Man</option>\t\t\t\t\t\t\t<option title="Israel" value="34.268,29.487,35.681,33.27">Israel</option>\t\t\t\t\t\t\t<option title="Italy" value="6.624,36.649,18.514,47.095">Italy</option>\t\t\t\t\t\t\t<option title="Ivory Coast" value="-8.606,4.345,-2.488,10.735">Ivory Coast</option>\t\t\t\t\t\t\t<option title="Jamaica" value="-78.374,17.697,-76.221,18.523">Jamaica</option>\t\t\t\t\t\t\t<option title="Japan" value="123.679,24.251,145.812,45.486">Japan</option>\t\t\t\t\t\t\t<option title="Jordan" value="34.96,29.189,39.301,33.378">Jordan</option>\t\t\t\t\t\t\t<option title="Kazakhstan" value="46.499,40.594,87.348,55.443">Kazakhstan</option>\t\t\t\t\t\t\t<option title="Kenya" value="33.907,-4.67,41.905,4.623">Kenya</option>\t\t\t\t\t\t\t<option title="Kiribati" value="-157.582,1.705,-157.173,2.033">Kiribati</option>\t\t\t\t\t\t\t<option title="Korea, Dem People\'s Rep" value="124.324,37.671,130.697,43.006">Korea, Dem People\'s Rep</option>\t\t\t\t\t\t\t<option title="Korea, Republic of" value="126.099,33.192,129.587,38.625">Korea, Republic of</option>\t\t\t\t\t\t\t<option title="Kuwait" value="46.547,28.539,48.417,30.084">Kuwait</option>\t\t\t\t\t\t\t<option title="Kyrgyzstan" value="69.25,39.195,80.282,43.217">Kyrgyzstan</option>\t\t\t\t\t\t\t<option title="Laos" value="100.091,13.927,107.695,22.5">Laos</option>\t\t\t\t\t\t\t<option title="Latvia" value="20.969,55.675,28.236,58.083">Latvia</option>\t\t\t\t\t\t\t<option title="Lebanon" value="35.101,33.062,36.624,34.648">Lebanon</option>\t\t\t\t\t\t\t<option title="Lesotho" value="27.014,-30.651,29.456,-28.571">Lesotho</option>\t\t\t\t\t\t\t<option title="Liberia" value="-11.492,4.344,-7.368,8.513">Liberia</option>\t\t\t\t\t\t\t<option title="Libyan Arab Jamahiriya" value="9.311,19.499,25.152,33.171">Libyan Arab Jamahiriya</option>\t\t\t\t\t\t\t<option title="Liechtensten" value="9.475,47.057,9.634,47.275">Liechtensten</option>\t\t\t\t\t\t\t<option title="Lithuania" value="20.943,53.89,26.813,56.45">Lithuania</option>\t\t\t\t\t\t\t<option title="Luxembourg" value="5.734,49.448,6.524,50.182">Luxembourg</option>\t\t\t\t\t\t\t<option title="Macedonia" value="20.459,40.856,23.031,42.359">Macedonia</option>\t\t\t\t\t\t\t<option title="Madagascar" value="43.237,-25.588,50.501,-11.946">Madagascar</option>\t\t\t\t\t\t\t<option title="Madeira" value="0.0,0.0,0.0,0.0">Madeira</option>\t\t\t\t\t\t\t<option title="Malawi" value="32.682,-17.135,35.921,-9.377">Malawi</option>\t\t\t\t\t\t\t<option title="Malaysia" value="99.642,0.853,119.276,7.353">Malaysia</option>\t\t\t\t\t\t\t<option title="Maldives" value="72.863,-0.642,73.637,7.028">Maldives</option>\t\t\t\t\t\t\t<option title="Mali" value="-12.245,10.142,4.251,25.0">Mali</option>\t\t\t\t\t\t\t<option title="Malta" value="14.329,35.8,14.57,35.992">Malta</option>\t\t\t\t\t\t\t<option title="Marshall Island" value="162.325,5.6,169.972,14.594">Marshall Island</option>\t\t\t\t\t\t\t<option title="Martinique" value="-61.232,14.403,-60.817,14.88">Martinique</option>\t\t\t\t\t\t\t<option title="Mauritania" value="-17.076,14.726,-4.806,27.29">Mauritania</option>\t\t\t\t\t\t\t<option title="Mauritius" value="57.306,-20.521,63.496,-19.673">Mauritius</option>\t\t\t\t\t\t\t<option title="Mayotte" value="45.039,-12.993,45.23,-12.663">Mayotte</option>\t\t\t\t\t\t\t<option title="Mediterran and Black Sea" value="-5.61,30.274,41.759,47.272">Mediterran and Black Sea</option>\t\t\t\t\t\t\t<option title="Mexico" value="-118.404,14.551,-86.739,32.718">Mexico</option>\t\t\t\t\t\t\t<option title="Micronesia,Fed States of" value="158.12,5.262,163.043,6.978">Micronesia,Fed States of</option>\t\t\t\t\t\t\t<option title="Midway Islands" value="-177.396,28.184,-177.361,28.222">Midway Islands</option>\t\t\t\t\t\t\t<option title="Moldova, Republic of" value="26.635,45.449,30.129,48.468">Moldova, Republic of</option>\t\t\t\t\t\t\t<option title="Monaco" value="7.391,43.728,7.439,43.768">Monaco</option>\t\t\t\t\t\t\t<option title="Mongolia" value="87.761,41.587,119.932,52.143">Mongolia</option>\t\t\t\t\t\t\t<option title="Montenegro" value="0.0,0.0,0.0,0.0">Montenegro</option>\t\t\t\t\t\t\t<option title="Montserrat" value="-62.237,16.671,-62.139,16.812">Montserrat</option>\t\t\t\t\t\t\t<option title="Morocco" value="-13.175,27.664,-1.012,35.919">Morocco</option>\t\t\t\t\t\t\t<option title="Mozambique" value="30.213,-26.86,40.846,-10.471">Mozambique</option>\t\t\t\t\t\t\t<option title="Myanmar" value="92.205,9.84,101.169,28.547">Myanmar</option>\t\t\t\t\t\t\t<option title="Namibia" value="11.716,-28.962,25.264,-16.954">Namibia</option>\t\t\t\t\t\t\t<option title="Nauru" value="166.904,-0.552,166.957,-0.493">Nauru</option>\t\t\t\t\t\t\t<option title="Nepal" value="80.052,26.368,88.195,30.425">Nepal</option>\t\t\t\t\t\t\t<option title="Neth Antilles" value="-69.164,12.021,-68.193,12.384">Neth Antilles</option>\t\t\t\t\t\t\t<option title="Netherlands" value="3.371,50.754,7.211,53.466">Netherlands</option>\t\t\t\t\t\t\t<option title="New Zealand" value="170.0,-52.578,180.0,-32.415">New Zealand</option>\t\t\t\t\t\t\t<option title="NewCaledonia" value="163.983,-22.674,168.131,-20.088">NewCaledonia</option>\t\t\t\t\t\t\t<option title="Nicaragua" value="-87.69,10.71,-83.132,15.022">Nicaragua</option>\t\t\t\t\t\t\t<option title="Niger" value="0.167,11.693,15.997,23.522">Niger</option>\t\t\t\t\t\t\t<option title="Nigeria" value="2.693,4.273,14.65,13.892">Nigeria</option>\t\t\t\t\t\t\t<option title="Niue" value="-169.952,-19.146,-169.782,-18.963">Niue</option>\t\t\t\t\t\t\t<option title="Norfolk Island" value="167.911,-29.081,167.999,-29.001">Norfolk Island</option>\t\t\t\t\t\t\t<option title="Northern Mariana Is" value="145.573,14.908,145.818,15.268">Northern Mariana Is</option>\t\t\t\t\t\t\t<option title="Norway" value="4.79,57.988,31.074,71.155">Norway</option>\t\t\t\t\t\t\t<option title="Oman" value="51.999,16.643,59.847,26.369">Oman</option>\t\t\t\t\t\t\t<option title="Pakistan" value="60.866,23.688,77.824,37.061">Pakistan</option>\t\t\t\t\t\t\t<option title="Palau" value="0.0,0.0,0.0,0.0">Palau</option>\t\t\t\t\t\t\t<option title="Panama" value="-83.03,7.206,-77.198,9.62">Panama</option>\t\t\t\t\t\t\t<option title="Papua New Guinea" value="140.859,-11.643,155.967,-1.355">Papua New Guinea</option>\t\t\t\t\t\t\t<option title="Paraguay" value="-62.644,-27.585,-54.244,-19.297">Paraguay</option>\t\t\t\t\t\t\t<option title="Peru" value="-81.355,-18.349,-68.674,-0.037">Peru</option>\t\t\t\t\t\t\t<option title="Philippines" value="116.95,5.049,126.598,19.391">Philippines</option>\t\t\t\t\t\t\t<option title="Pitcairn Islands" value="-130.105,-25.082,-128.286,-24.326">Pitcairn Islands</option>\t\t\t\t\t\t\t<option title="Poland" value="14.148,49.003,24.143,54.836">Poland</option>\t\t\t\t\t\t\t<option title="Portugal" value="-10.0,35.0,-6.19,44.0">Portugal</option>\t\t\t\t\t\t\t<option title="Puerto Rico" value="-67.266,17.922,-65.301,18.519">Puerto Rico</option>\t\t\t\t\t\t\t<option title="Qatar" value="50.752,24.556,51.616,26.153">Qatar</option>\t\t\t\t\t\t\t<option title="Reunion" value="55.221,-21.374,55.853,-20.857">Reunion</option>\t\t\t\t\t\t\t<option title="Romania" value="20.261,43.623,29.672,48.264">Romania</option>\t\t\t\t\t\t\t<option title="Russian Federation" value="-36.0,41.197,180.0,81.852">Russian Federation</option>\t\t\t\t\t\t\t<option title="Rwanda" value="28.854,-2.825,30.893,-1.054">Rwanda</option>\t\t\t\t\t\t\t<option title="Saint Helena" value="-5.793,-16.022,-5.645,-15.904">Saint Helena</option>\t\t\t\t\t\t\t<option title="Saint Kitts and Nevis" value="-62.863,17.209,-62.623,17.41">Saint Kitts and Nevis</option>\t\t\t\t\t\t\t<option title="Saint Lucia" value="-61.08,13.709,-60.878,14.109">Saint Lucia</option>\t\t\t\t\t\t\t<option title="Saint Pierre &amp; Miquelon" value="-56.398,46.78,-56.233,47.136">Saint Pierre &amp; Miquelon</option>\t\t\t\t\t\t\t<option title="Saint Vincent/Grenadines" value="-61.28,13.13,-61.12,13.383">Saint Vincent/Grenadines</option>\t\t\t\t\t\t\t<option title="Samoa" value="-172.78,-14.058,-171.429,-13.461">Samoa</option>\t\t\t\t\t\t\t<option title="San Marino" value="12.407,43.899,12.511,43.987">San Marino</option>\t\t\t\t\t\t\t<option title="Sao Tome and Principe" value="6.465,0.018,7.463,1.701">Sao Tome and Principe</option>\t\t\t\t\t\t\t<option title="Saudi Arabia" value="34.572,15.617,55.666,32.155">Saudi Arabia</option>\t\t\t\t\t\t\t<option title="Senegal" value="-17.533,12.302,-11.37,16.691">Senegal</option>\t\t\t\t\t\t\t<option title="Serbia" value="0.0,0.0,0.0,0.0">Serbia</option>\t\t\t\t\t\t\t<option title="Seychelles" value="46.206,-9.463,55.541,-4.552">Seychelles</option>\t\t\t\t\t\t\t<option title="Sierra Leone" value="-13.296,6.924,-10.264,9.998">Sierra Leone</option>\t\t\t\t\t\t\t<option title="Singapore" value="103.641,1.259,103.998,1.445">Singapore</option>\t\t\t\t\t\t\t<option title="Slovakia" value="16.845,47.738,22.558,49.601">Slovakia</option>\t\t\t\t\t\t\t<option title="Slovenia" value="13.383,45.426,16.608,46.876">Slovenia</option>\t\t\t\t\t\t\t<option title="Solomon Islands" value="155.671,-11.846,166.932,-6.606">Solomon Islands</option>\t\t\t\t\t\t\t<option title="Somalia" value="40.989,-1.675,51.411,11.979">Somalia</option>\t\t\t\t\t\t\t<option title="South Africa" value="14.409,-46.97,37.892,-22.136">South Africa</option>\t\t\t\t\t\t\t<option title="SouthGeorgia/Sandwich Is" value="-38.024,-58.499,-26.241,-53.99">SouthGeorgia/Sandwich Is</option>\t\t\t\t\t\t\t<option title="Spain" value="-18.17,27.638,4.317,43.764">Spain</option>\t\t\t\t\t\t\t<option title="Sri Lanka" value="79.696,5.918,81.892,9.828">Sri Lanka</option>\t\t\t\t\t\t\t<option title="Sudan" value="21.829,3.493,38.608,22.232">Sudan</option>\t\t\t\t\t\t\t<option title="Suriname" value="-58.071,1.836,-53.986,6.002">Suriname</option>\t\t\t\t\t\t\t<option title="Svalbard Is" value="10.488,74.343,33.638,80.764">Svalbard Is</option>\t\t\t\t\t\t\t<option title="Swaziland" value="30.798,-27.316,32.133,-25.728">Swaziland</option>\t\t\t\t\t\t\t<option title="Sweden" value="11.113,55.339,24.167,69.06">Sweden</option>\t\t\t\t\t\t\t<option title="Switzerland" value="5.967,45.829,10.488,47.807">Switzerland</option>\t\t\t\t\t\t\t<option title="Syrian Arab Republic" value="35.614,32.314,42.378,37.291">Syrian Arab Republic</option>\t\t\t\t\t\t\t<option title="Tajikistan" value="67.365,36.672,75.187,41.049">Tajikistan</option>\t\t\t\t\t\t\t<option title="Tanzania, United Rep of" value="29.341,-11.74,40.437,-0.997">Tanzania, United Rep of</option>\t\t\t\t\t\t\t<option title="Thailand" value="97.347,5.633,105.639,20.455">Thailand</option>\t\t\t\t\t\t\t<option title="Togo" value="-0.15,6.101,1.798,11.139">Togo</option>\t\t\t\t\t\t\t<option title="Tokelau" value="-171.863,-9.219,-171.844,-9.171">Tokelau</option>\t\t\t\t\t\t\t<option title="Tonga" value="-175.36,-21.268,-173.907,-18.568">Tonga</option>\t\t\t\t\t\t\t<option title="Trinidad and Tobago" value="-61.922,10.04,-60.521,11.346">Trinidad and Tobago</option>\t\t\t\t\t\t\t<option title="Tunisia" value="7.492,30.234,11.582,37.34">Tunisia</option>\t\t\t\t\t\t\t<option title="Turkey" value="25.666,35.818,44.821,42.11">Turkey</option>\t\t\t\t\t\t\t<option title="Turkmenistan" value="52.44,35.146,66.671,42.796">Turkmenistan</option>\t\t\t\t\t\t\t<option title="Turks and Caicos Is" value="-72.031,21.74,-71.634,21.958">Turks and Caicos Is</option>\t\t\t\t\t\t\t<option title="Tuvalu" value="176.295,-8.561,179.232,-6.089">Tuvalu</option>\t\t\t\t\t\t\t<option title="Uganda" value="29.574,-1.476,35.01,4.223">Uganda</option>\t\t\t\t\t\t\t<option title="Ukraine" value="22.151,44.379,40.179,52.379">Ukraine</option>\t\t\t\t\t\t\t<option title="United Arab Emirates" value="51.583,22.633,56.382,26.084">United Arab Emirates</option>\t\t\t\t\t\t\t<option title="United Kingdom" value="-8.172,49.955,1.749,60.843">United Kingdom</option>\t\t\t\t\t\t\t<option title="United States of America" value="-178.217,18.925,-68.0,71.351">United States of America</option>\t\t\t\t\t\t\t<option title="Uruguay" value="-58.439,-34.944,-53.098,-30.097">Uruguay</option>\t\t\t\t\t\t\t<option title="US Minor Outlying Is" value="166.609,-0.398,-177.396,28.222">US Minor Outlying Is</option>\t\t\t\t\t\t\t<option title="US Virgin Islands" value="-64.896,17.677,-64.563,17.793">US Virgin Islands</option>\t\t\t\t\t\t\t<option title="USSR, Former Area of" value="16.1,32.18,183.39,88.23">USSR, Former Area of</option>\t\t\t\t\t\t\t<option title="Uzbekistan" value="55.997,37.185,73.168,45.571">Uzbekistan</option>\t\t\t\t\t\t\t<option title=" vanuatu" value="166.522,-20.254,169.894,-13.707">Vanuatu</option>\t\t\t\t\t\t\t<option title=" venezuela" value="-73.378,0.649,-59.803,12.198">Venezuela</option>\t\t\t\t\t\t\t<option title=" viet Nam" value="102.141,8.559,109.465,23.324">Viet Nam</option>\t\t\t\t\t\t\t<option title="Wake Island" value="166.609,19.279,166.662,19.325">Wake Island</option>\t\t\t\t\t\t\t<option title="Wallis and Futuna Is" value="-178.19,-14.324,-176.122,-13.215">Wallis and Futuna Is</option>\t\t\t\t\t\t\t<option title="West Bank" value="34.888,31.351,35.571,32.546">West Bank</option>\t\t\t\t\t\t\t<option title="Yemen" value="42.556,12.145,54.473,18.999">Yemen</option>\t\t\t\t\t\t\t<option title="Zambia" value="21.996,-18.075,33.702,-8.192">Zambia</option>\t\t\t\t\t\t\t<option title="Zimbabwe" value="25.238,-22.415,33.072,-15.617">Zimbabwe</option>\t\t\t\t\t\t</select>\t\t\t\t\t</div>\t\t\t\t\x3c!-- END SELECT COUNTRY --\x3e\t\t\t\t\t\t\t\t\x3c!-- SELECT W3W --\x3e\t\t\t\t\t<div class="w3w-input hidden">\t\t\t\t\t\t<form id="w3wForm">\t\t\t\t\t\t\t<fieldset>\t\t\t\t\t\t\t\t<input type="W3Wsearch" placeholder="Enter words" title="Enter words" id="w3w_search">\t\t\t\t\t\t\t\t<span class="w3w-select">\t\t\t\t\t\t\t\t\t<select class="single-select w3w" title="W3W Suggestions" size="3" onclick="W3WSuggestionChoosen(value);">\t\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t</fieldset>\t\t\t\t\t\t</form>\t\t\t\t\t</div>\t\t\t\t\x3c!-- END SELECT W3W --\x3e\t\t\t\t\t\t\t\t\x3c!-- SELECT GEOLOCATION --\x3e\t\t\t\t\t<div class="geolocation-input">\t\t\t\t\t\t<form id="geolocationForm">\t\t\t\t\t\t\t<fieldset>\t\t\t\t\t\t\t\t<input type="text" placeholder="Enter a location" title="Enter a location" id="geolocation_search" class="glyphicon" autocomplete="off">\t\t\t\t\t\t\t\t<span class="geolocation-select">\t\t\t\t\t\t\t\t\t<select class="single-select geolocation" title="Geolocation Suggestions">\t\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t<ul class="autocompleteGeolocation">\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t</fieldset>\t\t\t\t\t\t</form>\t\t\t\t\t</div>\t\t\t\t\x3c!-- END SELECT GEOLOCATION --\x3e\t\t\t\t\t\t\t\t\x3c!-- SELECT BOX --\x3e\t\t\t\t\t<div class="box-input hidden">\t\t\t\t\t\t<form id="boxForm">\t\t\t\t\t\t\t<fieldset>\t\t\t\t\t\t\t\t<div><input type=number placeholder="First Longitude" title="First Longitude" step=any id="FirstLongiutde" min="-360.0" max="360.0"></div>\t\t\t\t\t\t\t\t<div><input type=number placeholder="First Latitude" title="First Latitude" step=any id="FirstLatitude" min="-85.0" max="85.0"></div>\t\t\t\t\t\t\t\t<div><input type=number placeholder="Second Longitude" title="Second Longitude" step=any id="SecondLongiutde" min="-360.0" max="360.0"></div>\t\t\t\t\t\t\t\t<div><input type=number placeholder="Second Latitude" title="Second Latitude" step=any id="SecondLatitude" min="-85.0" max="85.0"></div>\t\t\t\t\t\t\t</fieldset>\t\t\t\t\t\t</form>\t\t\t\t\t</div>\t\t\t\t\x3c!-- END SELECT BOX --\x3e\t\t\t\t\x3c!-- MULTISELECT EARTH OBSERVATIONS CATALOGS --\x3e\t\t\t\t\t<div class="box-size break2">\t\t\t\t\t\t\x3c!-- <button class="concept-maps">Concept Maps</button> --\x3e\t\t\t\t\t</div>\t\t\t\t\x3c!-- END MULTISELECT EARTH OBSERVATIONS CATALOGS --\x3e\t\t\t\t\t<hr class="clear" />\t\t\t\t\x3c!-- INPUTS DATE --\x3e\t\t\t\t\t<div class="box-size date">\t\t\t\t\t\t<div>\t\t\t\t\t\t\t<input type="text" id="date-from" class="datepicker" placeholder="From...">\t\t\t\t\t\t\t<span class="limit"></span>\t\t\t\t\t\t\t<input type="text" class="datepicker" id="date-to" placeholder="To...">\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\x3c!-- END INPUTS DATE --\x3e\t\t\t\t\x3c!-- START INPUTS RADIO --\x3e\t\t\t\t\t<div class="box-size radio_w3w">\t\t\t\t\t\t<input type="radio" id="bbox_contains" name="bbox_rel" checked/><label for="bbox_contains">contains</label>\t\t\t\t\t\t<input type="radio" id="bbox_overlaps" name="bbox_rel"/><label for="bbox_overlaps">overlaps</label>\t\t\t\t\t\t<input type="radio" id="bbox_disjoint" name="bbox_rel"/><label for="bbox_disjoint">disjoint</label>\t\t\t\t\t</div>\t\t\t\t\x3c!-- END INPUTS RADIO --\x3e\t\t\t\t\x3c!-- START INPUTS RADIO --\x3e\t\t\t\t\t<div class="box-size radio">\t\t\t\t\t\t<input type="radio" id="last-week" name="date"/><label for="last-week">Last week</label>\t\t\t\t\t\t<input type="radio" id="last-month" name="date"/><label for="last-month">Last month</label>\t\t\t\t\t\t<input type="radio" id="last-year" name="date"/><label for="last-year">Last year</label>\t\t\t\t\t</div>\t\t\t\t\x3c!-- END INPUTS RADIO --\x3e\t\t\t\t</fieldset>\t\t\t</form>\t\t</div>\t\x3c!-- END SEARCH FORM --\x3e\t\x3c!-- START RESULT FORM --\x3e\t\t<div class="row-result-form">\t\t\t<div class="show-result">\t\t\t\x3c!-- START SEARCH RESULT --\x3e\t\t\t\t<div class="number-result">\t\t\t\t\t<span class="text-search-result">Search Results</span>\t\t\t\t\t<span class="nowrap">\t\t\t\t\t\t<span class="text-number-of-results">Number of results:</span>\t\t\t\t\t\t<span class="number-results">234</span>\t\t\t\t\t</span>\t\t\t\t</div>\t\t\t\x3c!-- END SEARCH RESULT --\x3e\t\t\t\x3c!-- START SORT BY --\x3e\t\t\t\t<div class="sort-by">\t\t\t\t\t<button class="btn-form-results" type="button"></button>\t\t\t\t</div>\t\t\t\x3c!-- END SORT BY --\x3e\t\t\t\t<hr class="clear" />\t\t\t\x3c!-- START FILTERS --\x3e\t\t\t\t<div class="filters">\t\t\t\t\t<span>Filters</span>\t\t\t\t\t<form>\t\t\t\t\t\t<fieldset id="faceted-filters">\t\t\t\t\t\t\t<span class="tags-select">\t\t\t\t\t\t\t\t<select class="single-select tags" title="Keyword"  >\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t<span class="format-select">\t\t\t\t\t\t\t\t<select class="single-select formats" title="Formats">\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t<span class="source-select">\t\t\t\t\t\t\t\t<select class="single-select source" title="Source">\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t<span class="protocol-select" title="Protocol">\t\t\t\t\t\t\t\t<select class="single-select protocol">\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t<span class="organisation-select">\t\t\t\t\t\t\t\t<select class="single-select organisation" title="Organisation"></select>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t</fieldset>\t\t\t\t\t</form>\t\t\t\t</div>\t\t\t\t\t\t\t\x3c!-- END FILTERS --\x3e\t\t\t\t\t\t\x3c!-- START GRANULA SPECYFIC FILTERS --\x3e\t\t\t\t<div class="granula-filters">\t\t\t\t\t<span>Filters</span>\t\t\t\t\t<form>\t\t\t\t\t\t<fieldset id="granula-filters-set">\t\t\t\t\t\t\t<div class="prodType-select" style="display:none">\t\t\t\t\t\t\t\t<select class="single-select prodType" title="Product type"  >\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="sarPolCh-select" style="display:none">\t\t\t\t\t\t\t\t<select class="single-select sarPolCh" title="Sensor polarisation">\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="sensorOpMode-select" style="display:none">\t\t\t\t\t\t\t\t<select class="single-select sensorOpMode" title="Sensor operational mode">\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="sensorSwath-select" style="display:none">\t\t\t\t\t\t\t\t<select class="single-select sensorSwath" title="Sensor swath"></select>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="relOrbit-select" style="display:none">\t\t\t\t\t\t\t\t<input type="number" placeholder="Relative orbit" title="Relative orbit" id="filter-relOrbit" min="0" step="1"/>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="row-select" style="display:none">\t\t\t\t\t\t\t\t<input type="number" placeholder="Row" title="Row" id="filter-row" min="0" step="1"/>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="path-select" style="display:none">\t\t\t\t\t\t\t\t<input type="number" placeholder="Path" title="Path" id="filter-path" min="0" step="1"/>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</fieldset>\t\t\t\t\t</form>\t\t\t\t\t\t\t\t\t\t\x3c!-- START CLOUD COVERAGE --\x3e\t\t\t\t\t<div class="box_cloudcp">\t\t\t\t\t\t<label for="cloudcp">Cloud coverage</label>\t\t\t\t\t\t<input type="range" id="cloudcp" style="position: absolute; visibility: hidden;">\t\t\t\t\t\t<div id="cloudcp-slider-range"></div>\t\t\t\t\t</div>\t\t\t\t\t\x3c!-- END CLOUD COVERAGE --\x3e\t\t\t\t\t<div class="box-size date">\t\t\t\t\t\t<div>\t\t\t\t\t\t\t<input type="text" id="date-from-granula" class="datepicker" placeholder="From...">\t\t\t\t\t\t\t<span class="limit"></span>\t\t\t\t\t\t\t<input type="text" id="date-to-granula" class="datepicker" placeholder="To...">\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\x3c!-- END GRANULA SPECYFIC FILTERS --\x3e\t\t\t\t\t\t\x3c!-- START IRIS SPECYFIC FILTERS --\x3e\t\t\t\t<div class="iris-filters">\t\t\t\t\t<span>Filters</span>\t\t\t\t\t<form>\t\t\t\t\t\t<fieldset id="iris-filters-set">\t\t\t\t\t\t\t<div class="magt-select">\t\t\t\t\t\t\t\t<select class="single-select magt" title="Magnitude type">\t\t\t\t\t\t\t\t\t<option value="">Magnitude type</option>\t\t\t\t\t\t\t\t\t<option value="ML">Richter magnitude</option>\t\t\t\t\t\t\t\t\t<option value="Ms">Surface wave magnitude</option>\t\t\t\t\t\t\t\t\t<option value="mb">Body wave magnitude</option>\t\t\t\t\t\t\t\t\t<option value="Mw">Moment magnitude</option>\t\t\t\t\t\t\t\t\t<option value="all">All</option>\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="evtord-select">\t\t\t\t\t\t\t\t<select class="single-select evtord" title="Sort results by">\t\t\t\t\t\t\t\t\t<option value="">Sort results by</option>\t\t\t\t\t\t\t\t\t<option value="time">Time descending</option>\t\t\t\t\t\t\t\t\t<option value="time-asc">Time ascending</option>\t\t\t\t\t\t\t\t\t<option value="magnitude">Magnitude descending</option>\t\t\t\t\t\t\t\t\t<option value="magnitude-asc">Magnitude ascending</option>\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</fieldset>\t\t\t\t\t</form>\t\t\t\t\t\t\t\t\t\t<div class="box-mag">\t\t\t\t\t\t<span>Magnitude limit: 0-10</span>\t\t\t\t\t\t<div id="mag-slider-range"></div>\t\t\t\t\t</div>\t\t\t\t\t<div class="box-depth">\t\t\t\t\t\t<span>Depth: 0-100 KM</span>\t\t\t\t\t\t<div id="depth-slider-range"></div>\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t<div class="box-size date">\t\t\t\t\t\t<div>\t\t\t\t\t\t\t<input type="text" id="date-from-iris" class="datepicker" placeholder="From...">\t\t\t\t\t\t\t<span class="limit"></span>\t\t\t\t\t\t\t<input type="text" id="date-to-iris" class="datepicker" placeholder="To...">\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\x3c!-- END IRIS SPECYFIC FILTERS --\x3e\t\t\t\t\t\t\t<hr class="clear" />\t\t\t</div>\t\t</div>\t\x3c!-- END RESULT FORM --\x3e\t\t<div class="wrap-result-list clearfix">\t\t\t<div class="result-wrap">\t\t\t\t<div class="result-rows">\t\t\t\t\t\x3c!-- START RESULT LIST: Here comes the results--\x3e\t\t\t\t\t\x3c!-- END RESULT LIST --\x3e\t\t\t\t</div>\t\t\t</div>\t\x3c!-- START PAGINATION --\x3e\t\t<div class="pagination-container"></div>\t\x3c!-- END PAGINATION --\x3e\t</div></div>';$(Geoss.searchContainer).append(i)}function parseCoordinates(t){if(!t||",,,"==t)return[];if("string"!==$.type(t)){if("array"===$.type(t)){if("array"===$.type(t[0])){var e=[ol.proj.transform(t[0][0],"EPSG:3857","EPSG:4326"),ol.proj.transform(t[0][1],"EPSG:3857","EPSG:4326"),ol.proj.transform(t[0][2],"EPSG:3857","EPSG:4326"),ol.proj.transform(t[0][3],"EPSG:3857","EPSG:4326")],a=Math.min(e[0][0],e[2][0]),i=Math.max(e[0][0],e[2][0]),r=Math.max(e[0][1],e[2][1]);return[a,o=Math.min(e[0][1],e[2][1]),i,r]}var a=Number(t[0]),o=Number(t[1]);return[a,o,i=Number(t[2]),r=Number(t[3])]}return[]}if(-1!=(t=t.trim()).indexOf(",")){s=t.split(",");return[a=Number(s[0]),o=Number(s[1]),i=Number(s[2]),r=Number(s[3])]}if(-1!=t.indexOf(" ")){var s=t.split(" ");return[a=Number(s[1]),o=Number(s[0]),i=Number(s[3]),r=Number(s[2])]}}function coordinatesForDrawing(t){var e=t[0],a=t[1],i=t[2],r=t[3];return[[[i,r],[i,a],[e,a],[e,r]]]}function coordinatesForSearch(t){return t[0]+","+t[1]+","+t[2]+","+t[3]}function coordinatesForPresentation(t){var e=t[0],a=t[1],i=t[2];return"("+t[3]+", "+e+", "+a+", "+i+")"}function isWholeWorld(t,e,a,i){return i>=80&&a>=179&&e<=-80&&t<=-179}function isPoint(t,e,a,i){var r=a-t;return i-e<=.01&&r<=.01}function normalizeLongitude(t,e){return Math.abs(e-t)>=360?(t=-180,e=180):(t>180&&(t-=360*Math.ceil((t-180)/360),e-=360*Math.ceil((e-180)/360)),e>180&&(e-=360*Math.ceil((e-180)/360)),t<-180&&(t+=360*-Math.floor((t+180)/360),e+=360*-Math.floor((e+180)/360)),e<-180&&(e+=360*-Math.floor((e+180)/360))),[t,e]}function denormalizeLongitude(t,e){return t<=e?[t,e]:Math.abs(180-t)>Math.abs(-180-e)?[t,e+360]:[t-360,e]}function removeDuplicateBoxes(t){for(var e=[],a=0;a<t.length;a++){for(var i=!1,r=0;r<e.length;r++)if(t[a][0]==e[r][0]&&t[a][1]==e[r][1]&&t[a][2]==e[r][2]&&t[a][3]==e[r][3]){i=!0;break}i||e.push(t[a])}return e}function boxesOverlap(t,e){var a=t[0],i=t[2],r=e[0],o=e[2];return Math.abs(i-a)>=360||(Math.abs(o-r)>=360||(a<=i&&r>=a&&r<=i||a>i&&(r>=a||r<=i)))}function mergeOverlapingBoxes(t,e){var a=t[0],i=t[2],r=e[0],o=e[2],s=Math.min(t[1],e[1]),l=Math.max(t[3],e[3]),n=null,c=null;return Math.abs(i-a)>=360?(n=-180,c=180):Math.abs(o-r)>=360?(n=-180,c=180):a<=i&&r>=a&&r<=i?r<=o?(n=a,c=Math.max(i,o)):o<a?(n=a,c=o):(n=-180,c=180):a>i&&(r>=a||r<=i)&&(r<=o&&r>=a?(n=a,c=i):o<a?(n=a,c=Math.max(i,o)):(n=-180,c=180)),[n,s,c,l]}function mergeNonOverlapingBoxes(t,e){var a=Math.min(t[1],e[1]),i=Math.max(t[3],e[3]);return[t[0],a,e[2],i]}function calcBoxDistance(t,e){var a=t[2];return e[0]-a}function mergeBoxes(t){if(1==t.length)return t[0];for(var e=[],a=0;a<t.length;a++){var i=normalizeLongitude(t[a][0],t[a][2]);normalizedW=i[0],normalizedE=i[1],e.push([normalizedW,t[a][1],normalizedE,t[a][3]])}t=e;var r;do{r=!1;for(a=0;a<t.length;a++)for(n=t.length-1;n>a;n--)boxesOverlap(t[a],t[n])?(t[a]=mergeOverlapingBoxes(t[a],t[n]),t.splice(n,1),r=!0):boxesOverlap(t[n],t[a])&&(t[a]=mergeOverlapingBoxes(t[n],t[a]),t.splice(n,1),r=!0)}while(r);for(var o,s=null,l=null;t.length>1;){o=360;for(a=0;a<t.length;a++)for(var n=t.length-1;n>a;n--){var c=calcBoxDistance(t[a],t[n]);c<=o&&(o=c,s=a,l=n),(c=calcBoxDistance(t[n],t[a]))<=o&&(o=c,s=n,l=a)}t[s]=mergeNonOverlapingBoxes(t[s],t[l]),t.splice(l,1)}return t[0]}function zoomOnFeatures(t,e){var a=e.getSource().getFeatures()[0];if("icon"!=e.type&&"circle"!=e.type||1!=a.getGeometry().getCoordinates().length)t.getView().fit(a.getGeometry());else{var i=a.getGeometry().getCoordinates()[0];i=ol.proj.transform(i,"EPSG:3857","EPSG:4326");var r=new ol.geom.Polygon(coordinatesForDrawing([i[0]-10,Math.max(i[1]-10,-90),i[0]+10,Math.min(i[1]+10,90)]));r=r.transform("EPSG:4326","EPSG:3857"),t.getView().fit(r)}}function parsePolygon(t){var e=t.indexOf("(("),a=t.indexOf("))"),i=[];return(t=t.slice(e+2,a).split(",")).forEach(function(t){var e=t.trim().split(" ");i.push([parseFloat(e[0]),parseFloat(e[e.length-1])])}),i}function centerMap(t,e,a,i){var r=denormalizeLongitude(t,a);t=r[0];((a=r[1])-t<.02||i-e<.02)&&(t-=.01,a+=.01,e-=.01,i+=.01);var o=0,s=0;if(GWP){var l=$("body").hasClass("mobile"),n=parseInt($(".box-search").css("left"),10)<0,c=!$(".box-search").hasClass("searching");o=$(".box-search").offset().left,s=window.innerWidth-$(".box-search").offset().left-$(".box-search").width(),o<200&&s<200||l||n||c?(o=0,s=0):s>o?(o=$(".box-search").width()+$(".box-search").offset().left+10,s=0):(o=0,s=$(".box-search").width()+(window.innerWidth-$(".box-search").width()-$(".box-search").offset().left)+10)}var d=[t,e,a,i];d=ol.extent.applyTransform(d,ol.proj.getTransform("EPSG:4326","EPSG:3857")),Geoss.mainMap.getView().fit(d,{padding:[0,s,0,o]})}function centerMapOnEntry(t,e,a,i){if(t&&t.trim()){var r=t.split(" "),o=Number(r[1]),s=Number(r[3]);centerMap(o,Number(r[0]),s,Number(r[2]));var l="",n="";i?(l=i.title,n=i.organisation):$('.info[value="'+a+'"]').length&&(l=$('.info[value="'+a+'"]').closest(".result-text").find(".result-title").html(),n=$('.info[value="'+a+'"]').closest(".result-text").find(".resultboxtext span").html()),LogStore.ga_category="discovery",LogStore.logElementClick(e,null,a,"dab","showOnMap",null,n,l)}}function styleSetter(t,e){var a;if("box"==t.type){var i="rgba(255, 255, 0, "+(s=[.1,.1,.3,0])[e]+")",r=["yellow","transparent","yellow","transparent"];a=new ol.style.Style({fill:new ol.style.Fill({color:i}),stroke:new ol.style.Stroke({color:r[e],width:2})})}else if("icon"==t.type){s=[.75,.4,1,0];a=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],opacity:s[e],src:Geoss.imagesLocation+"images/map-icons/marker.png"})})}else if("circle"==t.type){var o=Geoss.imagesLocation+"images/map-icons/irisCircles"+t.depth+".svg",s=[.75,.4,1,0];a=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,.5],opacity:s[e],src:o,scale:t.radius})})}var l=t.getSource().getFeatures()[0];void 0!=l&&l.setStyle(a)}function drawFeature(t,e){if(t.irisCircles){var a=[[t.irisCircles.coordinates[2],t.irisCircles.coordinates[3]]],i=.2+.12*t.irisCircles.magnitude,r=Math.min(Math.ceil(t.irisCircles.depth/2e4),5),o=new ol.Feature({geometry:new ol.geom.MultiPoint(a)});o.getGeometry().transform("EPSG:4326","EPSG:3857"),o.Box=e,(b=new ol.layer.Vector({source:new ol.source.Vector({features:[o]})})).type="circle",b.radius=i,b.depth=r,b.areaFeature=!0,b.setZIndex(e+21),styleSetter(b,0)}else if(t.footprints)(w=new ol.Feature({geometry:new ol.geom.Polygon([parsePolygon(t.footprints)])})).getGeometry().transform("EPSG:4326","EPSG:3857"),w.Box=e,(b=new ol.layer.Vector({source:new ol.source.Vector({features:[w]})})).type="box",b.areaFeature=!0,b.setZIndex(e+21),styleSetter(b,0);else if(t.boxes.length&&t.boxes[0]){for(var s=[],l=[],n=[],c=[],d=!0,u=0;u<t.boxes.length;u++)s[u]=t.boxes[u][0],l[u]=t.boxes[u][1],n[u]=t.boxes[u][2],c[u]=t.boxes[u][3],isPoint(s[u],l[u],n[u],c[u])||(d=!1);if(d){for(var p=[],u=0;u<t.boxes.length;u++)p.push([n[u],c[u]]);var m=new ol.Feature({geometry:new ol.geom.MultiPoint(p)});m.getGeometry().transform("EPSG:4326","EPSG:3857"),m.Box=e;var h=new ol.source.Vector({features:[m]});(b=new ol.layer.Vector({source:h})).type="icon",b.areaFeature=!0,b.setZIndex(e+21),styleSetter(b,0)}else{for(var g=[],u=0;u<t.boxes.length;u++){var v=denormalizeLongitude(s[u],n[u]);s[u]=v[0],n[u]=v[1],g.push([[[n[u],c[u]],[n[u],l[u]],[s[u],l[u]],[s[u],c[u]],[n[u],c[u]]]])}var f=new ol.geom.MultiPolygon(g),w=new ol.Feature({geometry:f});w.getGeometry().transform("EPSG:4326","EPSG:3857"),w.Box=e;var b=new ol.layer.Vector({source:new ol.source.Vector({features:[w]})});b.type="box",b.areaFeature=!0;var x=mergeBoxes(t.boxes);if(isWholeWorld(x[0],x[1],x[2],x[3]))return null;b.setZIndex(e+21),styleSetter(b,0)}}return b}function boundingBoxes_1(t,e,a){function i(){null==selectedItem?styleSetter(o,0):(styleSetter(o,1),a==selectedItem&&styleSetter(o,2))}function r(){Geoss.showBoundingBoxes?($(DAB.View.resultsContainer).removeClass("hide_bbox"),i()):($(DAB.View.resultsContainer).addClass("hide_bbox"),styleSetter(o,3))}var o=drawFeature(e,a);o&&(t.addLayer(o),GWP&&r(),$(DAB.View.resultsContainer).on("click",".list-result button.add_map",function(){selectedItem=$(this).closest(".list-result").attr("data-id"),Geoss.showBoundingBoxes&&i(),hoverInteractiveMode=!1}),$(DAB.View.resultsContainer).on("mouseenter",".list-result",function(){var t=$(this).attr("data-id");a==t?styleSetter(o,2):styleSetter(o,1)}),$("body").on("mouseenter",DAB.View.resultsContainer+".hide_bbox .list-result",function(){styleSetter(o,3)}),$(DAB.View.resultsContainer).on("mouseleave",".list-result",function(){i()}),$("body").on("mouseleave",DAB.View.resultsContainer+".hide_bbox .list-result",function(){styleSetter(o,3)}),$(Geoss.layersContainer+" .checkbox-decoration #hideBoundingBoxes").on("change",r))}function removeBboxLayers(t){t.getLayers().getArray().slice().forEach(function(e){1==e.areaFeature&&t.removeLayer(e)})}function hoverMode(t){var e=t.pixel,a=Geoss.mainMap.forEachFeatureAtPixel(e,function(t,e){return t}),r=Geoss.mainMap.forEachFeatureAtPixel(e,function(t,e){return e});if(hoverInteractiveMode)if(a&&1==r.areaFeature)for(i=0;i<allLayers.length;i++)1==allLayers[i].areaFeature&&void 0!=allLayers[i].getSource().getFeatures()[0]&&(styleSetter(allLayers[i],1),allLayers[i].getSource().getFeatures()[0].Box==a.Box&&(jTarget.css("cursor",cursorHoverStyle),styleSetter(allLayers[i],2)));else for(jTarget.css("cursor",""),i=0;i<allLayers.length;i++)1==allLayers[i].areaFeature&&void 0!=allLayers[i].getSource().getFeatures()[0]&&styleSetter(allLayers[i],0);else jTarget.css("cursor","")}function addBBoxInteraction(t){target=t.getTarget(),jTarget="string"==typeof target?$("#"+target):$(target),allLayers=t.getLayers().getArray(),t.on("pointermove",function(t){Geoss.showBoundingBoxes?hoverMode(t):jTarget.css("cursor","")}),t.on("click",function(e){if(Geoss.showBoundingBoxes){var a=e.pixel;hoverInteractiveMode=!0,hoverMode(e);var i=t.forEachFeatureAtPixel(a,function(t,e){return e}),r=t.forEachFeatureAtPixel(a,function(t,e){return t});if(i&&i.areaFeature&&r){if(GWP&&$("body").hasClass("mobile")){var o=$('.wrap-result-list .result-rows .list-result[data-id="'+r.Box+'"]');o.show().siblings(".list-result").hide(),$(".floating-blue").hasClass("active")&&($(".floating-blue").removeClass("active"),$(".box-search").css("height","400px"),$(".box-search").slideDown());o.height();$(DAB.View.paginationContainer).hide(),$("#button-return_glyphicon").show()}else GWP&&"0px"==$("button.hideAllMap2").css("left")&&$("button.hideAllMap2").animate({left:"-45px"},50,function(){$(".box-search").animate({left:"30px"},1e3)});$(DAB.View.resultsContainer+" .list-result").removeClass("mouseenter"),$(DAB.View.resultsContainer+' .list-result[data-id="'+r.Box+'"]').addClass("mouseenter"),$(".wrap-result-list .result-wrap").scrollTop($(".wrap-result-list .result-wrap").scrollTop()+$(".wrap-result-list .result-wrap .list-result.mouseenter").position().top),20==i.getZIndex()?(t.getLayers().forEach(function(t){"true"==t.get("param")&&(t.set("param","false"),t.setZIndex(r.Box+20))}),i.setZIndex(20)):(i.setZIndex(20),i.set("param","true")),hoverInteractiveMode=!1,selectedItem=r.Box}else hoverInteractiveMode=!0,selectedItem=null}}),t.getViewport().addEventListener("contextmenu",function(e){if(e.preventDefault(),Geoss.showBoundingBoxes){var a=t.getEventPixel(e),i=t.forEachFeatureAtPixel(a,function(t,e){return e}),r=t.forEachFeatureAtPixel(a,function(t,e){return t});i&&i.areaFeature&&r&&$(' .list-result[data-id="'+r.Box+'"] .info').click()}}),$("body").on("mouseenter",DAB.View.resultsContainer,function(){$(DAB.View.resultsContainer+" .list-result").removeClass("mouseenter")})}function getLayerByName(t){var e=null;return Geoss.mainMap.getLayers().forEach(function(a){a.get("name")==t&&(e=a)}),e}function tileReloadHandler(t,e){var a=e.tile,i=t,r=0;a.loadRetryCount&&(r=a.loadRetryCount),a.loadRetryCount=r+1;var o=0;i.loadRetryCount&&(o=i.loadRetryCount),i.loadRetryCount=o+1,r>=3||o>=10?(ol.Observable.unByKey(e),$(".black.black2.active").hide(),initializeWmsErrorPopup(),$(".black.wmsMessage").attr("data-id",t.get("name")).show(),$(".black.wmsMessage .button_saved").focus()):(console.log("reloading "+t.layerType+" tile"),e.tile.load())}function createWMS(t){if(t.indexOf("ANCHOR=complex")>-1)var e=t.indexOf("&&&"),a=t.slice(0,e);else var e=t.indexOf("?"),a=t.slice(0,e);if(t.indexOf("LAYERS=")>-1){var i=t.indexOf("LAYERS="),r=t.indexOf("&",i);if(i>-1)o=t.slice(i+7,r);else o=""}else if(t.indexOf("name=all")>-1)o="all";else var o="";if(t.indexOf("version=")>-1){var s=t.indexOf("version="),l=t.indexOf("&",s);if(s>-1)n=t.slice(s+8,l);else n=""}else if(t.indexOf("VERSION=")>-1){var s=t.indexOf("VERSION="),l=t.indexOf("&",s);if(s>-1)n=t.slice(s+8,l);else var n=""}var c=new ol.layer.Tile({name:t,active:!0,source:new ol.source.TileWMS({projection:"EPSG:4326",url:a,params:{LAYERS:o,VERSION:n,SRS:"EPSG:4326"},crossOriginKeyword:"anonymous"})});return c.setZIndex(8),c.layerType="WMS",c.set("name",t),c.setVisible(!0),c}function createTMS(t){var e=t.replace("/${z}/${x}/${y}","/{z}/{x}/{y}"),a=new ol.layer.Tile({source:new ol.source.XYZ({projection:"EPSG:4326",tileSize:[512,512],url:e,crossOriginKeyword:"anonymous"})});return a.setZIndex(8),a.layerType="TMS",a.set("name",t),a.setVisible(!0),a}function createKML(t){var e=SearchEngine.getLayerKmlUrl(t);console.log("proxyUrl",e);var a=new ol.layer.Vector({name:t,active:!0,source:new ol.source.Vector({url:e,format:new ol.format.KML})});return a.setZIndex(8),a.layerType="KML",a.set("name",t),a.setVisible(!0),a}function createKMZ(t){var e=SearchEngine.getLayerKmzUrl(t);console.log("proxyUrl",e);var a=new ol.layer.Vector({name:t,active:!0,source:new ol.source.Vector({url:e,format:new ol.format.KML})});return a.setZIndex(8),a.layerType="KMZ",a.set("name",t),a.setVisible(!0),a}function removeLayer(t){Geoss.mainMap.removeLayer(getLayerByName(t))}function showLayer(t){getLayerByName(t).setVisible(!0)}function hideLayer(t){getLayerByName(t).setVisible(!1)}function setLayerOpacity(t,e){getLayerByName(t).setOpacity(e)}function clearLayersWmsTms(){var t,e=Geoss.mainMap.getLayers().getArray();for(i=e.length-1;i>=0;i--)"WMS"!=(t=e[i].layerType)&&"TMS"!=t&&"KML"!=t&&"KMZ"!=t||Geoss.mainMap.removeLayer(e[i]);GWP&&$(Geoss.layersContainer+" .checkbox-decoration span.closex").trigger("click")}function drawLayerAoi(t,e,a,i){clearLayersAoi();var r=normalizeLongitude(t,a);normalizedW=r[0],normalizedE=r[1],currentCoordinates=[normalizedW,e,normalizedE,i];var o=denormalizeLongitude(t,a);t=o[0],a=o[1];var s=new ol.Feature({geometry:new ol.geom.Polygon(coordinatesForDrawing([t,e,a,i]))});s.getGeometry().transform("EPSG:4326","EPSG:3857");var l=new ol.layer.Vector({source:new ol.source.Vector({features:[s]}),style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"red",width:2})})});return l.setZIndex(9),l.layerAOI=!0,map.addLayer(l),$(".row-search .search-button-1 span").addClass("countryChecked"),chooseFilteringIcon(),AOIAction&&(centerMapOnAoi(),AOIAction()),l}function centerMapOnAoi(){currentCoordinates&&centerMap(currentCoordinates[0],currentCoordinates[1],currentCoordinates[2],currentCoordinates[3])}function drawW3W(t,e,a,i){drawLayerAoi(t,e,a,i);var r=t+(a-t)/2,o=i-(i-e)/2,s=new ol.Feature({geometry:new ol.geom.Point([r,o])});s.getGeometry().transform("EPSG:4326","EPSG:3857");var l=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],opacity:.75,src:"/geoss-theme/images/map-icons/w3wlogo.png"})});s.setStyle(l);var n=new ol.source.Vector({features:[s]}),c=new ol.layer.Vector({source:n});c.layerAOI=!0,c.setZIndex(9),map.addLayer(c)}function clearLayersAoi(){currentCoordinates=null;var t=map.getLayers().getArray();for(i=t.length-1;i>=0;i--)t[i].layerAOI&&(t[i]==vector?vector.getSource().clear():map.removeLayer(t[i]))}function clearAoi(t){t&&("Geolocation"==t?$(".row-form-search .geolocation-input").removeClass("hidden"):$(".row-form-search .geolocation-input").addClass("hidden"),$("#geolocation_search").val(""),"What3Words"==t?$(".row-form-search .w3w-input").removeClass("hidden"):$(".row-form-search .w3w-input").addClass("hidden"),$("#w3w_search").val(""),"Coordinates"==t?$(".row-form-search .box-input").removeClass("hidden"):$(".row-form-search .box-input").addClass("hidden"),$("#FirstLongiutde, #FirstLatitude, #SecondLongiutde, #SecondLatitude").val(""),"ContinentAndCountry"==t?$(".row-form-search .country-select").removeClass("hidden"):$(".row-form-search .country-select").addClass("hidden"),$(".row-form-search .country-select .single-select").multiselect("select","-180, -90, 180, 90"),$(".row-form-search .country-select .single-select").multiselect("refresh"),!GWP||t&&"ChooseSelectorOptions"!=t||outPan(map_default)),$(".row-search .search-button-1 span").removeClass("countryChecked"),chooseFilteringIcon(),currentCoordinates=[],clearLayersAoi()}function switchAoi(t){$(".row-form-search .search-option-select .single-select").multiselect("select",t),$(".row-form-search .search-option-select .single-select").multiselect("refresh"),clearAoi(t)}function hidePopupFunction(t){var e="function"==typeof t.target.className.indexOf&&t.target.className.indexOf("black")>=0;$(".popups").is(":visible")&&e&&$(t.target).removeClass("active").hide()}function openMetadataWindow(t){if(!DAB.View.searchInProgress){DAB.View.searchInProgress=!0,Geoss.actionBeforeRequest(),0==$(".black1").length&&$(Geoss.popupsContainer).append('<div class="black black1" onclick="hidePopupFunction(event)"></div>');var e=DAB.View.entries[t];void 0!=e&&null!=e?DAB.View.presentSatelliteMetadata(e):DAB.Facade.getMetadata(t)}}function initializePaginationContainer(){if(0==$(DAB.View.paginationContainer).children().length){$(DAB.View.paginationContainer).append('<div class="inner-pagination-container">\t<span class="text-pagination">Visible</span>\t<span class="numbers-pagination">1-10 of 234</span>\t<span class="prev">prev</span>\t<span class="next">next</span></div>')}}function updatePagination(t){initializePaginationContainer();var e=t.find("totalResults").text(),a=t.find("startIndex").text(),i=parseInt(a)+parseInt(t.find("itemsPerPage").text())-1;i>=e?(i=e,$(".inner-pagination-container span.next").addClass("disabled")):$(".inner-pagination-container span.next").removeClass("disabled"),1==a?$(".inner-pagination-container span.prev").addClass("disabled"):$(".inner-pagination-container span.prev").removeClass("disabled"),0==e?($(DAB.View.paginationContainer).hide(),a=0,$(".row-result-form .filters").removeClass("active"),$(".row-result-form .filters").hide()):$(DAB.View.paginationContainer).show(),$(".row-result-form .number-result .number-results").text(e),$(".inner-pagination-container .numbers-pagination").text(a+"-"+i+" of "+e)}function initLayerBox(){$(Geoss.layersContainer).append('<div class ="inner-layer-box">   <div class="checkbox-decoration hide_layer">       <input type="checkbox" id="hideBoundingBoxes" checked><label for="hideBoundingBoxes" class="bbox">Bounding boxes layer</label>   </div>   <hr class="clear"></div>'),$(".inner-layer-box .checkbox-decoration #hideBoundingBoxes").on("change",function(){Geoss.showBoundingBoxes=$(this).prop("checked")})}function initializeWmsErrorPopup(){if(0==$(Geoss.popupsContainer+" .wmsMessage").length){$(Geoss.popupsContainer).append('<div class="black wmsMessage"><div class="popups setting-workspace row">\t<div class="">\t\t<div class="title">BACK END ERROR<button class="close-popup glyphicon" title="close"></button></div>\t\t<div class="content number">\t\t\t<div class="title-mode">Map service is not available at the moment.<br />Portal maintenence team has been informed.<br />\t\t\t\t<span class="box_question">Would you like to disable presentation of this layer?</span>\t\t\t</div>\t\t\t<div class="clearfix"></div>\t\t\t<button class="button_saved">Disable</button>\t\t\t<button class="button_cancel">Ignore</button>\t\t\t<hr class="clear">\t\t</div>\t</div></div></div>')}}var GWP=!1,MyWorkspace={addSavedSearch:function(){var t=searchFormAttributes;GeossUtil.isAnyFilterSelected()&&Liferay.Service("/geoss-service-portlet.savedsearch/add-saved-search",{name:t.name,popularSearchId:t.popularSearchId,query:t.query,fullAndOpenDataset:t.fullAndOpenDataset.value,dateFrom:t.dateFrom,dateTo:t.dateTo,datePeriod:t.datePeriod.value,aoiOption:t.aoiOption.value,aoiBoundingBox:t.aoiBoundingBox,aoiGeolocation:t.aoiGeolocation,aoiW3W:t.aoiW3W,aoiRelation:t.aoiRelation.value,cloudCoverageFrom:t.cloudCoverageFrom.value,cloudCoverageTo:t.cloudCoverageTo.value,queryParams:t.queryParams.value,folder:t.folder.value,filterParams:t.filterParams.value,filterSet:t.filterSet,currMap:t.currMap},function(e){e.id?(GeossUtil.showMessage("SAVE SEARCH","Your search has been saved in My Workspace -> Your saved searches."),LogStore.logSearchResult(t,"Search saved in My Workspace")):GeossUtil.showMessage("SAVE SEARCH","Failed to save search.")})},restoreMainSearch:function(){MyWorkspace.Search.query&&$(".search-input input").val(MyWorkspace.Search.query),MyWorkspace.Search.fullAndOpenDataset&&$("label[for='Full_and_Open_Dataset']").trigger("click");for(var t=0;t<MyWorkspace.Search.customFields.length;t++)MyWorkspace.setCustomFieldValue(t);if(MyWorkspace.Search.datePeriod?$("label[for='"+MyWorkspace.Search.datePeriod+"']").trigger("click"):(MyWorkspace.Search.dateFrom&&($("#date-from").val(MyWorkspace.Search.dateFrom),$("#date-from").trigger("focus"),$("#date-from").trigger("blur")),MyWorkspace.Search.dateTo&&($("#date-to").val(MyWorkspace.Search.dateTo),$("#date-to").trigger("focus"),$("#date-to").trigger("blur"))),$("label[for='"+MyWorkspace.Search.aoiRelation+"']").trigger("click"),MyWorkspace.Search.aoiOption&&($(".search-option-select input[value='"+MyWorkspace.Search.aoiOption+"']").parent("label").trigger("click"),$(".search-option-select").trigger("click")),"Coordinates"==MyWorkspace.Search.aoiOption){if(MyWorkspace.Search.aoiBoundingBox){var e=parseCoordinates(MyWorkspace.Search.aoiBoundingBox);$("#FirstLongiutde").val(e[0]),$("#FirstLatitude").val(e[1]),$("#SecondLongiutde").val(e[2]),$("#SecondLatitude").val(e[3]),$("#FirstLongiutde").trigger("input")}}else if("Geolocation"==MyWorkspace.Search.aoiOption){$(".row-form-search #geolocation_search").val(MyWorkspace.Search.aoiGeolocation);var a=(e=parseCoordinates(MyWorkspace.Search.aoiBoundingBox))[0],i=e[1],r=e[2],o=e[3];GeossUtil.setChosenGeolocation(a,i,r,o)}else"ContinentAndCountry"==MyWorkspace.Search.aoiOption?$(".country-select input[value='"+MyWorkspace.Search.aoiBoundingBox+"']").parent("label").trigger("click"):"What3Words"==MyWorkspace.Search.aoiOption&&($(".row-form-search #w3w_search").val(MyWorkspace.Search.aoiW3W),GeossUtil.setChosenW3W(MyWorkspace.Search.aoiW3W));GWP&&!MyWorkspace.Search.defaultSearch&&(hideAllTooltips(),$(".search-button-2 span").trigger("click"))},restoreGranulaSearch:function(){$(".results-icons button.info[value='"+MyWorkspace.Search.folder+"']").siblings("button.drill-down").trigger("click")},addBookmarkedResult:function(t){var e=t.closest(".result-text").find(".result-title").text(),a=t.closest(".list-result").data("target-id"),i=t.closest(".list-result").data("entry-xml"),r=DAB.View.generateCurrentMapName(),o=t.closest(".result-text").find(".resultboxtext span").html(),s=t.closest(".results-icons").find(".info").attr("value");Liferay.Service("/geoss-service-portlet.bookmarkedresult/add-bookmarked-result",{name:e,targetId:a,entryXml:i,currMap:r},function(i){"object"==typeof i?(MyWorkspace.BookmarkedResults.push(a),GeossUtil.showMessage("BOOKMARK RESULT","Result has been saved in My Workspace -> Bookmarked Results."),t.addClass("remove"),t.removeClass("add"),t.prop("title","Remove from bookmarks"),LogStore.logElementClick(null,null,s,null,"Bookmark saved in My Workspace",null,o,e)):GeossUtil.showMessage("BOOKMARK RESULT","Failed to bookmark result.")})},deleteBookmarkedResult:function(t){var e=t.closest(".list-result").data("target-id"),a=t.closest(".result-text").find(".resultboxtext span").html(),r=t.closest(".result-text").find(".result-title").html(),o=t.closest(".results-icons").find(".info").attr("value");Liferay.Service("/geoss-service-portlet.bookmarkedresult/delete-bookmarked-result",{targetId:e},function(s){if("object"==typeof s){for(i=MyWorkspace.BookmarkedResults.length;i>=0;i--)e==MyWorkspace.BookmarkedResults[i]&&MyWorkspace.BookmarkedResults.splice(i,1);GeossUtil.showMessage("BOOKMARK RESULT","Result has been removed from bookmarks."),t.addClass("add"),t.removeClass("remove"),t.prop("title","Add as bookmark"),LogStore.logElementClick(null,null,o,null,"Bookmark removed from My Workspace",null,a,r)}else GeossUtil.showMessage("BOOKMARK RESULT","Failed to remove result from bookmarks.")})},restoreBookmarkedResult:function(){MyWorkspace.Bookmark.targetIds&&(hideAllTooltips(),$(".search-input #searchForm input").val(MyWorkspace.Bookmark.name),$(".search-button-2 span").trigger("click"))},drillUpBookmarkedResult:function(){MyWorkspace.resetSearchCount(),MyWorkspace.Bookmark.drillDown=!1,MyWorkspace.restoreBookmarkedResult()},restoreDrillDownBookmark:function(){$(".results-icons button.info").siblings("button.drill-down").trigger("click")},getToday:function(){var t=new Date,e=t.getDate(),a=t.getMonth()+1,i=t.getFullYear(),r=t.getHours(),o=t.getMinutes();return e<10&&(e="0"+e),a<10&&(a="0"+a),o<10&&(o="0"+o),t=e+"-"+a+"-"+i+" "+r+":"+o},isNumber:function(t){return null!=t&&""!=t&&""!=t.trim()&&!isNaN(parseFloat(t))},Search:{savedSearchId:0,popularSearchId:0,query:null,showFullAndOpenDataset:!1,fullAndOpenDataset:!1,showDate:!1,dateFrom:null,dateTo:null,datePeriod:null,showAoi:!1,aoiOption:null,aoiBoundingBox:null,aoiGeolocation:null,aoiW3W:null,aoiRelation:null,showClaudCoverage:!1,cloudCoverageFrom:0,cloudCoverageTo:0,defaultSearch:!1,folder:null,currMap:null,filterSet:null,filterParams:[],customFields:[]},Bookmark:{targetIds:"",name:null,drillDown:!1,currMap:null},BookmarkedResults:[],Settings:{settingsDhusUsername:null},Location:{longitude:15,latitude:30},searchCount:0,incSearchCount:function(){MyWorkspace.searchCount++},resetSearchCount:function(){MyWorkspace.searchCount=0},isRestoredSearch:function(){return MyWorkspace.searchCount<=1&&!MyWorkspace.Search.defaultSearch},isRestoredGranulaSearch:function(){return!(!MyWorkspace.isRestoredSearch()||!MyWorkspace.Search.folder)},isRestoredBookmark:function(){return!!(MyWorkspace.searchCount<=1&&MyWorkspace.Bookmark.targetIds)},isRestoredDrillDownBookmark:function(){return!(!MyWorkspace.isRestoredBookmark()||!MyWorkspace.Bookmark.drillDown)},queryBookmarkFeed:function(t){var e=SearchEngine.getBookmarkedFeedUrl(MyWorkspace.Bookmark.targetIds),a=$.get(e,function(e){resultSet=a,t(a,successResponse,failureResponse)})},mailTo:function(t){window.location="mailto:"+t+"@geosec.org"},isCustomFieldSelect:function(t){var e=MyWorkspace.Search.customFields[t];return"PREDEFINED_SELECT"==e.fieldType||"PREDEFINED_MULTISELECT"==e.fieldType},getCustomFieldParamName:function(t){return MyWorkspace.Search.customFields[t].paramName},getCustomFieldFieldName:function(t){return MyWorkspace.Search.customFields[t].fieldName},getCustomFieldValue:function(t){var e=MyWorkspace.Search.customFields[t];if("PREDEFINED_SELECT"==e.fieldType||"PREDEFINED_MULTISELECT"==e.fieldType){var a="";if($(".row-form-search ."+e.fieldName+" .active input").each(function(){a=a?a+","+$(this).attr("value"):$(this).attr("value")}),a!=e.fieldLabel)return a}return""},setCustomFieldValue:function(t){var e=MyWorkspace.Search.customFields[t];if(("PREDEFINED_SELECT"==e.fieldType||"PREDEFINED_MULTISELECT"==e.fieldType)&&e.paramValue){var a=e.paramValue.split(",");for(i=0;i<a.length;i++)$("."+e.fieldName+" input[value='"+a[i]+"']").parent("label").trigger("click")}}},SearchEngine={name:"",addConfig:function(t,e){this[t]=e},getConfig:function(t){return this[t]},getResourceUrl:function(t,e){var a=(GWP?"":Geoss.backendServer)+"/web/guest/geoss-resources?p_p_id=geossresources_WAR_geossportlet&p_p_lifecycle=2&p_p_state=normal&p_p_mode=view&p_p_cacheability=cacheLevelPage&controlPanelCategory=current_site.configuration"+"&p_p_resource_id="+t;return Object.keys(e).forEach(function(t,i){var r=encodeURIComponent(e[t]).replace(/'/g,"%27");a+="&_geossresources_WAR_geossportlet_"+t+"="+r}),a},getLayerKmlUrl:function(t){return this.getResourceUrl("LAYER_KML",{url:t})},getLayerKmzUrl:function(t){return this.getResourceUrl("LAYER_KMZ",{url:t})},getBookmarkedFeedUrl:function(t){return this.getResourceUrl("BOOKMARKED_FEED",{targetIds:t})},getLinkStatusUrl:function(t){return this.getResourceUrl("LINK_STATUS",{urlToCheck:t})},getCheckLayerFileUrl:function(t,e){return this.getResourceUrl("CHECK_LAYER_FILE",{url:t,type:e})},getCatalogsAndViewsUrl:function(t){return this.getResourceUrl("SEARCH_QUERY_PARAMS",{popularSearchId:t})},getDhusProxyUrl:function(t){return this.getResourceUrl("DHUS_PROXY",{url:t})},getGetRatingsUrl:function(t){return this.getResourceUrl("GET_RATINGS",{targetIds:t})},getUpdateRatingUrl:function(t,e,a,i){return this.getResourceUrl("UPDATE_RATING",{targetId:t,name:e,score:a,comment:i})},getGetCommentsUrl:function(t){return this.getResourceUrl("GET_COMMENTS",{targetId:t})},getDabBaseUrl:function(){if(GWP){var t=SearchEngine.getConfig("userDabBaseUrl");return t||SearchEngine.getConfig("dabBaseUrl")}return"http://preproduction.geodab.eu/gi-cat-StP/services"}},DAB=DAB||{};$.ajaxSetup({timeout:3e4}),DAB.Client={elasticsearch_response:void 0,temp_xhr:void 0,reqID:void 0,query_search_url:void 0,baseUrl:SearchEngine.getDabBaseUrl(),openSearchUrl:"/opensearch",openSearchEnhanced:"/opensearchsemanticenhanced",resultSet:"",lastRequest:"",getMetadata:function(t,e){var a=DAB.Client.baseUrl+"/cswisogeo?service=CSW&request=GetRecordById&id="+encodeURIComponent(t)+"&outputschema=http://www.isotc211.org/2005/gmi&elementSetName=full";xhr=$.get(a,function(a){e(xhr,t)}).fail(function(){e(xhr,t)})},callWs:function(t,e,a){e+=t.params(),DAB.Client.query_search_url=e,LogStore.ga_category="discovery",queryId=LogStore.logSearchResult(searchFormAttributes,"search_query");var i;lastRequest=t,i=$.get(e,function(t){resultSet=i,a(i,Geoss.successCallback,Geoss.failureCallback)}).fail(function(){Geoss.failureCallback("ajax"),DAB.View.searchInProgress=!1}),DAB.Client.temp_xhr=i},callOpenSearch:function(t,e){DAB.View.searchInProgress=!0,hoverInteractiveMode=!0,removeBboxLayers(Geoss.mainMap);DAB.Client.baseUrl,DAB.Client.openSearchUrl;DAB.Client.callWs(t,DAB.Client.baseUrl+DAB.Client.openSearchUrl,e)},Request:function(){var t={};this.params=function(){var e="?";for(var a in t)t.hasOwnProperty(a)&&(e=e.concat(a+"="+t[a]+"&"));return e},this.setParameter=function(e,a){return t[e]=a,this},this.getParameter=function(e){return t[e]},this.removeParameter=function(e){return delete t[e],this},this.setDefaults=function(){return t.searchFields="title,keywords",DAB.Client.reqID=Math.random().toString(36).substring(2),t.reqID=DAB.Client.reqID,t.si="1",t.ct="10",t.tf="keyword,format,protocol,providerID,organisationName",t.ts="",t.te="",this}},SimpleXmlRequest:function(t){var e=new DAB.Client.Request;e.setDefaults().setParameter("st",t),this.params=function(){return e.params()},this.setQuery=function(t){e.parameters.st=t},this.request=function(){return e},this.setFacetedCriteria=function(t,a){e.setFacetedCriteria(t,a)}},FacetedSimpleXmlRequest:function(t,e,a){var i=new DAB.Client.Request;i.setDefaults().setParameter("st",t),i.setFacetedCriteria(e,a),this.params=function(){return i.params()},this.setQuery=function(t){i.parameters.st=t}},SingleResultXmlRequest:function(t){var e=new DAB.Client.Request;e.setParameter("targetId",t),this.params=function(){return e.params()},this.request=function(){return e}},GranulaSimpleXmlRequest:function(t){var e=new DAB.Client.Request;e.setParameter("parents",t),this.params=function(){return e.params()}}};var Geoss={backendServer:"http://geoss.devel.esaportal.eu",searchContainer:"#portlet_geosssearch_WAR_geossportlet .portlet-body .wrap-box-search",popupsContainer:".popups-container",layersContainer:".box-layers-map",imagesLocation:"/geoss-theme/",mapUrl:"https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoicHphYm9yb3dza2kiLCJhIjoiY2lxamM0MjAzMDBkMGkwbWNjN2Y0NXl0dCJ9.yN5b5HdzNx5sgUUw4hTG3w",mainMap:null,showBoundingBoxes:!0,actionBeforeRequest:function(){},successCallback:null,failureCallback:null,metadataCallback:function(){},downloadBoxCallback:function(){},synchronizeLayerList:function(){},addLayerCallback:function(){},search:function(t,e,a){DAB.Client.callOpenSearch(DAB.Facade.control.prepareBaseQuery(t),DAB.Facade.view.presentMainResults,Geoss.successCallback,Geoss.failureCallback)}},granuleDateFrom="",granuleDateTo="",irisDateFrom="",irisDateTo="";$(document).ready(function(){$("#date-from, #date-to").keyup(function(t){-1!==$.inArray(t.keyCode,[46,8,9,27,13,110,190])||65===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||t.keyCode>=35&&t.keyCode<=40||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()})}),$("html").on("change",".row-form-search .box-size.radio input",function(){$(".row-search .search-button-1 span").addClass("radioChecked"),chooseFilteringIcon();var t=new Date;if($("#last-week").prop("checked")){t.setDate(t.getDate()-7);var e=GeossUtil.formatDate(t);$(".row-form-search .date #date-from").val(e)}else if($("#last-month").prop("checked")){t.setMonth(t.getMonth()-1);var a=GeossUtil.formatDate(t);$(".row-form-search .date #date-from").val(a)}else if($("#last-year").prop("checked")){t.setFullYear(t.getFullYear()-1);var i=GeossUtil.formatDate(t);$(".row-form-search .date #date-from").val(i)}}),$("html").on("click",".row-form-search .checkbox-decoration",function(){$(".row-form-search .checkbox-decoration input").prop("checked")?$(".row-search .search-button-1 span").addClass("checkboxChecked"):$(".row-search .search-button-1 span").removeClass("checkboxChecked"),chooseFilteringIcon()}),$("html").on("click",".row-search .search-button-2 span",function(t){GWP&&(GeossUtil.reserSearchBoxDimensions(),GeossUtil.queryStopped=!1,$(".box-layers-map").slideUp(10));var e=$("#query_search").val().replace(/\s+/g," ").trim();if($("#query_search").val(e),GeossUtil.isAnyFilterSelected()){var a=$(".row-form-search .date #date-from").val(),i=$(".row-form-search .date #date-to").val();if(a&&i&&a>i)GeossUtil.showMessage("INVALID SEARCH CRITERIA","To date cannot be less than from date.");else{var r=$("#query_search").val(),o=r.indexOf(" in ");if(o>0&&r.length>o+" in ".length){var s=r.slice(0,o),l=r.slice(o+" in ".length);s=s.trim(),l=l.trim();var n=!1;if(2==(r.match(/"/g)||[]).length){for(var c=[],d=0;d<r.length;d++)'"'===r[d]&&c.push(d);o>c[0]&&o<c[1]&&(n=!0)}else 0!=(r.match(/"/g)||[]).length&&(n=!0);GWP&&s&&l&&!n?placeQuerySearch(s,l):GeossUtil.standardSearchProcess()}else GWP&&r?placeQuerySearch("",r):GeossUtil.standardSearchProcess();removeBboxLayers(Geoss.mainMap)}}else GeossUtil.showMessage("EMPTY SEARCH CRITERIA","Please specify your search criteria.")}),$("html").on("keydown",".row-search .search-input input#query_search",function(t){13==t.keyCode&&(t.stopPropagation(),t.preventDefault(),"readonly"!=$(".row-search .search-input input").attr("readonly")&&($(".row-search .search-button-2 span").trigger("click"),$("#query-auto-list-control").removeClass("open"),isEnterQuerySuggest=!0)),chooseFilteringIcon()}),$("html").on("click",".row-result-form .show-result button.btn-form-results",function(t){if(0!=$(".result-wrap").height()){$(this).toggleClass("rotating");var e=".row-result-form .filters";DAB.View.granulaFiltersEnabled?e=".row-result-form .granula-filters":DAB.View.isIrisSearch()&&(e=".row-result-form .iris-filters"),$(".row-form-search>form").is(":visible")&&!$(".row-result-form .filters").is(":visible")&&$(".row-search .search-button-1 span").trigger("click"),$(e).slideToggle("slow",function(){$(".wrap-result-list").addClass("showed");var t=0;0==$(".result-wrap").height()&&(t=100),$(".box-search").css({minHeight:parseInt(GeossUtil.calcSearchBoxMinHeight())+t+"px"})})}}),$("html").on("input","#FirstLongiutde, #FirstLatitude, #SecondLongiutde, #SecondLatitude",function(){$(".ol-buttons.draw-btn button").hasClass("checked-button")&&$("#type").trigger("click"),$("#FirstLongiutde").val()>180?$("#FirstLongiutde").val("180.0"):$("#FirstLongiutde").val()<-180&&$("#FirstLongiutde").val("-180.0"),$("#FirstLatitude").val()>90?$("#FirstLatitude").val("90.0"):$("#FirstLatitude").val()<-90&&$("#FirstLatitude").val("-90.0"),$("#SecondLongiutde").val()>180?$("#SecondLongiutde").val("180.0"):$("#SecondLongiutde").val()<-180&&$("#SecondLongiutde").val("-180.0"),$("#SecondLatitude").val()>90?$("#SecondLatitude").val("90.0"):$("#SecondLatitude").val()<-90&&$("#SecondLatitude").val("-90.0");var t=$("#FirstLongiutde").val(),e=$("#FirstLatitude").val(),a=$("#SecondLongiutde").val(),i=$("#SecondLatitude").val();t&&e&&a&&i?drawLayerAoi(t=parseFloat(t),e=parseFloat(e),a=parseFloat(a),i=parseFloat(i)):clearAoi()}),$("html").on("click",".row-search .search-button-1 span",function(){if(!$(".row-form-search>form").is(":visible")&&$(".row-result-form .filters").is(":visible")&&$(".row-result-form .show-result button.btn-form-results").trigger("click"),GWP){var t=$(".box-search").css("height")||$(".box-search").height();$(".box-search").hasClass("collapsed")?($(".box-search").css({minHeight:"",height:""}),t=$(".row-search").height()+"px"):null!=GeossUtil.searchBoxDimensions.height&&(t=GeossUtil.searchBoxDimensions.height)}$(".row-form-search>form").slideToggle("slow",function(){GWP&&($(window).width()<1400&&($(".row-form-search>form").is(":visible")?$(".box-search").addClass("ultrabook"):$(".box-search").removeClass("ultrabook")),$(".box-search").hasClass("collapsed")||($(".row-form-search>form").is(":visible")&&$(".box-search").css({minHeight:parseInt(GeossUtil.calcSearchBoxMinHeight().replace("px",""))-100}),$(".box-search").animate({minHeight:GeossUtil.calcSearchBoxMinHeight(),height:t}))),$(".box-search").offset().top>$(window).height()-$(".box-search").height()&&$(".row-form-search>form").is(":visible")&&($(".box-search").css("top",$(window).height()-$(".box-search").height()+"px"),GeossUtil.searchBoxDimensions.top=$(window).height()-$(".box-search").height()),$(".row-form-search>form").is(":visible")&&0!=$(".row-result-form .show-result").height()?$(".row-form-search>form").addClass("bordering"):$(".row-form-search>form").removeClass("bordering")})}),$("html").on("click",".row-search.box-size button.close",function(t){$("option",$(".row-form-search select")).each(function(t){$(this).removeAttr("selected").prop("selected",!1)}),$(".row-form-search select, .row-result-form .filters select").not(".w3w").multiselect("refresh"),$(".row-form-search .type-select").removeClass("selected"),$(".row-form-search .checkbox-decoration input").removeAttr("checked").prop("checked",!1),$(".row-form-search .date input#date-from").val(""),$(".row-form-search .date input#date-to").val(""),$(".btn.btn-default.multiselect-clear-filter").click(),$(".row-form-search .radio input").removeAttr("checked").prop("checked",!1),$(".row-form-search .radio_w3w input").removeAttr("checked").prop("checked",!1),$("#bbox_contains").prop("checked",!0),removeBboxLayers(Geoss.mainMap),$(".row-search .search-input input").val(""),$(".row-result-form .number-result .number-results").text("0"),$(".wrap-result-list").hide(),$(".row-result-form .filters .btn-group ul.multiselect-container li").removeClass(".active"),$(".row-result-form .filters .btn-group ul.multiselect-container li:first-child").addClass("active"),$(".row-result-form .filters .btn-group ul.multiselect-container li").not(".active").remove(),$(".row-result-form .filters").removeClass("notEmpty").hide(),DAB.View.hideIrisFilters(),$(".row-result-form").hide(),$(".floating-blue").removeClass("active_search"),$("#saved_filters_button").attr("disabled","disabled"),$("#share_button").attr("disabled","disabled"),$(".box-layers-map").slideUp(10),$(this).attr("disabled","disabled"),DAB.View.switchToMainResultsView(),DAB.View.closeAndClearGranulaFilters(),$(".ol-buttons.draw-btn button").hasClass("checked-button")&&$("#type").trigger("click"),switchAoi("Geolocation"),clearFilteringIcon(),GWP&&outPan(map_default),AOIAction=void 0,DAB.View.searchFormAttributes={},GWP&&($(".row-form-search>form").hide(),$(".box-search").hasClass("ui-resizable")&&$(".box-search").resizable("destroy"),$(".box-search").css({height:$(".row-search").height()+"px",minHeight:$(".row-search").height()+"px",maxWidth:""}),$(".box-search").addClass("collapsed")),$(Geoss.popupsContainer).find(".black").remove()}),$("html").on("click change keyup",".box-search *",checkFormButtons),$(document).ready(function(){DAB.View.loadCatalogsAndViews(0,function(){initGoogleGeolocation(),init_slider(),init_selects(),init_date_inputs(),GWP&&init_map(),MyWorkspace.restoreMainSearch(),MyWorkspace.restoreBookmarkedResult()})});var hoverInteractiveMode=!0,selectedItem=null,cursorHoverStyle="pointer",target,jTarget,allLayers,currentCoordinates=null,AOIAction=void 0,source=new ol.source.Vector({wrapX:!1}),vector=new ol.layer.Vector({source:source,style:new ol.style.Style({zIndex:20,fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"red",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})})});vector.layerAOI=!0,function(t,e){"use strict";var a="model",i="name",r="type",o="vendor",s="version",l="mobile",n="tablet",c={extend:function(t,e){var a={};for(var i in t)e[i]&&e[i].length%2==0?a[i]=e[i].concat(t[i]):a[i]=t[i];return a},has:function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()},major:function(t){return"string"==typeof t?t.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d={rgx:function(t,e){for(var a,i,r,o,s,l,n=0;n<e.length&&!s;){var c=e[n],d=e[n+1];for(a=i=0;a<c.length&&!s;)if(s=c[a++].exec(t))for(r=0;r<d.length;r++)l=s[++i],"object"==typeof(o=d[r])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,l):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=l?l.replace(o[1],o[2]):void 0:this[o[0]]=l?o[1].call(this,l,o[2]):void 0:4==o.length&&(this[o[0]]=l?o[3].call(this,l.replace(o[1],o[2])):void 0):this[o]=l||void 0;n+=2}},str:function(t,e){for(var a in e)if("object"==typeof e[a]&&e[a].length>0){for(var i=0;i<e[a].length;i++)if(c.has(e[a][i],t))return"?"===a?void 0:a}else if(c.has(e[a],t))return"?"===a?void 0:a;return t}},u={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},p={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[i,s],[/(opios)[\/\s]+([\w\.]+)/i],[[i,"Opera Mini"],s],[/\s(opr)\/([\w\.]+)/i],[[i,"Opera"],s],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[i,s],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[i,"IE"],s],[/(edge)\/((\d+)?[\w\.]+)/i],[i,s],[/(yabrowser)\/([\w\.]+)/i],[[i,"Yandex"],s],[/(puffin)\/([\w\.]+)/i],[[i,"Puffin"],s],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i,/(ucbrowser)\/([\w\.]+)/i],[[i,"UCBrowser"],s],[/(comodo_dragon)\/([\w\.]+)/i],[[i,/_/g," "],s],[/(micromessenger)\/([\w\.]+)/i],[[i,"WeChat"],s],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[i,s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[s,[i,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[s,[i,"Facebook"]],[/(headlesschrome) ([\w\.]+)/i],[s,[i,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[i,/(.+)/,"$1 WebView"],s],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[s,[i,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[i,s],[/(dolfin)\/([\w\.]+)/i],[[i,"Dolphin"],s],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[i,"Chrome"],s],[/(coast)\/([\w\.]+)/i],[[i,"Opera Coast"],s],[/fxios\/([\w\.-]+)/i],[s,[i,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[s,[i,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[s,i],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[i,[s,d.str,u.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[i,s],[/(navigator|netscape)\/([\w\.-]+)/i],[[i,"Netscape"],s],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[i,s]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",c.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",c.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",c.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[a,o,[r,n]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[o,"Apple"],[r,n]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[o,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[o,a,[r,n]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[a,[o,"Amazon"],[r,n]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[a,d.str,u.device.amazon.model],[o,"Amazon"],[r,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,o,[r,l]],[/\((ip[honed|\s\w*]+);/i],[a,[o,"Apple"],[r,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[o,a,[r,l]],[/\(bb10;\s(\w+)/i],[a,[o,"BlackBerry"],[r,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[a,[o,"Asus"],[r,n]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[o,"Sony"],[a,"Xperia Tablet"],[r,n]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[o,"Sony"],[a,"Xperia Phone"],[r,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[o,a,[r,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[o,"Nvidia"],[r,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[o,"Sony"],[r,"console"]],[/(sprint\s(\w+))/i],[[o,d.str,u.device.sprint.vendor],[a,d.str,u.device.sprint.model],[r,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[o,a,[r,n]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[o,[a,/_/g," "],[r,l]],[/(nexus\s9)/i],[a,[o,"HTC"],[r,n]],[/(nexus\s6p)/i],[a,[o,"Huawei"],[r,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[o,a,[r,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[o,"Microsoft"],[r,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[o,"Microsoft"],[r,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[o,"Motorola"],[r,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[o,"Motorola"],[r,n]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[o,c.trim],[a,c.trim],[r,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[o,"Samsung"],[r,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[a,[o,"Sharp"],[r,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[o,"Samsung"],a,[r,n]],[/smart-tv.+(samsung)/i],[o,[r,"smarttv"],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[o,"Samsung"],a,[r,l]],[/sie-(\w+)*/i],[a,[o,"Siemens"],[r,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[o,"Nokia"],a,[r,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[a,[o,"Acer"],[r,n]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[o,"LG"],a,[r,n]],[/(lg) netcast\.tv/i],[o,a,[r,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[a,[o,"LG"],[r,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[o,"Lenovo"],[r,n]],[/linux;.+((jolla));/i],[o,a,[r,l]],[/((pebble))app\/[\d\.]+\s/i],[o,a,[r,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[o,a,[r,l]],[/crkey/i],[[a,"Chromecast"],[o,"Google"]],[/android.+;\s(glass)\s\d/i],[a,[o,"Google"],[r,"wearable"]],[/android.+;\s(pixel c)\s/i],[a,[o,"Google"],[r,n]],[/android.+;\s(pixel xl|pixel)\s/i],[a,[o,"Google"],[r,l]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[a,/_/g," "],[o,"Xiaomi"],[r,l]],[/android.+a000(1)\s+build/i],[a,[o,"OnePlus"],[r,l]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[r,c.lowerize],o,a]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[s,[i,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[i,s],[/rv\:([\w\.]+).*(gecko)/i],[s,i]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[i,s],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[i,[s,d.str,u.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[i,"Windows"],[s,d.str,u.os.windows.version]],[/\((bb)(10);/i],[[i,"BlackBerry"],s],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[i,s],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[i,"Symbian"],s],[/\((series40);/i],[i],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[i,"Firefox OS"],s],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[i,s],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[i,"Chromium OS"],s],[/(sunos)\s?([\w\.]+\d)*/i],[[i,"Solaris"],s],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[i,s],[/(haiku)\s(\w+)/i],[i,s],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[i,"iOS"],[s,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[i,"Mac OS"],[s,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[i,s]]},m=function(t,e){this[i]=t,this[s]=e},h=function(t){this.architecture=t},g=function(t,e,i){this[o]=t,this[a]=e,this[r]=i},v=m,f=m,w=function(e,a){if(!(this instanceof w))return new w(e,a).getResult();var i=e||(t&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:""),r=a?c.extend(p,a):p,o=new m,s=new h,l=new g,n=new v,u=new f;return this.getBrowser=function(){return d.rgx.call(o,i,r.browser),o.major=c.major(o.version),o},this.getCPU=function(){return d.rgx.call(s,i,r.cpu),s},this.getDevice=function(){return d.rgx.call(l,i,r.device),l},this.getEngine=function(){return d.rgx.call(n,i,r.engine),n},this.getOS=function(){return d.rgx.call(u,i,r.os),u},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(t){return i=t,o=new m,s=new h,l=new g,n=new v,u=new f,this},this};w.VERSION="0.7.13",w.BROWSER={NAME:i,MAJOR:"major",VERSION:s},w.CPU={ARCHITECTURE:"architecture"},w.DEVICE={MODEL:a,VENDOR:o,TYPE:r,CONSOLE:"console",MOBILE:l,SMARTTV:"smarttv",TABLET:n,WEARABLE:"wearable",EMBEDDED:"embedded"},w.ENGINE={NAME:i,VERSION:s},w.OS={NAME:i,VERSION:s},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports.UAParser=w):"function"==typeof define&&define.amd?define(function(){return w}):t.UAParser=w;var b=t.jQuery||t.Zepto;if(void 0!==b){var x=new w;b.ua=x.getResult(),b.ua.get=function(){return x.getUA()},b.ua.set=function(t){x.setUA(t);var e=x.getResult();for(var a in e)b.ua[a]=e[a]}}}("object"==typeof window?window:this);var LogStore=LogStore||{};(LogStore={portalLogIndice:"geoss_index",portalLogType:"geoss_data",client:void 0,elasticsearch_live:!1,ga_category:void 0,userAgent:(new UAParser).getResult(),logSearchResult:function(t,e,a,i,r,o,s){try{var l;if(LogStore.client||(LogStore.elasticsearch_live=LogStore.createElastiSearchClient()),LogStore.elasticsearch_live){var n=null,c=null,d=null,u=null,p=null,m=null,h=null,g=null,v=null,f=null,w=null,b=null,x=null,y=null,$=null,k=null,S=null,C=null,A=null,D=null;"search_query"==e&&(DAB.Client.query_search_url||(DAB.Client.query_search_url=" "),DAB.Client.query_search_url.split("&reqID=").length>1&&(n=DAB.Client.query_search_url.split("&reqID=")[1].split("&")[0],o&&(o="dab")),DAB.Client.query_search_url.split("&si=").length>1&&(c=DAB.Client.query_search_url.split("&si=")[1].split("&")[0]),DAB.Client.query_search_url.split("&ct=").length>1&&(d=DAB.Client.query_search_url.split("&ct=")[1].split("&")[0]),DAB.Client.query_search_url.split("&kwd=").length>1&&(g=DAB.Client.query_search_url.split("&kwd=")[1].split("&")[0]),DAB.Client.query_search_url.split("&sba=").length>1&&(w=DAB.Client.query_search_url.split("&sba=")[1].split("&")[0]),DAB.Client.query_search_url.split("&frmt=").length>1&&(C=DAB.Client.query_search_url.split("&frmt=")[1].split("&")[0]),DAB.Client.query_search_url.split("&prot=").length>1&&(A=DAB.Client.query_search_url.split("&prot=")[1].split("&")[0]),D=DAB.Client.query_search_url);var B=t.aoiGeolocation||t.aoiContinentAndCountry||t.aoiBoundingBox;t.dateFrom&&(u=t.dateFrom+"T00:00:00Z"),t.dateTo&&(p=t.dateTo+"T00:00:00Z"),t.query&&(m=t.query),t.aoiRelation&&(h=t.aoiRelation.label.toUpperCase()),t.folder&&(v=t.folder.value,f=t.folder.label),t.queryParams&&(b=t.queryParams.value.sources,y=t.queryParams.label.sources,x=t.queryParams.value.viewid,$=t.queryParams.label.viewid),t.fullAndOpenDataset&&(k=t.fullAndOpenDataset.value),t.aoiW3W&&(S=t.aoiW3W),logResult=LogStore.client.bulk({body:[{index:{_index:LogStore.portalLogIndice,_type:LogStore.portalLogType}},LogStore.addCommonProperties({ui_object_id:a,ui_object_class:i,ui_source:o,ui_entry_id:r,ui_action:s,ds_query_url:D,ds_reqID:n,ds_si:c,ds_ct:d,ds_ts:u,ds_te:p,ds_st:m,ds_rel:h,ds_kwd:g,ds_parents_group:{key:v,value:f},ds_sba:w,ds_sources_group:{key:b,value:y},ds_views_group:{key:x,value:$},ds_bbox:B,ds_gdc:k,ds_w3w:S,ds_frmt:C,ds_prot:A,operation:e})]},function(t,e){201==e.items[0].create.status?l=e.items[0].create._id:console.log("LogSearch Resp status: "+e.items[0].create.status)})}LogStore.ga_category||(LogStore.ga_category="navigation"),GWP&&ga("send","event",{eventCategory:LogStore.ga_category,eventAction:s,eventLabel:a}),LogStore.ga_category=""}catch(t){console.error(t.message)}return l},logResourceError:function(t,e,a,i,r,o){console.error(a+":"+t+":"+e+":"+i);var s="",l=$("div").find("[data-target-id='"+DAB.View.encodeHtmlFromXml(e)+"']");if(l){var n=l.children();s=$(n[1]).find(".result-title").html().replace(/\s+/g," ")}else s="Restored search";var c,d=DAB.View.generateCurrentMapName(),u=SearchEngine.getConfig("baseUrlForSharing")+"&_geosssearch_WAR_geossportlet_targetId="+encodeURIComponent(e)+"&_geosssearch_WAR_geossportlet_title="+encodeURIComponent(s)+"&_geosssearch_WAR_geossportlet_currMap="+encodeURIComponent(d);bulkObject={body:[{index:{_index:LogStore.portalLogIndice,_type:LogStore.portalLogType}},LogStore.addCommonProperties({ui_entry_id:e,result:r,operation:i,message:a,result_details:o,short_url:null})]},$.ajax({method:"POST",url:"https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyCE1RBCdYcJrNc6tkrLVFJzEEURU0nr_2s",contentType:"application/json",data:'{longUrl: "'+u+'"}',success:function(t){try{bulkObject.body[1].short_url=t.id,LogStore.client.bulk(bulkObject,function(t,e){201==e.items[0].create.status?c=e.items[0].create._id:console.log("LogSearch Resp status: "+e.items[0].create.status)})}catch(t){console.error(t.message)}},error:function(){console.warn("Cannot shorten URL.");try{LogStore.client.bulk(bulkObject,function(t,e){201==e.items[0].create.status?c=e.items[0].create._id:console.log("LogSearch Resp status: "+e.items[0].create.status)})}catch(t){console.error(t.message)}}})},logElementClick:function(t,e,a,i,r,o,s,l,n){try{var c;LogStore.client||(LogStore.elasticsearch_live=LogStore.createElastiSearchClient()),LogStore.elasticsearch_live&&(s&&(s=s.replace(/\s\s+/g,"")),l&&(l=l.replace(/\s\s+/g,"")),LogStore.client.bulk({body:[{index:{_index:LogStore.portalLogIndice,_type:LogStore.portalLogType}},LogStore.addCommonProperties({ui_object_id:t,ui_object_class:e,ui_source:i,ui_entry_id:a,ui_action:r,ui_label:o,ui_organisation:s,ui_resource_name:l,operation:n})]},function(t,e){201==e.items[0].create.status?c=e.items[0].create._id:console.log("LogSearch Resp status: "+e.items[0].create.status)})),LogStore.ga_category||(LogStore.ga_category="navigation"),GWP&&ga("send","event",{eventCategory:LogStore.ga_category,eventAction:r,eventLabel:t}),LogStore.ga_category=""}catch(t){console.error(t.message)}return c},logSignIn:function(){if(Cookies.get("geoss_justSignedIn")){try{var t;LogStore.client.bulk({body:[{index:{_index:LogStore.portalLogIndice,_type:LogStore.portalLogType}},LogStore.addCommonProperties({result:"Successfully logged in",operation:"Login attempt"})]},function(e,a){201==a.items[0].create.status?t=a.items[0].create._id:console.log("LogSearch Resp status: "+a.items[0].create.status)})}catch(t){console.error(t.message)}return Cookies.remove("geoss_justSignedIn"),t}},getRecentActionsLog:function(t){try{if(LogStore.elasticsearch_live){var e='{"query": {"bool": {"must": {"exists": {"field": "ui_action"}}, "must_not": {"exists": {"field": "ds_reqID"}}, "should": [',a="";for(i=0;i<t.find("id").size();i++)match_str='{"term": {"ui_entry_id": "'+$(t.find("id")[i]).text()+'"}},',a+=match_str;e=(e+=a).replace(/,\s*$/,""),e+='],"minimum_should_match" : 1}}}',LogStore.client.search({size:1e4,index:"geoss_index",body:e},function(t,e){DAB.Client.elasticsearch_response=e,LogStore.updateRecentViews(e)})}}catch(t){console.error(t.message)}},updateRecentViews:function(t){var e,a={};for(i=0;i<DAB.Client.elasticsearch_response.hits.total;i++)a[e=DAB.Client.elasticsearch_response.hits.hits[i]._source.ui_entry_id]?a[e]++:a[e]=1;$.each(a,function(t,e){$(DAB.View.resultsContainer+' .result-text .results-icons button.info[value="'+t+'"]').closest(".list-result").find(".nr-views").text(e+" recent views")})},getSuggestWords:function(t,e){try{if(LogStore.elasticsearch_live){var a={query:{match_phrase_prefix:{ds_st:{query:t}}},size:0,aggs:{group_by_ds_st:{terms:{field:"ds_st",size:e}}}},i=JSON.stringify(a);LogStore.client.search({size:1e4,index:"geoss_index",body:i},function(e,a){LogStore.addNewList($("#query-auto-list-search"),a,t)})}}catch(t){console.error(t.message)}},addNewList:function(t,e,a){var i=e.aggregations.group_by_ds_st.buckets;if(i.length>0){var r=$("#query_search").val();r&&!isEnterQuerySuggest&&0==r.localeCompare(a)?(t.empty(),$.each(i,function(e,a){var i=document.createElement("li"),r=document.createElement("a"),o=document.createTextNode(a.key);r.setAttribute("href","#"),r.appendChild(o),i.appendChild(r),i.setAttribute("title",a.key),t.append(i)}),$("#query-auto-list-control").addClass("open")):r&&!isEnterQuerySuggest||(t.empty(),$("#query-auto-list-control").removeClass("open"))}else $("#query-auto-list-control").removeClass("open")},createElasticSearchClient:function(){try{var t,e=window.navigator.userAgent,a=e.indexOf("MSIE "),i=e.indexOf("Trident/");if(a>-1||i>-1){var r=window.location.protocol+"//"+window.location.hostname;window.location.port&&(r=r+":"+window.location.port),t=r+"/logsearch"}else{var o=new URL(window.location.href);t=o.origin+"/logsearch",o.origin.indexOf("localhost")>=0&&(t="http://geoss.devel.esaportal.eu/logsearch"),GWP||(t="http://geossdevel.ospartner.pl/logsearch")}LogStore.client=new $.es.Client({hosts:t}),LogStore.client.ping({requestTimeout:1e4,hello:"elasticsearch"},function(t){t?console.error("LogSearch Cluster is down!"):LogStore.elasticsearch_live=!0})}catch(t){console.error(t.message)}return LogStore.elasticsearch_live},dateInUTCFullYear:function(){var t=new Date,e=t.getUTCMonth()+1,a=t.getUTCDate(),i=t.getUTCHours(),r=t.getUTCMinutes(),o=t.getUTCSeconds(),s=t.getUTCMilliseconds();return t.getUTCFullYear()+"-"+((""+e).length<2?"0":"")+e+"-"+((""+a).length<2?"0":"")+a+" "+((""+i).length<2?"0":"")+i+":"+((""+r).length<2?"0":"")+r+":"+((""+o).length<2?"0":"")+o+"."+((""+s).length>2?"":(""+s).length<1?"0":"00")+s},addCommonProperties:function(t){return t.session_login=GWP?Liferay.ThemeDisplay.getUserId():null,t.session_user_email=GWP&&Liferay.ThemeDisplay.isSignedIn()?Cookies.get("geoss_email"):null,t.session_id=GWP?Cookies.get("LFR_SESSION_STATE_"+Liferay.ThemeDisplay.getUserId()):null,t.session_timestamp=Date.now(),t.session_date=LogStore.dateInUTCFullYear(),t.ua=LogStore.userAgent.ua,t.ua_browser_name=LogStore.userAgent.browser.name,t.ua_browser_version=LogStore.userAgent.browser.version,t.ua_engine_name=LogStore.userAgent.engine.name,t.ua_engine_version=LogStore.userAgent.engine.version,t.ua_os_name=LogStore.userAgent.os.name,t.ua_os_version=LogStore.userAgent.os.version,t.ua_device_model=LogStore.userAgent.device.model,t.ua_device_vendor=LogStore.userAgent.device.vendor,t.ua_device_type=LogStore.userAgent.device.type,t.ua_cpu_architecture=LogStore.userAgent.cpu.architecture,t.win_width=$(window).width(),t.win_height=$(window).height(),t}}).elasticsearch_live=LogStore.createElasticSearchClient();var satelliteParamsForRBox,searchFormAttributes={},SATELITE_SEARCH_EMPTY_MSG="Error executing query: No scene DB found for",TITLE_BACKEND_ERROR="BACK END ERROR",MSG_BACKEND_ERROR="A problem occurred when querying the resource provider.<br/>The System Operator has been informed; please try again later on.",TITLE_W3W_ERROR="WRONG W3W FORMAT",MSG_W3W_ERROR="Required format for W3W is word1.word2.word3";DAB.View={gdata:"",scroll_metadate:!1,numberOfOptions:0,drillDownSearch:!1,granulaFiltersEnabled:!1,enumGranulaFilters:["prodType","sensorOpMode","sensorSwath","sarPolCh"],enumGranulaFilterLabels:{prodType:"Product type",sensorOpMode:"Sensor Mode",sensorSwath:"Sensor swath",sarPolCh:"Sensor polarisation"},continuousGranulaFilters:["cloudcp"],integerGranulaFilters:["relOrbit","path","row"],integerGranulaFilterLabels:{relOrbit:"Relative orbit",path:"Path",row:"Row"},reloadGranulaTimer:null,resultSet:"",gResultSet:"",queryablesForEntries:{},entries:{},drilledDownEntry:void 0,drilledDownItem:void 0,mainResults:{entries:[]},drillDownResults:{entries:[]},currentResults:void 0,resultsContainer:".wrap-result-list .result-rows",popupsContainer:".popups-container",paginationContainer:".pagination-container",searchInProgress:!1,generateCurrentMapName:function(){var t="";return $(".dark_nolabels img").hasClass("active")&&(t="dark_nolabels"),$(".light_all img").hasClass("active")&&(t="light_all"),$(".light_nolabels img").hasClass("active")&&(t="light_nolabels"),$(".addsat img").hasClass("active")&&(t="addsat"),$(".addhyb img").hasClass("active")&&(t="addhyb"),$(".removesat img").hasClass("active")&&(t="removesat"),$(".oceanBasemap img").hasClass("active")&&(t="oceanBasemap"),$(".topographicBasemap img").hasClass("active")&&(t="topographicBasemap"),$(".dark_all img").hasClass("active")&&(t="dark_all"),$(".WorldStreetBasemap img").hasClass("active")&&(t="WorldStreetBasemap"),t},generateSearchFormAttributes:function(){var t=$(".search-input #searchForm input").val(),e=!1;$(".row-form-search .checkbox-decoration input").prop("checked")&&(e=!0);for(var a={},i={},r=0;r<MyWorkspace.Search.customFields.length;r++)if(MyWorkspace.isCustomFieldSelect(r)&&MyWorkspace.getCustomFieldValue(r)){a[MyWorkspace.getCustomFieldParamName(r)]=MyWorkspace.getCustomFieldValue(r);var o=$(".row-form-search ."+MyWorkspace.getCustomFieldFieldName(r)+" .multiselect-container li.active label");i[MyWorkspace.getCustomFieldParamName(r)]="",o.each(function(t,e){i[MyWorkspace.getCustomFieldParamName(r)]+=$(e).attr("title"),t<o.length-1&&(i[MyWorkspace.getCustomFieldParamName(r)]+=", ")})}var s=$(".row-form-search .search-option-select .active input").attr("value"),l="",n="",c="",d="",u="";"ChooseSelectorOptions"!=s&&currentCoordinates?(l=$(".row-form-search .search-option-select .active label").attr("title"),"Coordinates"==s?n=coordinatesForSearch(currentCoordinates):"Geolocation"==s?(c=$(".row-form-search #geolocation_search").val(),n=coordinatesForSearch(currentCoordinates)):"ContinentAndCountry"==s?(d=$(".row-form-search .country-select .active label").attr("title"),n=coordinatesForSearch(currentCoordinates)):"What3Words"==s&&(u=$(".row-form-search #w3w_search").val())):s="";var p=$("input[name='bbox_rel']:checked").attr("id"),m=$("input[name='bbox_rel']:checked").next("label").html(),h="",g="",v="",f=$("input[name='date']:checked").attr("id");f?v=$("input[name='date']:checked").next("label").html():(f="",h=$(".row-form-search .date #date-from").val(),g=$(".row-form-search .date #date-to").val());var w=0,b=0;"block"==$(".box_cloudcp").css("display")&&(w=$("#cloudcp-slider-range").slider("values",0),b=$("#cloudcp-slider-range").slider("values",1));var x="",y="";$(".results-icons:visible button.drill-up:visible").length&&(x=$(".results-icons:visible button.drill-up:visible").siblings("button.info").val(),y=$(".results-icons:visible button.drill-up:visible").closest(".result-text").find(".result-title").html());var k=t;k||(k="empty search words");var S={},C={},A="";if($(".filters").hasClass("active")){A="faceted-filters";var D="";D=$(".filters .tags-select .multiselect-container .active input").val();var B="";B=$(".filters .tags-select .multiselect-container .active label").attr("title");var M="";M=$(".filters .format-select .multiselect-container .active input").val();var R="";R=$(".filters .format-select .multiselect-container .active label").attr("title");var _="";_=$(".filters .source-select .multiselect-container .active input").val();var F="";F=$(".filters .source-select .multiselect-container .active label").attr("title");var T="";T=$(".filters .protocol-select .multiselect-container .active input").val();var O="";O=$(".filters .protocol-select .multiselect-container .active label").attr("title");var G="";G=$(".filters .organisation-select .multiselect-container .active input").val();var P="";P=$(".filters .organisation-select .multiselect-container .active label").attr("title"),D&&(S.keyword=D),B&&(C.keyword=B),M&&(S.format=M),R&&(C.format=R),_&&(S.source=_),F&&(C.source=F),T&&(S.protocol=T),O&&(C.protocol=O),G&&(S.organisation=G),P&&(C.organisation=P)}else if($(".granula-filters").hasClass("active")){A="granula-filters";var E="";E=$(".granula-filters .prodType-select .multiselect-container .active input").val();var L="";L=$(".granula-filters .prodType-select .multiselect-container .active label").attr("title");var I="";I=$(".granula-filters .sarPolCh-select .multiselect-container .active input").val();var V="";V=$(".granula-filters .sarPolCh-select .multiselect-container .active label").attr("title");var W="";W=$(".granula-filters .sensorOpMode-select .multiselect-container .active input").val();var N="";N=$(".granula-filters .sensorOpMode-select .multiselect-container .active label").attr("title");var q="";q=$(".granula-filters .sensorSwath-select .multiselect-container .active input").val();var U="";U=$(".granula-filters .sensorSwath-select .multiselect-container .active label").attr("title");var z="";z=$(".granula-filters .relOrbit-select input").val();var j="";j=$(".granula-filters .relOrbit-select input").val();var H="";H=$(".granula-filters .row-select input").val();var K="";K=$(".granula-filters .row-select input").val();var Y="";Y=$(".granula-filters .path-select input").val();var X="";X=$(".granula-filters .path-select input").val();var Q="",Z="";$(".granula-filters .box_cloudcp").is(":hidden")?Q="":(Q="["+w+","+b+"]",Z="Cloud coverage: "+w+"-"+b+"%");var J="";J=$(".granula-filters .box-size.date input#date-from-granula").val();var tt="";tt=$(".granula-filters .box-size.date input#date-from-granula").val();var et="";et=$(".granula-filters .box-size.date input#date-to-granula").val();var at="";at=$(".granula-filters .box-size.date input#date-to-granula").val(),E&&(S.prodType=E),L&&(C.prodType=L),I&&(S.sarPolCh=I),V&&(C.sarPolCh=V),W&&(S.sensorOpMode=W),N&&(C.sensorOpMode=N),q&&(S.sensorSwath=q),U&&(C.sensorSwath=U),z&&(S.relOrbit=z),j&&(C.relOrbit=j),H&&(S.row=H),K&&(C.row=K),Y&&(S.path=Y),X&&(C.path=X),Q&&(S.cloudcp=Q),Z&&(C.cloudcp=Z),J&&(S.dateFromGranula=J),tt&&(C.dateFromGranula=tt),et&&(S.dateToGranula=et),at&&(C.dateToGranula=at)}else if($(".iris-filters").hasClass("active")){A="iris-filters";var it="";it=$(".iris-filters .magt-select .multiselect-container .active input").val();var rt="";rt=$(".iris-filters .magt-select .multiselect-container .active label").text().trim();var ot="";ot=$(".iris-filters .evtord-select .multiselect-container .active input").val();var st="";st=$(".iris-filters .evtord-select .multiselect-container .active label").text().trim();var lt="",nt="",ct="",dt="",ut="",pt="",mt="",ht="",gt="";gt=$(".iris-filters .box-size.date input#date-from-iris").val();var vt="";vt=$(".iris-filters .box-size.date input#date-from-iris").val();var ft="";ft=$(".iris-filters .box-size.date input#date-to-iris").val();var wt="";wt=$(".iris-filters .box-size.date input#date-to-iris").val(),lt=$("#mag-slider-range").slider("values",0).toString(),ct=$("#mag-slider-range").slider("values",1).toString(),ut=$("#depth-slider-range").slider("values",0).toString(),mt=$("#depth-slider-range").slider("values",1).toString(),nt=$("#mag-slider-range").slider("values",0).toString(),dt=$("#mag-slider-range").slider("values",1).toString(),pt=$("#depth-slider-range").slider("values",0).toString(),ht=$("#depth-slider-range").slider("values",1).toString(),it&&(S.magt=it),rt&&(C.magt=rt),ot&&(S.evtOrd=ot),st&&(C.evtOrd=st),lt&&(S.minMag=lt),nt&&(C.minMag=nt),ct&&(S.maxMag=ct),dt&&(C.maxMag=dt),ut&&(S.minDep=ut),pt&&(C.minDep=pt),mt&&(S.maxDep=mt),ht&&(C.maxDep=ht),gt&&(S.dateFromIris=gt),vt&&(C.dateFromIris=vt),ft&&(S.dateToIris=ft),wt&&(C.dateToIris=wt)}var bt=DAB.View.generateCurrentMapName();return{name:k,popularSearchId:MyWorkspace.Search.popularSearchId,query:t,fullAndOpenDataset:{value:e,label:"Full and Open Dataset"},dateFrom:h,dateTo:g,datePeriod:{value:f,label:v},aoiOption:{value:s,label:l},aoiBoundingBox:n,aoiGeolocation:c,aoiContinentAndCountry:d,aoiW3W:u,aoiRelation:{value:p,label:m},cloudCoverageFrom:{value:w,label:w+"%"},cloudCoverageTo:{value:b,label:b+"%"},queryParams:{value:a,label:i},folder:{value:x,label:y},filterParams:{value:S,label:C},filterSet:A,currMap:bt}},restoreSavedFilters:function(){if(Object.keys(MyWorkspace.Search.filterParams).length>0){var t=Object.keys(MyWorkspace.Search.filterParams);if("iris-filters"==MyWorkspace.Search.filterSet)t.indexOf("magt")>=0&&($(".iris-filters .magt-select select").multiselect("select",MyWorkspace.Search.filterParams.magt),$(".iris-filters .magt-select select").multiselect("refresh")),t.indexOf("evtOrd")>=0&&($(".iris-filters .evtord-select select").multiselect("select",MyWorkspace.Search.filterParams.evtOrd),$(".iris-filters .evtord-select select").multiselect("refresh")),t.indexOf("minMag")>=0&&t.indexOf("maxMag")>=0&&($("#mag-slider-range").slider("values",0,MyWorkspace.Search.filterParams.minMag),$("#mag-slider-range").slider("values",1,MyWorkspace.Search.filterParams.maxMag),$("div.box-mag > span").text("Magnitude limit: "+MyWorkspace.Search.filterParams.minMag+"-"+MyWorkspace.Search.filterParams.maxMag),$("#mag-slider-range").attr("data-value",MyWorkspace.Search.filterParams.minMag+"-"+MyWorkspace.Search.filterParams.maxMag)),t.indexOf("minDep")>=0&&t.indexOf("maxDep")>=0&&($("#depth-slider-range").slider("values",0,MyWorkspace.Search.filterParams.minDep),$("#depth-slider-range").slider("values",1,MyWorkspace.Search.filterParams.maxDep),$("div.box-depth > span").text("Depth: "+MyWorkspace.Search.filterParams.minDep+"-"+MyWorkspace.Search.filterParams.maxDep+" KM"),$("#depth-slider-range").attr("data-value",MyWorkspace.Search.filterParams.minDep+"-"+MyWorkspace.Search.filterParams.maxDep)),t.indexOf("dateFromIris")>=0&&($("#date-from-iris").val(MyWorkspace.Search.filterParams.dateFromIris),irisDateFrom=MyWorkspace.Search.filterParams.dateFromIris),t.indexOf("dateToIris")>=0&&($("#date-to-iris").val(MyWorkspace.Search.filterParams.dateToIris),irisDateTo=MyWorkspace.Search.filterParams.dateToIris);else if("faceted-filters"==MyWorkspace.Search.filterSet)t.indexOf("keyword")>=0&&($(".filters .tags-select select").multiselect("select",MyWorkspace.Search.filterParams.keyword),$(".filters .tags-select select").multiselect("refresh")),t.indexOf("format")>=0&&($(".filters .format-select select").multiselect("select",MyWorkspace.Search.filterParams.format),$(".filters .format-select select").multiselect("refresh")),t.indexOf("source")>=0&&($(".filters .source-select select").multiselect("select",MyWorkspace.Search.filterParams.source),$(".filters .source-select select").multiselect("refresh")),t.indexOf("protocol")>=0&&($(".filters .protocol-select select").multiselect("select",MyWorkspace.Search.filterParams.protocol),$(".filters .protocol-select select").multiselect("refresh")),t.indexOf("organisation")>=0&&($(".filters .organisation-select select").multiselect("select",MyWorkspace.Search.filterParams.organisation),$(".filters .organisation-select select").multiselect("refresh"));else if("granula-filters"==MyWorkspace.Search.filterSet){if(t.indexOf("prodType")>=0&&($(".granula-filters .prodType-select select").multiselect("select",MyWorkspace.Search.filterParams.prodType),$(".granula-filters .prodType-select select").multiselect("refresh")),t.indexOf("sarPolCh")>=0&&($(".granula-filters .sarPolCh-select select").multiselect("select",MyWorkspace.Search.filterParams.sarPolCh),$(".granula-filters .sarPolCh-select select").multiselect("refresh")),t.indexOf("sensorOpMode")>=0&&($(".granula-filters .sensorOpMode-select select").multiselect("select",MyWorkspace.Search.filterParams.sensorOpMode),$(".granula-filters .sensorOpMode-select select").multiselect("refresh")),t.indexOf("sensorSwath")>=0&&($(".granula-filters .sensorSwath-select select").multiselect("select",MyWorkspace.Search.filterParams.sensorSwath),$(".granula-filters .sensorSwath-select select").multiselect("refresh")),t.indexOf("relOrbit")>=0&&$(".granula-filters .relOrbit-select input").val(MyWorkspace.Search.filterParams.relOrbit),t.indexOf("row")>=0&&$("#filter-row").val(MyWorkspace.Search.filterParams.row),t.indexOf("path")>=0&&$("#filter-path").val(MyWorkspace.Search.filterParams.path),t.indexOf("cloudcp")>=0){var e=MyWorkspace.Search.filterParams.cloudcp;e=e.replace("]","").replace("[","").split(","),$("#cloudcp-slider-range").slider("values",0,e[0]),$("#cloudcp-slider-range").slider("values",1,e[1]),$("#cloudcp-slider-range").attr("data-value",e[0]+"-"+e[1]),$("div.box_cloudcp > label").text("Cloud coverage: "+e[0]+"-"+e[1]+"%")}t.indexOf("dateFromGranula")>=0&&($("#date-from-granula").val(MyWorkspace.Search.filterParams.dateFromGranula),granuleDateFrom=MyWorkspace.Search.filterParams.dateFromGranula),t.indexOf("dateToGranula")>=0&&($("#date-to-granula").val(MyWorkspace.Search.filterParams.dateToGranula),granuleDateTo=MyWorkspace.Search.filterParams.dateToGranula)}MyWorkspace.Search.filterParams=[],MyWorkspace.Search.filterSet=""}},getBoundingBoxes:function(t){var e=[];return t.find("box").each(function(){var t=$(this).text();t.trim()&&(box=parseCoordinates(t),e.push(box))}),e=removeDuplicateBoxes(e)},getIrisCircles:function(t){var e,a="UUID-e101622c-6ae1-4b68-bfea-8acf067e31dd";if(t.find("parentID").text()==a){var i=t.find("box").text(),r=.5*(Number(t.find("verticalextent minimum").text())+Number(t.find("verticalextent maximum").text())),o=t.find("title").text().indexOf("earthquake of magnitude ")+24,s=t.find("title").text().slice(o,o+3);return i.trim()&&s&&((e=new Object).coordinates=parseCoordinates(i),e.magnitude=s,e.depth=r),e}if(t.find("gmd\\:parentIdentifier gco\\:CharacterString").text()==a){var i=t.find("gmd\\:southBoundLatitude gco\\:Decimal").text()+" "+t.find("gmd\\:westBoundLongitude gco\\:Decimal").text()+" "+t.find("gmd\\:northBoundLatitude gco\\:Decimal").text()+" "+t.find("gmd\\:eastBoundLongitude gco\\:Decimal").text(),r=.5*(Number(t.find("gmd\\:minimumValue gco\\:Real").text())+Number(t.find("gmd\\:maximumValue gco\\:Real").text())),o=t.find("gmd\\:title gco\\:CharacterString").text().indexOf("earthquake of magnitude ")+24,s=t.find("gmd\\:title gco\\:CharacterString").text().slice(o,o+3);return i.trim()&&s&&((e=new Object).coordinates=parseCoordinates(i),e.magnitude=s,e.depth=r),e}},presentMainResults:function(t){DAB.View.queryablesForEntries={},DAB.View.entries={},DAB.View.drillDownSearch=!1,DAB.View.granulaFiltersEnabled=!1,AOIAction=void 0;var e=!1;return $(t.responseText).find("entry").each(function(){if("errmsgid"!=$(this).find("id").text())return e=!0,!1}),200!=t.status?(DAB.View.failureHandler(),Geoss.failureCallback("xhr"),void(DAB.View.searchInProgress=!1)):e?(DAB.View.presentResults($(t.responseText),DAB.View.resultsContainer),LogStore.getRecentActionsLog($(t.responseText)),Geoss.successCallback($(t.responseText)),chooseCurrentSearchIcons(),void(DAB.View.searchInProgress=!1)):(DAB.View.failureHandler(),Geoss.failureCallback("noresults"),void(DAB.View.searchInProgress=!1))},presentDrillDownResults:function(t){var e=$(t.responseText).find("entry");return 200!=t.status?(DAB.View.failureHandler(),Geoss.failureCallback("xhr"),void(DAB.View.searchInProgress=!1)):0==e.length||"errmsgid"==e.first().find("id").text()&&e.first().find("title").text().indexOf(0==SATELITE_SEARCH_EMPTY_MSG)?(DAB.View.failureHandler(),Geoss.failureCallback("noresults"),void(DAB.View.searchInProgress=!1)):(DAB.View.granulaFiltersEnabled=DAB.View.updateAndShowGranulaFilters($(t.responseText)),AOIAction=DAB.View.reloadGranulaData,DAB.View.presentResults($(t.responseText),DAB.View.resultsContainer+" .drill-box"),Geoss.successCallback($(t.responseText)),chooseCurrentSearchIcons(),void(DAB.View.searchInProgress=!1))},encodeHtmlFromXml:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},decodeHtmlOnXml:function(t){return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},presentResults:function(t,e){gResultSet=t,$(e).children().remove(),DAB.View.drillDownSearch||(DAB.View.mainResults={entries:[]}),DAB.View.drillDownResults={entries:[]},DAB.View.drillDownSearch?DAB.View.currentResults=DAB.View.drillDownResults:DAB.View.currentResults=DAB.View.mainResults,Geoss.showBoundingBoxes||$(".inner-layer-box .checkbox-decoration .bbox").trigger("click"),hoverInteractiveMode=!0,DAB.View.currentResults.startIndex=parseInt(t.find("startIndex").text()),DAB.View.currentResults.itemsPerPage=parseInt(t.find("itemsPerPage").text()),DAB.View.currentResults.endIndex=DAB.View.currentResults.startIndex+DAB.View.currentResults.itemsPerPage-1,DAB.View.currentResults.totalResults=parseInt(t.find("totalResults").text()),DAB.View.currentResults.resultCount=0,DAB.Client.reqID=null,DAB.View.drillDownSearch?$(".black.drilldown").remove():$(".black.main").remove(),t.find("entry").each(function(t,a){var i=$(DAB.View.resultsContainer+" .list-result").length,r=$(this).find("id").text();"errmsgid"!=r&&(DAB.View.currentResults.entries.push({index:DAB.View.currentResults.resultCount}),$(e).append(DAB.View.listResult($(this),t)).children(":last-child").attr("data-id",i).attr("data-target-id",DAB.View.encodeHtmlFromXml(r)),$(e).children(":last-child").data("target-id",r),$(e).children(":last-child").data("entry-xml",$(this)[0].outerHTML),$(e).children(":last-child").find(".result-title").dotdotdot({watch:window,height:46,ellipsis:" ... "}),$(this).find("satelliteCollectionQueryable").each(function(){DAB.View.queryablesForEntries[r]=$(this).text()}),""!=$(this).find("acquisition platformid").text()&&(DAB.View.entries[r]=$(this)));try{var o=DAB.View.getBoundingBoxes($(this)),s=$(this).find("acquisition footprint").first().text(),l=DAB.View.getIrisCircles($(this));if((o[0]||s||l)&&!stopQueryTriggered){var n={boxes:o,footprints:s,irisCircles:l};boundingBoxes_1(Geoss.mainMap,n,i)}}catch(t){console.error("Error drawing bounding box for result number: "+i),console.error("Error:"+t)}DAB.View.currentResults.resultCount++}),$(e).append('<div class="drill-box"></div>'),DAB.View.displayRatings(),DAB.View.currentResults.resultCount>0&&(searches(),DAB.View.updateFacetedCriteria(t)),!DAB.View.drillDownSearch&&DAB.View.currentResults.totalResults>0&&(MyWorkspace.isRestoredGranulaSearch()?MyWorkspace.restoreGranulaSearch():MyWorkspace.isRestoredDrillDownBookmark()&&MyWorkspace.restoreDrillDownBookmark())},updateAndShowGranulaFilters:function(t){var e=!1;DAB.View.enumGranulaFilters.forEach(function(a){DAB.View.updateAndShowOneGranulaFilter(t,a,DAB.View.enumGranulaFilterLabels[a])&&(e=!0)});var a=DAB.View.queryablesForEntries[DAB.View.drilledDownEntry];return DAB.View.continuousGranulaFilters.forEach(function(t){null!=a&&void 0!=a&&a.indexOf(t)>=0?($(".box_"+t).show(),e=!0):$(".box_"+t).hide()}),DAB.View.integerGranulaFilters.forEach(function(t){DAB.View.updateAndShowOneIntegerGranulaFilter(DAB.View.integerGranulaFilterLabels[t],t,a)}),e},updateAndShowOneIntegerGranulaFilter:function(t,e,a){return null!=a&&void 0!=a&&a.indexOf(e)>=0?($("."+e+"-select").show(),$("."+e+"-select input").show(),$("."+e+"-select input").keypress(function(t){13==t.which&&DAB.View.reloadGranulaData()}),$("."+e+'-select input[type="number"]').on("input",function(t){var e=$(this)[0].validity;!0!==e.valueMissing&&!0!==e.typeMismatch&&!0!==e.patternMismatch&&!0!==e.tooLong&&!0!==e.tooShort&&!0!==e.rangeUnderflow&&!0!==e.rangeOverflow&&!0!==e.stepMismatch&&!0!==e.badInput&&!0!==e.customError||$(this).val("");var a=$(this).val();a&&!/^\d+$/.test(a)&&($(this).val(""),a="");var i=$(this).data("previous-value");i||(i=""),(a!=i||DAB.View.reloadGranulaTimer)&&(DAB.View.reloadGranulaTimer&&clearTimeout(DAB.View.reloadGranulaTimer),DAB.View.reloadGranulaTimer=setTimeout(function(){DAB.View.reloadGranulaTimer=null,DAB.View.reloadGranulaData()},1500),$(this).data("previous-value",a))}),!0):($("."+e+"-select").hide(),!1)},updateAndShowOneGranulaFilter:function(t,e,a){var i=!1;$("."+e+"-select").children(":first-child").remove(),$("."+e+"-select").append('<select class="single-select '+e+'" title="'+a+'"></select>'),$("."+e+"-select ."+e).append('<option value="">'+a+"</option>"),t.find("dm\\:termFrequency dm\\:"+e+" dm\\:item").each(function(t){$("."+e+"-select ."+e).append('<option title="'+$(this).find("dm\\:decodedTerm").text()+'" value="'+$(this).find("dm\\:term").text()+'">'+$(this).find("dm\\:decodedTerm").text()+" ("+$(this).find("dm\\:freq").text()+")</option>"),i=!0});var r=$(".granula-filters ."+e+"-select .active input").parent().attr("title");$(".granula-filters ."+e+"-select .active input").text();return void 0!=r&&r!=a?$("."+e+"-select .multiselect").attr("title",r):$("."+e+"-select .multiselect").attr("title",a),i&&DAB.View.reloadGranulaFilters(e),i?($(".granula-filters ."+e+"-select").show(),DAB.View.reloadProductTypeMuselect(e)):$(".granula-filters ."+e+"-select").hide(),$("."+e+"-select .btn-group:first-child").remove(),i},reloadProductTypeMuselect:function(t){$("."+t+"-select .btn-group:first-child .multiselect-container li").each(function(e,a){if($(a).hasClass("active"))var i=$(a).find("input").val();$("."+t+"-select .btn-group:last-child .multiselect-container li").each(function(e,a){var r=$(a).find("input").val(),o=$(a).find("label").text();i==r?($(a).addClass("active"),$(a).find("input").prop("checked",!0),$("."+t+"-select .btn-group:last-child .multiselect-selected-text").text(o)):($("."+t+"-select .btn-group:last-child .multiselect-container li:first-child").removeClass("active"),$("."+t+"-select .btn-group:last-child .multiselect-container li:first-child input").prop("checked",!1))})})},updateFacetedSelectedElement:function(t){".tags-select"==t&&(queryName="keyword"),".format-select"==t&&(queryName="format"),".source-select"==t&&(queryName="source"),".protocol-select"==t&&(queryName="protocol"),".organisation-select"==t&&(queryName="organisationName");var e=$(t+" .single-select option").length-1;DAB.View.numberOfOptions+=e,0==e?"new"==$(".filters").data("searchType")?$(t).css("display","none"):($(t+" .btn-group:last-child .multiselect").addClass("disabled"),$(t+" .btn-group:last-child .multiselect").css("background-color","#aaa"),$(t+" .btn-group:last-child .multiselect b").removeClass("caret")):($(t).css("display","inline"),$(t+" .btn-group:last-child .multiselect").removeClass("disabled"),$(t+" .btn-group:last-child .multiselect").css("background-color",""),$(t+" .btn-group:last-child .multiselect b").addClass("caret"),$(t+" .btn-group:first-child .multiselect-container li").each(function(e,a){if($(a).hasClass("active"))var i=$(a).find("input").val();$(t+" .btn-group:last-child .multiselect-container li").each(function(e,a){var r=$(a).find("input").val(),o=$(a).find("label").text();i==r?($(a).addClass("active"),$(a).find("input").prop("checked",!0),$(t+" .btn-group:last-child .multiselect-selected-text").text(o)):($(t+" .btn-group:last-child .multiselect-container li:first-child").removeClass("active"),$(t+" .btn-group:last-child .multiselect-container li:first-child input").prop("checked",!1))})})),$(t+" .btn-group:first-child").remove()},updateFacetedCriteria:function(t){$(".tags-select").children(":first-child").remove(),$(".tags-select").append('<select class="single-select tags" title="KEYWORDS"></select>'),$(".tags-select .tags").append('<option value="">KEYWORD</option>'),t.find("dm\\:termFrequency dm\\:keyword dm\\:item").each(function(t){$(".tags-select .tags").append('<option title="'+$(this).find("dm\\:decodedTerm").text()+'" value="'+$(this).find("dm\\:term").text()+'">'+$(this).find("dm\\:decodedTerm").text()+" ("+$(this).find("dm\\:freq").text()+")</option>")}),$(".format-select").children(":first-child").remove(),$(".format-select").append('<select class="single-select formats" title="FORMAT"></select>'),$(".format-select .formats").append('<option value="">FORMAT</option>'),t.find("dm\\:termFrequency dm\\:format dm\\:item").each(function(t){$(".format-select .formats").append('<option title="'+$(this).find("dm\\:decodedTerm").text()+'" value="'+$(this).find("dm\\:term").text()+'">'+$(this).find("dm\\:decodedTerm").text()+" ("+$(this).find("dm\\:freq").text()+")</option>")}),$(".source-select").children(":first-child").remove(),$(".source-select").append('<select class="single-select source" title="SOURCE"></select>'),$(".source-select .source").append('<option value="">SOURCE</option>'),t.find("dm\\:termFrequency dm\\:source dm\\:item").each(function(t){$(".source-select .source").append('<option title="'+$(this).find("dm\\:term").text()+'" value="'+$(this).find("dm\\:sourceId").text()+'">'+$(this).find("dm\\:term").text()+" ("+$(this).find("dm\\:freq").text()+")</option>")}),$(".protocol-select").children(":first-child").remove(),$(".protocol-select").append('<select class="single-select protocol" title="PROTOCOL"></select>'),$(".protocol-select .protocol").append('<option value="">PROTOCOL</option>'),t.find("dm\\:termFrequency dm\\:protocol dm\\:item").each(function(t){$(".protocol-select .protocol").append('<option title="'+$(this).find("dm\\:decodedTerm").text()+'" value="'+$(this).find("dm\\:term").text()+'">'+$(this).find("dm\\:decodedTerm").text()+" ("+$(this).find("dm\\:freq").text()+")</option>")}),$(".organisation-select").children(":first-child").remove(),$(".organisation-select").append('<select class="single-select organisation" title="ORGANISATION"></select>'),$(".organisation-select .organisation").append('<option value="">ORGANISATION</option>'),t.find("dm\\:termFrequency dm\\:organisationName dm\\:item").each(function(t){var e=$(this).find("dm\\:decodedTerm").text(),a="";if(e.indexOf("u'name':")>-1){for(var i=e.split("u'name':").length-1,r=0;r<i;r++){var o=e.indexOf("u'name':")+11,s=e.substring(o),l=s.indexOf("}")-1;e=s,a=a+s.substring(0,l)+" "}e=a}else e=e;$(".organisation-select .organisation").append('<option title="'+e+'" value="'+$(this).find("dm\\:term").text()+'">'+e+" ("+$(this).find("dm\\:freq").text()+")</option>")}),$(document).ajaxComplete(function(){DAB.View.numberOfOptions=0,DAB.View.updateFacetedSelectedElement(".tags-select"),DAB.View.updateFacetedSelectedElement(".format-select"),DAB.View.updateFacetedSelectedElement(".source-select"),DAB.View.updateFacetedSelectedElement(".protocol-select"),DAB.View.updateFacetedSelectedElement(".organisation-select"),0==DAB.View.numberOfOptions?($(".filters > span").html("No filters available"),$(".filters #faceted-filters").css("display","none"),$(".filters").addClass("noavailable")):($(".filters > span").html("Filters"),$(".filters #faceted-filters").css("display","initial"),$(".filters").removeClass("noavailable"))}),DAB.View.reloadFilters(),DAB.View.setFacetedTitles()},presentSatelliteMetadata:function(t){if($(".black.black1").children().remove(),$(".black.black1").append(DAB.View.satelliteMetadataGenerator(t)),$(".black1").show(),GWP&&(GeossUtil.handleDragAndResize($(".black.black1 .resource-details-wrapper"),".resource-detais"),!$(".black.black1").hasClass("resize-handled"))){$(".black.black1").addClass("resize-handled");var e=window.innerWidth;$(window).on("resize",function(){window.innerWidth!=e&&(GeossUtil.handleDragAndResize($(".black.black1 .resource-details-wrapper"),".resource-detais"),e=window.innerWidth)})}DAB.View.scroll_metadate&&($("#portlet_geosssearch_WAR_geossportlet > div > div > div > div.black.black1 > div").animate({scrollTop:$("#portlet_geosssearch_WAR_geossportlet > div > div > div > div.black.black1 > div > div.main-desc.downloads").offset().top},2e3),DAB.View.scroll_metadate=!1);var a={boxes:DAB.View.getBoundingBoxes(t),footprints:t.find("acquisition footprint").first().text(),irisCircles:DAB.View.getIrisCircles(t)};DAB.View.drawMetadataMap(a),DAB.View.searchInProgress=!1,Geoss.metadataCallback()},drawMetadataMap:function(t){var e=new ol.Map({target:"infoMap",layers:[new ol.layer.Tile({source:new ol.source.XYZ({tileSize:[512,512],url:Geoss.mapUrl})})],view:new ol.View({center:ol.proj.fromLonLat([10,20]),zoom:1.5}),controls:[],interactions:[]}),a=drawFeature(t,0);a&&(e.addLayer(a),zoomOnFeatures(e,a)),$(".resource-detais .infoMap .ol-viewport.ol-touch").css({"touch-action":"auto","pointer-events":"none"})},setFacetedTitles:function(){var t=$(".filters .tags-select .active input").parent().attr("title");void 0!=t&&"keyword"!=t?$(".tags-select .multiselect").attr("title",t):$(".tags-select .multiselect").attr("title","KEYWORD");var e=$(".filters .format-select .active input").parent().attr("title");"format"!=e&&void 0!=e?$(".format-select .multiselect").attr("title",e):$(".format-select .multiselect").attr("title","FORMAT");var a=$(".filters .source-select .active input").parent().attr("title");"source"!=a&&void 0!=a?$(".source-select .multiselect").attr("title",a):$(".source-select .multiselect").attr("title","SOURCES");var i=$(".filters .protocol-select .active input").parent().attr("title");"protocol"!=i&&void 0!=i?$(".protocol-select .multiselect").attr("title",i):$(".protocol-select .multiselect").attr("title","PROTOCOL");var r=$(".filters .organisation-select .active input").parent().attr("title");"organisation"!=r&&void 0!=r?$(".organisation-select .multiselect").attr("title",r):$(".organisation-select .multiselect").attr("title","ORGANISATION")},drillDown:function(t,e){DAB.View.searchInProgress||(DAB.View.drilledDownEntry=t,DAB.View.drilledDownItem=e,DAB.View.drillDownSearch=!0,$(e).next().show(),$(e).hide(),DAB.Facade.drillDown(t),$(".drill-box").show(),$(DAB.View.resultsContainer+" > .list-result").hide(),$(DAB.View.resultsContainer+' > .list-result[data-id="'+$(e).closest(".list-result").attr("data-id")+'"]').show(),Geoss.actionBeforeRequest())},drillUp:function(t){if(!DAB.View.searchInProgress){if(MyWorkspace.isRestoredGranulaSearch())return void $(".search-button-2 span").trigger("click");MyWorkspace.isRestoredDrillDownBookmark()&&MyWorkspace.drillUpBookmarkedResult(),DAB.View.drillDownSearch=!1,DAB.View.granulaFiltersEnabled=!1,AOIAction=void 0,DAB.View.switchToMainResultsView(),$(".inner-pagination-container .numbers-pagination").text(DAB.View.currentResults.startIndex+"-"+DAB.View.currentResults.endIndex+" of "+DAB.View.currentResults.totalResults),DAB.View.currentResults.endIndex>=DAB.View.currentResults.totalResults?(DAB.View.currentResults.endIndex=DAB.View.currentResults.totalResults,$(".inner-pagination-container span.next").addClass("disabled")):$(".inner-pagination-container span.next").removeClass("disabled"),1==DAB.View.currentResults.startIndex?$(".inner-pagination-container span.prev").addClass("disabled"):$(".inner-pagination-container span.prev").removeClass("disabled"),$(DAB.View.paginationContainer).show(),$(t).prev().show(),$(t).hide(),DAB.View.closeAndClearGranulaFilters(),removeBboxLayers(Geoss.mainMap)}},switchToMainResultsView:function(){DAB.View.currentResults=DAB.View.mainResults,$(".drill-box").hide(),$(".drill-box").empty(),$(".box_cloudcp").hide(),$(".box_relOrbit").hide(),$(DAB.View.resultsContainer+" > .list-result").show(),$(".row-result-form .number-result .number-results").text(DAB.View.currentResults.totalResults)},closeAndClearGranulaFilters:function(){$("div.granula-filters").removeClass("active"),$("div.granula-filters").hide(),DAB.View.enumGranulaFilters.forEach(function(t){$("#granula-filters-set > ."+t+"-select").children().remove(),$("#granula-filters-set > ."+t+"-select").append('<select class="single-select '+t+'" title="'+DAB.View.enumGranulaFilterLabels[t]+'"></select>')}),DAB.View.reloadSliders(),DAB.View.continuousGranulaFilters.forEach(function(t){$(".box_"+t).hide()}),DAB.View.integerGranulaFilters.forEach(function(t){$("."+t+"-select").hide(),$("."+t+"-select input").val(""),$("."+t+"-select input").data("previous-value","")}),$(".granula-filters .date #date-from-granula").val(""),$(".granula-filters .date #date-to-granula").val(""),granuleDateFrom="",granuleDateTo=""},closeGranulaFilters:function(){$("div.granula-filters").removeClass("active"),$("div.granula-filters").hide(),$(".box_cloudcp").hide(),$(".box_relOrbit").hide(),DAB.View.integerGranulaFilters.forEach(function(t){$("."+t+"-select").hide()})},clearGranulaFilters:function(){DAB.View.enumGranulaFilters.forEach(function(t){$("#granula-filters-set > .prodType-select").children().remove(),$("#granula-filters-set > .prodType-select").append('<select class="single-select '+t+'" title="'+DAB.View.enumGranulaFilterLabels[t]+'"></select>')}),DAB.View.reloadSliders(),DAB.View.integerGranulaFilters.forEach(function(t){$("."+t+"-select input").val(""),$("."+t+"-select input").data("previous-value","")}),$(".row-form-search .date #date-from-granula").val(""),$(".row-form-search .date #date-to-granula").val(""),granuleDateFrom="",granuleDateTo=""},failureHandler:function(){DAB.View.closeAndClearGranulaFilters(),DAB.View.isIrisSearch()?($(".row-result-form .filters").removeClass("active").hide(),DAB.View.showIrisFilters()):(DAB.View.hideIrisFilters(),$(".row-result-form .filters").addClass("active").show()),DAB.View.reloadSliders(),removeBboxLayers(Geoss.mainMap),$(".inner-pagination-container .numbers-pagination").text("0 of 0"),$(".row-result-form .number-result .number-results").text("0"),DAB.View.drillDownSearch&&$(".drill-box").is(":empty")&&($(".drill-up").hide(),$(".drill-down").show(),DAB.View.drillUp(DAB.View.drilledDownItem))},fixhtml:function(t){var e=document.createElement("div");return e.innerHTML=t,e.innerHTML},presentMetadata:function(t,e){if(200==t.status){var a=$(t.responseText);DAB.View.gdata=a;var i=[];$(a).find("gmd\\:EX_GeographicBoundingBox").each(function(){var t=$(this).find("gmd\\:westBoundLongitude gco\\:Decimal").text(),e=$(this).find("gmd\\:eastBoundLongitude gco\\:Decimal").text(),a=$(this).find("gmd\\:southBoundLatitude gco\\:Decimal").text(),r=$(this).find("gmd\\:northBoundLatitude gco\\:Decimal").text();t&&a&&e&&r&&i.push([Number(t),Number(a),Number(e),Number(r)])}),i=removeDuplicateBoxes(i);var r=DAB.View.getIrisCircles(a);if($(".black.black1").children().remove(),$(".black.black1").append(DAB.View.metadataGenerator(a,e,i)),$(".black1").show(),GWP&&(GeossUtil.handleDragAndResize($(".black.black1 .resource-details-wrapper"),".resource-detais"),!$(".black.black1").hasClass("resize-handled"))){$(".black.black1").addClass("resize-handled");var o=window.innerWidth;$(window).on("resize",function(){window.innerWidth!=o&&(GeossUtil.handleDragAndResize($(".black.black1 .resource-details-wrapper"),".resource-detais"),o=window.innerWidth)})}DAB.View.scroll_metadate&&($("#portlet_geosssearch_WAR_geossportlet > div > div > div > div.black.black1 > div").animate({scrollTop:$("#portlet_geosssearch_WAR_geossportlet > div > div > div > div.black.black1 > div > div.main-desc.downloads").offset().top},2e3),DAB.View.scroll_metadate=!1);var s={boxes:i,footprints:null,irisCircles:r};DAB.View.drawMetadataMap(s),DAB.View.searchInProgress=!1,Geoss.metadataCallback()}else GeossUtil.showMessage(TITLE_BACKEND_ERROR,MSG_BACKEND_ERROR)},listResult:function(t,e){return"<div class='list-result'>"+DAB.View.resultImages(t)+DAB.View.resultText(t,e)+"</div>"},resultText:function(t,e,a){var i=t.find("summary").text().replace(/(\r\n|\n|\r)/gm,"");try{i=$(i).text()}catch(t){}i=(i=i.replace(/\s+/g," ")).length>300?DAB.View.fixhtml(i.substr(0,300))+" ...":DAB.View.fixhtml(i);t.html();var r=$(t.find("contributor orgName")[0]).text();return void 0!=r&&""!=r||(r="unknown"),"<div class='result-text'>       <div class='wrap-list-text'>           <div class='result-title'>"+t.find("title").text()+"</div>           <div class='resultboxtext'>(Organization: <span>"+r+"</span>)</div>           <div class='result-description'>"+i+"</div>"+DAB.View.satelliteSpecyficData(t)+"       </div>"+DAB.View.resultDataTypes(t,e)+"   </div>"},roundSizeMB:function(t){return t>1e3?(parseInt(t)/1e3).toFixed(1)+"GB":t<1?parseInt(1e3*t)+"KB":parseInt(t).toFixed(0)+"MB"},extractDate:function(t){return t.indexOf("T")>=0?t.slice(0,t.indexOf("T")):t},satelliteSpecyficData:function(t){var e=!1;t.find('category[term="hlevel"]').each(function(){"series"==$(this).attr("label")&&(e=!0)}),e?(satelliteParamsForRBoxParams.dtstart[4]="Collection start date",satelliteParamsForRBoxParams.dtstop[4]="Collection stop date"):(satelliteParamsForRBoxParams.dtstart[4]="Start date",satelliteParamsForRBoxParams.dtstop[4]="Stop date");var a="<div class='resultboxtext'>";return satelliteParamsForRBox.forEach(function(e){var i=satelliteParamsForRBoxParams[e];if(i[1]){var r=t.find(e);if(void 0!=r&&null!=r&&r.text().length>0&&"Approx"!=r.text()){var o=i[0];null!=i[4]&&(o=i[4]);var s=r.text();null!=i[5]&&(s=i[5](s)),a+="<b>"+o+":</b> "+s+" "}}}),a+="</div>"},resultImages:function(t){var e=t.find("atom\\:logo").text();return"<div class='result-images'>   <div class='image'>      "+(null!=e&&e.length>0?"<img src='"+e+"' alt='Resource preview not available' class='big-image'>":"<img src='' alt='Resource preview not available' class='big-image'>")+"   </div>\t<div class='dataCoreIcon'></div>   <div class='recent-views'>      <span class='nr-views'>0 recent views</span>   </div>\t<div class='rating-icon'/>\t<div class='rating'/></div>"},concatDownloadButton:function(t,e,a,i){var r=$.grep(DAB.View.currentResults.entries[a].downloads,function(e){return e.type==t}),o="";return r.length>1?o="<button class='"+t+" "+t+"Box' title='Download in "+t+" format' onclick='"+DAB.View.parseOnclickFunction("DAB.View.concatDownloadBox",[t,e,a,i])+"' data-type='"+t+"Box_"+a+"'>"+t+"</button>":1==r.length&&(o="<button class='"+t+"' title='Download in "+t+" format' onclick='"+DAB.View.parseOnclickFunction("DAB.View.download",[escape(r[0].url),DAB.View.encodeHtmlFromXml(i)])+"'>"+t+"</button>"),o},concatDownloadBox:function(t,e,a,i){if(0==$(".black.black4."+t+"_"+a+"."+e).length){for(var r,o=$.grep(DAB.View.currentResults.entries[a].downloads,function(e){return e.type==t}),s="",l="",n=0;n<o.length;n++)r="other"==t&&(""==o[n].name||"all"==o[n].name)&&o[n].url.indexOf("MapServer")>-1?"Map Server":o[n].name,l+="<li><span class='icon'>"+t.toUpperCase()+"</span><a href='javascript:void(0);' onclick='"+DAB.View.parseOnclickFunction("DAB.View.download",[escape(o[n].url),DAB.View.encodeHtmlFromXml(i)])+"'>"+r+"</a><div class='description'>"+o[n].desc+"</div></li>";s="<div class='black black4 "+t+" "+t+"_"+a+" "+e+"' onclick='hidePopupFunction(event)'>\t<div class='popups resource-show'>\t\t<div class='top-strip "+("link"==t?"link":"downld")+"'>"+o[0].boxTitle+"\t\t  <button class='close-popup glyphicon' title='close'></button>\t\t</div>\t\t<ul class='results'>"+l+"</ul>\t</div></div>",$(Geoss.popupsContainer).append(s)}$(".black.black4."+t+"_"+a+"."+e).show().addClass("active"),GWP&&GeossUtil.handleDragAndResize($(".black .popups.resource-show"),".results"),Geoss.downloadBoxCallback()},concatLayerBox:function(t,e,a){if(0==$(".black.black2.black_"+e+"."+t).length){for(var i,r,o=DAB.View.currentResults.entries[e].layers,s="",l=$('.list-result[data-id="'+e+'"] .red-icons .add_map').attr("value"),n=$('.list-result[data-id="'+e+'"] .red-icons .info').attr("value"),c=0;c<o.length;c++)i=t+e+o[c].type+c,r='<li><div class="col-sm-7">'+o[c].boxTitle+'</div><div class="col-sm-5"><div class="box-size checkbox-decoration full-width"><input id="Layers_dataset_'+i+'" type="checkbox" namelayer="'+o[c].boxTitle+'" data-format="'+o[c].type+'" data-value="'+o[c].url+'" data-bbox="'+l+'" data-metainfo="'+n+'" class="add-layer non-clicked"><label for="Layers_dataset_'+i+'" class="box-size">Load on the map</label></div></div>',o[c].img&&(r+='<div class="col-sm-12"><img class="layer" src="'+o[c].img+'" ></div>'),s+=r+='<hr class="clear"></li>';var d='<div class="black black2 wms black_'+e+" "+t+'" onclick=\'hidePopupFunction(event)\'>\t<div class="popups resource-show">\t\t<div class="top-strip">Showing Resources that can be loaded on MAP viewer \t\t\t<button class="close-popup glyphicon" title="close"></button>\t\t</div>\t\t<ul class="results">'+s+"</ul>\t</div></div>";$(Geoss.popupsContainer).append(d)}var u=e;"drilldown"==t&&(u=10+Number(e)),$(".black.black2.black_"+e+"."+t).show().addClass("active").addClass("active show_"+u),$('.list-result[data-id="'+u+'"] .red-icons .add_map').addClass("showWmsOnMap_"+u),GWP&&(GeossUtil.handleDragAndResize($(".black .popups.resource-show"),".results"),$(Geoss.layersContainer).slideUp(100))},resultDataTypes:function(t,e){var a=t.find("id").text(),r="";t.find('category[term="hlevel"]').each(function(){"series"==$(this).attr("label")&&(r="<button class='drill-down' title='Show inside folder' onclick='DAB.View.drillDown(\""+t.find("id").text()+"\", this)'></button><button class='drill-up' title='Hide inside folder' onclick='DAB.View.drillUp(this)'></button>")});var o,s,l,n,c,d,u,p,m,h;if($.extend(DAB.View.currentResults.entries[DAB.View.currentResults.resultCount],{downloads:[],layers:[]}),t.find("gmd\\:online gmd\\:ci_onlineresource gmd\\:linkage gmd\\:url").each(function(e,a){var i=$(a).text(),r=$(a).closest("entry").find("title").text(),o=$(this).closest("gmd\\:ci_onlineresource").find("gmd\\:description").html()||"",s=$(a).closest("gmd\\:onLine").find("gmd\\:protocol gco\\:characterstring").text(),l=$(t).find("title").text(),n=$(t).find("category[term='keywords'][label='kml']").length>0,c=i||"",d=(c=(c=(c=c.substring(0,-1==c.indexOf("#")?c.length:c.indexOf("#"))).substring(0,-1==c.indexOf("?")?c.length:c.indexOf("?"))).substring(c.lastIndexOf("/")+1,c.length)).indexOf(".")>-1?c.split(".").pop().toLowerCase():"",u=o.indexOf("complex")>0,p=$(a).closest("gmd\\:onLine").find("gmd\\:name gco\\:characterstring").text(),m=$(a).closest("gmd\\:onLine").find("gmd\\:function gmd\\:ci_onlinefunctioncode").text();0==p.length&&(p=0!=m.length?m:l);var h=$(a).closest("gmd\\:onLine").find("gmd\\:description gco\\:characterstring").text(),g=$(a).closest("gmd\\:onLine").find("gmd\\:name gco\\:characterstring").text();if(""==h&&""!=g&&(h=g),"pdf"!=d||u)if("txt"!=d||u)if("html"!=d&&"shtml"!=d||u)if("jpg"!=d&&"png"!=d||-1!=i.indexOf("tile")||u)if("xml"!=d||u)if(s.indexOf("WebMapService")>-1&&""!=i){var v=$(this).closest("entry").find("atom\\:logo").text(),f=r,w=$(this).closest("gmd\\:ci_onlineresource").find("gmd\\:name gco\\:characterstring").text(),b=$(this).closest("gmd\\:ci_onlineresource").find("gmd\\:protocol gco\\:characterstring").text(),x="1.0";if(b.indexOf("1.1.1")>0?x="1.1.1":b.indexOf("1.1.0")>0&&(x="1.1.0"),void 0!=o)if(o.indexOf("simple")>-1)y="simple";else if(o.indexOf("complex")>-1)var y="complex";if(void 0!=o&&o.indexOf("anchor")>-1&&(o.indexOf("simple")>-1||o.indexOf("complex")>-1)){if(i.indexOf("LAYERS=")>-1)var k=i.indexOf("LAYERS="),S=i.indexOf("&",k),l=A=i.slice(k+7,S),C=i;else var l=f,k=1,A=w,C=i+"&&&LAYERS="+A+"&VERSION="+x+"&ANCHOR="+y;DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].layers.push({name:w,url:C,type:"wms",boxTitle:l,img:v})}}else if(s.indexOf("WebCoverageService")>-1)DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].downloads.push({name:p,url:i,desc:h,type:"wcs",boxTitle:l});else if(s.indexOf("TiledMapService")>-1&&!u&&""!=i){var D=$(this).closest("gmd\\:ci_onlineresource").find("gmd\\:name gco\\:characterstring").text();DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].layers.push({name:D,url:i,type:"tms",boxTitle:l,img:v})}else!(s.indexOf("WWW:LINK-1.0-http--link")>-1)||u&&""!=i||i.indexOf("WMS")>-1||i.indexOf("wms")>-1||i.indexOf("WCS")>-1||i.indexOf("wcs")>-1||i.indexOf("TMS")>-1||i.indexOf("tms")>-1?("kml"==d||i.indexOf("format=KML")>-1||i.indexOf("/application/xml")>-1&&n)&&!u?(DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].downloads.push({name:p,url:i,desc:h,type:"kml",boxTitle:l}),DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].layers.push({name:l,url:i,type:"kml",boxTitle:l,img:null})):("kmz"==d||i.indexOf("format=KMZ")>-1||i.indexOf("/application/zip")>-1&&n)&&!u?(DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].downloads.push({name:p,url:i,desc:h,type:"kmz",boxTitle:l}),DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].layers.push({name:l,url:i,type:"kmz",boxTitle:l,img:null})):""==i||i.indexOf("WMS")>-1||i.indexOf("wms")>-1||i.indexOf("WCS")>-1||i.indexOf("wcs")>-1||i.indexOf("TMS")>-1||i.indexOf("tms")>-1||o.indexOf("complex")>0||("/"==i.substr(i.length-1)&&""!=h?p.indexOf("GET DATA")>-1?DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].downloads.push({name:p,url:i,desc:h,type:"link",boxTitle:l}):p.indexOf("VIEW")>-1&&DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].downloads.push({name:p,url:i,desc:h,type:"other",boxTitle:l}):DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].downloads.push({name:p,url:i,desc:h,type:"other",boxTitle:l})):DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].downloads.push({name:p,url:i,desc:h,type:"link",boxTitle:l});else DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].downloads.push({name:p,url:i,desc:h,type:"xml",boxTitle:l});else""!=h&&DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].downloads.push({name:p,url:i,desc:h,type:"img",boxTitle:l});else i.indexOf("opendap")>-1?DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].downloads.push({name:p,url:i,desc:h,type:"link",boxTitle:l}):DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].downloads.push({name:p,url:i,desc:h,type:"html",boxTitle:l});else DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].downloads.push({name:p,url:i,desc:h,type:"txt",boxTitle:l});else DAB.View.currentResults.entries[DAB.View.currentResults.resultCount].downloads.push({name:p,url:i,desc:h,type:"pdf",boxTitle:l})}),DAB.View.drillDownSearch)g="drilldown";else var g="main";o=DAB.View.concatDownloadButton("pdf",g,e,a),s=DAB.View.concatDownloadButton("txt",g,e,a),l=DAB.View.concatDownloadButton("html",g,e,a),n=DAB.View.concatDownloadButton("img",g,e,a),c=DAB.View.concatDownloadButton("xml",g,e,a),buttonWCS=DAB.View.concatDownloadButton("wcs",g,e,a),m=DAB.View.concatDownloadButton("kml",g,e,a),h=DAB.View.concatDownloadButton("kmz",g,e,a),d=DAB.View.concatDownloadButton("other",g,e,a);var v=$.grep(DAB.View.currentResults.entries[e].downloads,function(t){return"link"==t.type});if(p="",v.length>1?p="<button class='link linkBox' title='Links' onclick='"+DAB.View.parseOnclickFunction("DAB.View.concatDownloadBox",["link",g,e,a])+"' data-type='linkBox_"+e+"'></button>":1==v.length&&(p="<button class='link' title='Link' onclick='"+DAB.View.parseOnclickFunction("DAB.View.download",[escape(v[0].url),DAB.View.encodeHtmlFromXml(a)])+"'></button>"),u="<button class='map' title='Layers' disabled></button>",DAB.View.currentResults.entries[e].layers.length&&(u="<button class='map map_"+e+"' title='Layers' onclick='"+DAB.View.parseOnclickFunction("DAB.View.concatLayerBox",[g,e,a])+"'></button>"),o||c||s||n||l||d||buttonWCS||m||h)f="<button class='download' title='Downloads' value='"+t.find("id").text()+"'></button>";else var f="<button class='download' title='Downloads' disabled value='"+t.find("id").text()+"'></button>";var w="",b=mergeBoxes(DAB.View.getBoundingBoxes(t));if(b){var x=b[0],y=b[1],k=b[2];w=y+" "+x+" "+b[3]+" "+k}if(GWP){var S=t.find("id").text(),C="add",A="Add as bookmark";for(i=MyWorkspace.BookmarkedResults.length;i>=0;i--)S==MyWorkspace.BookmarkedResults[i]&&(C="remove",A="Remove from bookmarks")}return"<div class='results-icons'><div class='red-icons'>\t<button class='info' title='More information' value='"+t.find("id").text()+"'></button>   <button class='add_map' "+(w?"":"disabled ")+"title='Show on map' value='"+w+"' onclick='centerMapOnEntry(\""+w+'", "add_map", "'+t.find("id").text()+"\" )'></button>\t<button class='more-links'></button>"+(GWP?"<button class='bookmark-button "+C+"' "+(Liferay.ThemeDisplay.isSignedIn()?"":"disabled ")+"title='"+A+"' type='button'></button>":"")+r+"</div><div class='orange-icons'>\t<div class='wrap-orange-icons'>   \t<div>"+f+"       \t<div class='details-download'>           \t<div>"+o+c+s+l+n+buttonWCS+m+h+d+"\t\t\t\t</div>\t\t\t</div>\t\t</div>\t</div>"+u+p+(GWP?"\t\t<button class='share' title='Share'></button>":"")+(GWP?"  \t<button class='like' disabled title='Social media' onclick=\"LikeFunction()\"></button>":"")+"</div><hr class='clear' /></div><div class='orange-icons-black'/>"},addLayerToBoxLayers:function(t){var e=$(t).attr("data-value"),a=$(t).attr("data-format"),i=$(t).attr("id")+"X",r=$(t).closest(".black2.wms").attr("class"),o=r.indexOf("show_");o>-1&&(r=(r=r.substring(o+5,o.length)).replace("active","").trim());var s=$(".add_map.showWmsOnMap_"+r).closest(".result-text").find(".resultboxtext span").html(),l=$(".add_map.showWmsOnMap_"+r).siblings(".info").attr("value"),n=$(".add_map.showWmsOnMap_"+r).attr("value"),c=$(".add_map.showWmsOnMap_"+r).prop("disabled"),d=$(t).attr("namelayer");0==$('.inner-layer-box input[data-value="'+e+'"]').length&&($(".inner-layer-box").append('<div data-value="'+i+"_"+e+'"><div class="checkbox-decoration"><input type="checkbox" id="'+i+"_"+e+'" checked="checked" data-value="'+e+'" data-format="'+a+'" data_organisation="'+s+'" data_uuid="'+l+'" data_coords="'+n+'"><label for="'+i+"_"+e+'">'+d+'</label><div class="wrap-buttons"><span class="closex" title="remove layer"></span><span class="goToMap'+(c?" disabled":"")+'" title="show on map" data-nr="'+r+'" ></span></div><div class="box-layer-opacity"><span>Layer opacity: 100%</span><div id="layer-opacity-slider"></div></div></div></div><hr class="clear" />'),$('.inner-layer-box input[data-value="'+e+'"]').prop("checked",!1),$('.inner-layer-box div[data-value="'+i+"_"+e+'"] #layer-opacity-slider').slider({value:100,slide:function(t,e){$(this).siblings("span").text("Layer opacity: "+e.value+"%"),setLayerOpacity($(this).parent().siblings("input:checkbox").attr("data-value"),e.value/100)}}))},metadataGenerator:function(t,e,a){var i="";$(DAB.View.gdata).find("gmd\\:MD_Keywords gmd\\:keyword gco\\:CharacterString").each(function(){i+=$(this).text()+"<br/>"});var r=DAB.View.generateResourceMetadatLinks($(DAB.View.gdata)),o="",s=mergeBoxes(a);s&&(o=coordinatesForPresentation(s));var l=$(t.find("gmd\\:graphicOverview gmd\\:MD_BrowseGraphic gmd\\:fileName gco\\:CharacterString")[0]).text();if(null!=l&&l.length>0)n='\t\t\t <div class="result-images">\t\t\t    <div class="image">\t\t\t\t\t<a target="_blank" href = "'+l+'">       \t\t\t\t<img src="'+l+'" alt="Resource preview not available" class="big-image">\t\t\t\t\t</a>\t\t\t\t</div>\t\t\t</div>';else var n="";return'<div class="resource-details-wrapper"><div class="top-strip"><span class="title">Resources details</span><a class="link" href="http://www.geoportal.org/geoportal/vrd?uuid='+e+'" target="_blank">Show Raw Metadata</a><button class="close-popup glyphicon" title="close"></button>            </div><div class="popups resource-detais">        <div class="main-desc">            <span class="rs-title">'+$(t).find("gmd\\:MD_DataIdentification gmd\\:citation gmd\\:CI_Citation gmd\\:title > gco\\:CharacterString").text()+"</span><br/>            <br/>"+n+$(t).find("gmd\\:abstract gco\\:CharacterString").text()+'            </div>                <div class="info">            <div class="col-sm-6">            <b>Contact information</b><br/><b>Contributor:</b>'+$(DAB.View.gdata).find("gmi\\:MI_Metadata > gmd\\:contact gmd\\:CI_ResponsibleParty gmd\\:individualName gco\\:CharacterString").text()+"<br/>        <b>Delivery point: </b> "+$(DAB.View.gdata).find("gmi\\:MI_Metadata > gmd\\:contact gmd\\:CI_ResponsibleParty gmd\\:contactInfo gmd\\:deliveryPoint gco\\:CharacterString").text()+"<br/>        <b>City: </b>"+$(DAB.View.gdata).find("gmi\\:MI_Metadata > gmd\\:contact gmd\\:CI_ResponsibleParty gmd\\:contactInfo gmd\\:city gco\\:CharacterString").text()+"<br/>        <b>Postal Code: </b>"+$(DAB.View.gdata).find("gmi\\:MI_Metadata > gmd\\:contact gmd\\:CI_ResponsibleParty gmd\\:contactInfo gmd\\:postalcode gco\\:CharacterString").text()+"<br/>        <b>Country:</b> "+$(DAB.View.gdata).find("gmi\\:MI_Metadata > gmd\\:contact gmd\\:CI_ResponsibleParty gmd\\:contactInfo gmd\\:country gco\\:CharacterString").text()+"<br/>        <b>E-mail address:</b> "+$(DAB.View.gdata).find("gmi\\:MI_Metadata > gmd\\:contact gmd\\:CI_ResponsibleParty gmd\\:contactInfo gmd\\:electronicMailAddress gco\\:CharacterString").text()+"<br/>        <b>Organization name:</b> "+$(DAB.View.gdata).find("gmi\\:MI_Metadata > gmd\\:contact gmd\\:CI_ResponsibleParty  gmd\\:organisationName gco\\:CharacterString").text()+"<br/>        <b>Role:</b> "+$(DAB.View.gdata).find("gmi\\:MI_Metadata > gmd\\:contact gmd\\:CI_ResponsibleParty > gmd\\:role gmd\\:CI_RoleCode").text()+'        </div>        <div class="col-sm-6">            <b>Data identification</b><br/>        <b>File identifier:</b> '+$(DAB.View.gdata).find("gmi\\:MI_Metadata > gmd\\:fileIdentifier gco\\:CharacterString").text()+"<br/>        <b>Parent identifier:</b> "+$(DAB.View.gdata).find("gmi\\:MI_Metadata > gmd\\:parentIdentifier gco\\:CharacterString").text()+"<br/>        <b>Hierarchy level:</b> "+$(DAB.View.gdata).find("gmi\\:MI_Metadata > gmd\\:hierarchyLevelName gco\\:CharacterString").text()+"<br/>        <b>Date stamp:</b> "+$(DAB.View.gdata).find("gmi\\:MI_Metadata > gmd\\:datestamp gco\\:Date").text()+"<br/>        <b>Date language:</b> "+$(DAB.View.gdata).find("gmi\\:MI_Metadata > gmd\\:language gco\\:CharacterString").text()+'<br/>        </div>        <hr class="clear"/>            </div>            <div class="main-desc">            <br/><br/><span class="rs-title">Descriptive keywords</span><br/>        <br/>'+i+'</div>        <div class="info2">            <div class="col-sm-6">            <b>Bounding Rectangle:</b> '+o+'        </div>        <div class="col-sm-6">            <b>Temporal Extent:</b>Start ('+$(DAB.View.gdata).find("gmd\\:EX_TemporalExtent gml\\:begin gml\\:timePosition").text()+")End ("+$(DAB.View.gdata).find("gmd\\:EX_TemporalExtent gml\\:end gml\\:timePosition").text()+')        </div>        <hr class="clear"/>            </div>            <div id="infoMap" class="infoMap" tabindex="0"></div><div class="main-desc downloads"><span class="rs-title">Online Resources</span><hr class="clear"/>'+r+'<hr class="clear"/>        </div><hr class="clear"/>           </div></div>'},satelliteMetadataGenerator:function(t){var e=DAB.View.generateResourceMetadatLinks(t),a="",i="",r="",o=mergeBoxes(DAB.View.getBoundingBoxes(t));o&&(r=coordinatesForPresentation(o)),satelliteParamsForRBox.forEach(function(e){satelliteParamsForRBoxParams[e],satelliteParamsForRBoxParams[e][2]&&satelliteParamsForRBoxParams[e][3]?a+="<b>"+satelliteParamsForRBoxParams[e][0]+": </b>"+t.find(e).text()+"<br/>":(value=t.find(e).text(),""!=value&&(i+="<b>"+satelliteParamsForRBoxParams[e][0]+": </b>"+value+"<br/>"))});var s=t.find("atom\\:logo").text();if(null!=s&&s.length>0)l='\t\t\t <div class="result-images satellite">\t\t\t    <div class="image">\t\t\t\t\t<a target="_blank" href = "'+s+'">       \t\t\t\t<img src="'+s+'" alt="Resource preview not available" class="big-image">\t\t\t\t\t</a>\t\t\t\t</div>\t\t\t</div>';else var l="";return'<div class="resource-details-wrapper"><div class="top-strip"><span class="title">Resources details</span> <button class="close-popup glyphicon" title="close"></button>            </div><div class="popups resource-detais">        <div class="main-desc">'+l+'\t\t <span class="rs-title">'+t.find("title").text()+'</span>        </div>        <div class="info">            <div class="col-sm-6">            <b>General info</b><br/>'+a+'        </div>        <div class="col-sm-6">            <b>Scene parameters</b><br/>'+i+'        </div>        <hr class="clear"/>            </div>            <div class="main-desc">            <span class="rs-title">Descriptive keywords</span><br/>        <br/></div>        <div class="info2">            <div class="col-sm-6">            <b>Bounding Rectangle:</b> '+r+'        </div>        <hr class="clear"/>            </div>            <div id="infoMap" class="infoMap" tabindex="0"></div><div class="main-desc downloads"><span class="rs-title">Online Resources</span><hr class="clear"/>'+e+'        </div><hr class="clear"/>           </div></div>'},generateResourceMetadatLinks:function(t){var e=t.find("id").text(),a=[],i=[],r=[],o=[],s=[],l=[],n=[],c=[];DAB.View.extractResourceLinks(t,a,i,r,r,o,s,l,n,c);var d="";if(a.length>1){for(var u="",p=0;p<a.length;p++)u+='<li><a href="'+a[p].linkText+'" class="link">'+a[p].linkTitle+"</a><br/><span>"+a[p].linkDescription+"</span></li>";d+='<hr class="clear"/><span class="section"><img src="'+Geoss.imagesLocation+'images/img/popups/m-link.png" alt=""/>PDF</span><ul>'+u+"</ul>"}if(i.length>1){for(var u="",p=0;p<i.length;p++)u+='<li><a href="'+i[p].linkText+'" class="link">'+i[p].linkTitle+"</a><br/><span>"+i[p].linkDescription+"</span></li>";d+='<hr class="clear"/><span class="section"><img src="'+Geoss.imagesLocation+'images/img/popups/m-link.png" alt=""/>Text</span><ul>'+u+"</ul>"}if(r.length>1){for(var u="",p=0;p<r.length;p++)u+='<li><a href="'+r[p].linkText+'" class="link">'+r[p].linkTitle+"</a><br/><span>"+r[p].linkDescription+"</span></li>";d+='<hr class="clear"/><span class="section"><img src="'+Geoss.imagesLocation+'images/img/popups/m-link.png" alt=""/>Hyperlinks</span><ul>'+u+"</ul>"}if(o.length>1){for(var u="",p=0;p<o.length;p++)u+='<li><a href="'+o[p].linkText+'" class="link">'+o[p].linkTitle+"</a><br/><span>"+o[p].linkDescription+"</span></li>";d+='<hr class="clear"/><span class="section"><img src="'+Geoss.imagesLocation+'images/img/popups/m-link.png" alt=""/>Image</span><ul>'+u+"</ul>"}if(s.length>1){for(var u="",p=0;p<s.length;p++)u+='<li><a href="'+s[p].linkText+'" class="link">'+s[p].linkTitle+"</a><br/><span>"+s[p].linkDescription+"</span></li>";d+='<hr class="clear"/><span class="section"><img src="'+Geoss.imagesLocation+'images/img/popups/m-link.png" alt=""/>XML</span><ul>'+u+"</ul>"}if(l.length>0){for(var u="",p=0;p<l.length;p++)u+="<li><a href='javascript:void(0);' onclick='"+DAB.View.parseOnclickFunction("DAB.View.download",[escape(l[p].linkText),DAB.View.encodeHtmlFromXml(e)])+"' class='link'>"+l[p].linkTitle+"</a><br/><span>"+l[p].linkDescription+"</span></li>";d+='<hr class="clear"/><span class="section"><img src="'+Geoss.imagesLocation+'images/img/popups/m-link.png" alt=""/>Other</span><ul>'+u+"</ul>"}if(n.length>1||c.length>1){u="";if(n.length>1)for(p=0;p<n.length;p++)u+='<li class="col-sm-12"><a href="'+n[p].linkText+'" class="link">'+n[p].linkTitle+'</a><br/><img class="layer" alt="Preview not available" src="'+n[p].linkText.replace("${z}","0").replace("${x}","0").replace("${y}","0")+'"></li>';if(c.length>1)for(p=0;p<c.length;p++)u+='<li class="col-sm-12"><a href="'+c[p].linkText+'" class="link">'+c[p].linkTitle+'</a><br/><img class="layer" alt="Preview not available" src="'+c[p].linkText.replace("${z}","0").replace("${x}","0").replace("${y}","0")+'"></li>';d+='<hr class="clear"/><span class="section"><img src="'+Geoss.imagesLocation+'images/img/popups/m-link.png" alt=""/>WMS/TMS</span><ul>'+u+"</ul>"}return d},extractResourceLinks:function(t,e,a,i,i,r,o,s,l,n){t.find("gmd\\:onLine gmd\\:CI_OnlineResource gmd\\:linkage gmd\\:URL").each(function(t,c){var d=$(c).text(),u=$(c).closest("gmd\\:onLine").find("gmd\\:name gco\\:characterstring").text(),p=$(c).closest("gmd\\:onLine").find("gmd\\:function gmd\\:ci_onlinefunctioncode").text(),m=$(c).find("title").text();0==u.length&&(u=0!=p.length?p:m);var h=$(c).closest("gmd\\:onLine").find("gmd\\:description gco\\:characterstring").text(),g=$(c).closest("gmd\\:onLine").find("gmd\\:name gco\\:characterstring").text(),v="",f=$(c).closest("entry").find("title").text(),w=$(c).closest("gmd\\:onLine").find("gmd\\:protocol gco\\:characterstring").text();if(void 0==(v=$(this).closest("gmd\\:ci_onlineresource").find("gmd\\:description").html())&&(v=""),""==h&&""!=g&&(h=g),d.lastIndexOf(".pdf")>-1&&!(v.indexOf("complex")>0)&&""!=d)".pdf"==d.substr(d.length-4)&&e.push({linkText:d,linkTitle:u,linkDescription:h,titleBox:m});else if(d.lastIndexOf(".txt")>-1&&!(v.indexOf("complex")>0)&&""!=d)".txt"==d.substr(d.length-4)&&a.push({linkText:d,linkTitle:u,linkDescription:h,titleBox:m});else if(!(d.lastIndexOf(".html")>-1||d.lastIndexOf(".shtml")>-1)||v.indexOf("complex")>0||""==d)if(!(d.lastIndexOf(".jpg")>-1||d.lastIndexOf(".png")>-1)||-1!=d.indexOf("tile")||v.indexOf("simple")>0||""==d){if(d.lastIndexOf(".xml")>-1&&!(v.indexOf("simple")>0)&&""!=d)".xml"==d.substr(d.length-4)&&o.push({linkText:d,linkTitle:u,linkDescription:h,titleBox:m});else if(w.indexOf("WebMapService")>-1&&""!=d){var b=$(this).closest("entry").find("atom\\:logo").text(),x=d,y=f,k=$(this).closest("gmd\\:ci_onlineresource").find("gmd\\:name gco\\:characterstring").text(),S=$(this).closest("gmd\\:ci_onlineresource").find("gmd\\:protocol gco\\:characterstring").text(),C="1.0";if(S.indexOf("1.1.1")>0?C="1.1.1":S.indexOf("1.1.0")>0&&(C="1.1.0"),void 0!=v)if(v.indexOf("simple")>-1)A="simple";else if(v.indexOf("complex")>-1)var A="complex";void 0!=v&&v.indexOf("anchor")>-1&&(v.indexOf("simple")>-1||v.indexOf("complex")>-1)&&l.push({linkText:d,wmsImg:b,url:x,name:k,version:C,anchor:A,allName:y})}else if(w.indexOf("TiledMapService")>-1&&!(v.indexOf("complex")>0)&&""!=d){var D=$(this).closest("gmd\\:ci_onlineresource").find("gmd\\:name gco\\:characterstring").text(),b=$(this).closest("entry").find("atom\\:logo").text();n.push({linkText:d,linkTitle:u,wmsImg:b,LAYERS:D})}else if(!(v.indexOf("complex")>0||d.indexOf("WMS")>-1||d.indexOf("wms")>-1||d.indexOf("WCS")>-1||d.indexOf("wcs")>-1||d.indexOf("TMS")>-1||d.indexOf("tms")>-1||w.indexOf("WWW:LINK-1.0-http--link")>-1||""==d)){d.substr(d.length-1);s.push({linkText:d,linkTitle:u,linkDescription:h,titleBox:m})}}else{var B=d.substr(d.length-4),M=d.substr(d.length-4);(".jpg"==B||".png"==M&&-1==d.indexOf("tile"))&&r.push({linkText:d,linkTitle:u,linkDescription:h,titleBox:m})}else{var R=d.substr(d.length-5),_=d.substr(d.length-6);".html"!=R&&".shtml"!=_||i.push({linkText:d,linkTitle:u,linkDescription:h,titleBox:m})}})},reloadFilters:function(){$(".row-result-form .show-result .filters .single-select").multiselect({onChange:function(t,e,a){""!=$(t).val()?$(t).closest(".filters").addClass("notEmpty"):$(t).closest(".filters").removeClass("notEmpty"),chooseFilteringIcon(),Geoss.actionBeforeRequest(),DAB.Facade.filterQuery(readSearchForm(!0,!0)),DAB.View.setFacetedTitles()}})},reloadGranulaFilters:function(t){$("#granula-filters-set > ."+t+"-select > select").multiselect({onChange:function(t,e,a){Geoss.actionBeforeRequest(),DAB.View.clearPagination(),DAB.Facade.drillDown(DAB.View.drilledDownEntry)}})},clearResults:function(){$(".row-result-form .number-result .number-results").text(0),$(".inner-pagination-container .numbers-pagination").text(),$(".wrap-result-list .result-rows").children().remove(),$(".result-wrap").scrollTop(1),$(Geoss.popupsContainer).find(".black").remove()},parseOnclickFunction:function(t,e){var a=t+"(";return $.each(e,function(t,e){a+='"'+e+'",'}),a=a.slice(0,-1),a+=")"},doesResourceExist:function(t,e){$.ajax({url:SearchEngine.getLinkStatusUrl(t),type:"GET",datatype:"JSON",success:function(a){"object"==typeof a&&String(a.result)&&LogStore.logResourceError(null,e,t,"Attempting to access resource",a.result,a.resultDetails)},error:function(t){console.log("AJAX request failed.")}})},checkLayerFile:function(t,e,a){$.ajax({url:SearchEngine.getCheckLayerFileUrl(t,a),type:"GET",datatype:"JSON",success:function(i){"object"==typeof i?0==String(i.result).localeCompare("true")&&0==a.localeCompare("kml")?(layer=createKML(t),Geoss.addLayerCallback(layer,$(e))):0==a.localeCompare("kml")?(String(i.resultDetails)?GeossUtil.showMessage("ERROR ADDING LAYER","Can not add file type kml to map layer, because it is error: "+String(i.resultDetails)+'. However, the file can be downloaded <a href = "'+t+'" target="_blank">here</a>.'):GeossUtil.showMessage("ERROR ADDING LAYER",'Can not add file type kml to map layer, because the file is too big. However, the file can be downloaded <a href = "'+t+'" target="_blank">here</a>.'),$(e).attr("checked",!1)):0==String(i.result).localeCompare("true")&&0==a.localeCompare("kmz")?(layer=createKMZ(t),Geoss.addLayerCallback(layer,$(e))):0==a.localeCompare("kmz")&&(String(i.resultDetails)?GeossUtil.showMessage("ERROR ADDING LAYER","Can not add file type kmz to map layer, because it is error: "+String(i.resultDetails)+'. However, the file can be downloaded <a href = "'+t+'" target="_blank">here</a>.'):GeossUtil.showMessage("ERROR ADDING LAYER",'Can not add file type kmz to map layer, because the file is too big. However, the file can be downloaded <a href = "'+t+'" target="_blank">here</a>.'),$(e).attr("checked",!1)):console.log("AJAX request failed. Error in checkLayerFile.")},error:function(t){console.log("AJAX request failed. Error in checkLayerFile.",t)}})},loadCatalogsAndViews:function(t,e){$.ajax({url:SearchEngine.getCatalogsAndViewsUrl(t),type:"GET",datatype:"JSON",crossDomain:!0,success:function(t){if("object"==typeof t){var a="",i="";$.each(t.catalogs,function(t,e){a+='<option value="'+e.value+'" title="'+e.title+'">'+e.label+"</option>"}),$.each(t.views,function(t,e){i+='<option class="'+e.title.toLowerCase().replace(/\s+/g,"-")+'" value="'+e.value+'" title="'+e.title+'">'+e.label+"</option>"}),$(".row-form-search .type-select select").append(a),$(".row-form-search .views-select select").append(i),init_custom_selects()}else console.log("AJAX request failed. Error in loadCatalogsAndViews.");e()},error:function(t){console.log("AJAX request failed. Error in loadCatalogsAndViews.",t),e()}})},download:function(t,e){var a=DAB.View.decodeHtmlOnXml(e),i=unescape(t);if(GWP&&i.indexOf("/dhus/odata/")>=0){var r=SearchEngine.getDhusProxyUrl(i);if(Liferay.ThemeDisplay.isSignedIn()&&MyWorkspace.Settings.settingsDhusUsername)window.open(r);else{var o=Cookies.get("dhus_username"),s=Cookies.get("dhus_password");o&&s?($(".dhus-download .dhus-username").val(o),$(".dhus-download .dhus-password").val(s),$(".dhus-download button.button_save").prop("disabled",!1)):($(".dhus-download .dhus-username").val(""),$(".dhus-download .dhus-password").val(""),$(".dhus-download button.button_save").prop("disabled",!0)),$(".dhus-download form").attr("action",r),$(".black.dhus-download").show()}}else window.open(i);DAB.View.doesResourceExist(i,a)},reloadGranulaData:function(){Geoss.actionBeforeRequest(),DAB.View.clearPagination(),DAB.Facade.drillDown(DAB.View.drilledDownEntry)},reloadSliders:function(){$("#cloudcp-slider-range").attr("data-value","0-70"),$("#cloudcp-slider-range").slider({range:!0,min:0,max:100,values:[0,70],slide:function(t,e){$("#amount").val("$"+e.values[0]+" - $"+e.values[1]),$("div.box_cloudcp > label").text("Cloud coverage: "+e.values[0]+"-"+e.values[1]+"%")},change:function(t,e){},stop:function(t,e){e.values[0]+"-"+e.values[1]!=$("#cloudcp-slider-range").attr("data-value")&&(DAB.View.reloadGranulaData(),$("#cloudcp-slider-range").attr("data-value",e.values[0]+"-"+e.values[1]))}}),$("#cloudcp").val("$"+$("#cloudcp-slider-range").slider("values",0)+" - $"+$("#cloudcp-slider-range").slider("values",1)),$("div.box_cloudcp > label").text("Cloud coverage: 0-70%")},clearPagination:function(){DAB.View.currentResults&&(DAB.View.currentResults.startIndex=1),$(".inner-pagination-container span.next").removeClass("disabled"),$(".inner-pagination-container span.prev").addClass("disabled"),$(".inner-pagination-container .numbers-pagination").text("")},isIrisSearch:function(){return"UUID-e101622c-6ae1-4b68-bfea-8acf067e31dd"==(void 0===searchFormAttributes.queryParams?"":searchFormAttributes.queryParams.value.sources)},initIrisFilters:function(){$(".row-result-form .show-result .iris-filters .single-select").multiselect({onChange:function(t,e,a){""!=$(t).val()?$(t).closest(".iris-filters").addClass("notEmpty"):$(t).closest(".iris-filters").removeClass("notEmpty"),chooseFilteringIcon(),Geoss.actionBeforeRequest(),DAB.Facade.filterQuery(readSearchForm(!0,!0))}});$("#mag-slider-range").attr("data-value","0-10"),$("#mag-slider-range").slider({range:!0,min:0,max:10,values:[0,10],slide:function(t,e){$("div.box-mag > span").text("Magnitude limit: "+e.values[0]+"-"+e.values[1])},stop:function(t,e){e.values[0]+"-"+e.values[1]!=$("#mag-slider-range").attr("data-value")&&($("div.box-mag").closest(".iris-filters").addClass("notEmpty"),chooseFilteringIcon(),Geoss.actionBeforeRequest(),DAB.Facade.filterQuery(readSearchForm(!0,!0)),$("#mag-slider-range").attr("data-value",e.values[0]+"-"+e.values[1]))}}),$("div.box-mag > span").text("Magnitude limit: 0-10");$("#depth-slider-range").attr("data-value","0-100"),$("#depth-slider-range").slider({range:!0,min:0,max:100,values:[0,100],slide:function(t,e){$("div.box-depth > span").text("Depth: "+e.values[0]+"-"+e.values[1]+" KM")},stop:function(t,e){e.values[0]+"-"+e.values[1]!=$("#depth-slider-range").attr("data-value")&&($("div.box-depth").closest(".iris-filters").addClass("notEmpty"),chooseFilteringIcon(),Geoss.actionBeforeRequest(),DAB.Facade.filterQuery(readSearchForm(!0,!0)),$("#depth-slider-range").attr("data-value",e.values[0]+"-"+e.values[1]))}}),$("div.box-depth > span").text("Depth: 0-100 KM")},showIrisFilters:function(){if($(".iris-filters .multiselect").length||DAB.View.initIrisFilters(),$(".row-result-form .iris-filters").addClass("active"),$(".row-result-form .iris-filters").show(),AOIAction=function(){Geoss.actionBeforeRequest(),DAB.Facade.filterQuery(readSearchForm(!0,!0))},$(".row-form-search .date #date-from").val())$(".iris-filters .date #date-from-iris").val($(".row-form-search .date #date-from").val()),irisDateFrom=$(".row-form-search .date #date-from").val();else{var t=DAB.View.getDefaultIrisFromDate();$(".row-form-search .date #date-from").val(t),$(".iris-filters .date #date-from-iris").val(t),irisDateFrom=t}$(".iris-filters .date #date-to-iris").val($(".row-form-search .date #date-to").val()),irisDateTo=$(".row-form-search .date #date-to").val()},hideIrisFilters:function(){if($(".iris-filters .multiselect").length){$(".row-result-form .show-result .iris-filters .single-select").multiselect("select",""),$(".row-result-form .show-result .iris-filters .single-select").multiselect("refresh");$("#mag-slider-range").slider("values",[0,10]),$("#mag-slider-range").attr("data-value","0-10"),$("div.box-mag > span").text("Magnitude limit: 0-10");$("#depth-slider-range").slider("values",[0,100]),$("#depth-slider-range").attr("data-value","0-100"),$("div.box-depth > span").text("Depth: 0-100 KM"),$(".iris-filters .date #date-from-iris").val(""),$(".iris-filters .date #date-to-iris").val(""),irisDateFrom="",irisDateTo=""}$(".row-result-form .iris-filters").removeClass("active"),$(".row-result-form .iris-filters").removeClass("notEmpty").hide()},getDefaultIrisFromDate:function(){var t=new Date;return t.setDate(t.getDate()-30),GeossUtil.formatDate(t)},displayRatings:function(){var t=$(".list-result:not(:has(.rating .jq-ry-container))");t.each(function(){$(this).find(".rating").append('<div class="rating-average" title="Rate resource">\t<div class="rating-stars"/>\t<span class="rating-value">0</span></div><div class="rating-users" title="Show comments">\t<div class="rating-users-img"/>\t<span class="rating-users-number">0</span></div>'),$(this).find(".rating .rating-stars").rateYo({starWidth:"12px",normalFill:"#CCCCCC",ratedFill:"#E8B012",rating:0,readOnly:!0})});var e=t.map(function(){return $(this).data("target-id")}).get().join();$.ajax({url:SearchEngine.getGetRatingsUrl(e),type:"GET",datatype:"JSON",success:function(t){"object"==typeof t?$.each(t.stats,function(t,e){$(".list-result").each(function(){$(this).data("target-id")==e.targetId&&($(this).find(".rating .rating-value").text(Number(e.averageScore).toFixed(1)),$(this).find(".rating .rating-users-number").text(e.totalEntries),$(this).find(".rating .rating-stars").rateYo("rating",e.averageScore),$(this).find(".rating").attr("data-score",e.score).attr("data-comment",e.comment),$(this).find(".rating .rating-you").remove(),e.score&&e.score>0&&$(this).find(".rating").append('<div class="rating-you" title="Rate resource">You: '+e.score+"</div>"))})}):console.log("Failed to get ratings: ",t)},error:function(t){console.log("Failed to get ratings",t)}}),t.find(".rating .rating-users").click(function(){var t=$(this).closest(".list-result").data("target-id");$.ajax({url:SearchEngine.getGetCommentsUrl(t),type:"GET",datatype:"JSON",success:function(t){if("object"==typeof t){var e="";t.entries.length>0?$.each(t.entries,function(t,a){e+='<li class="ratings-popup-item-'+t+'">\t<div class="ratings-popup-stars"/>\t<div class="ratings-popup-comment">'+a.comment+"</div></li>"}):e+="<li>This resource has not been commented yet.</li>";var a='<div class="black black2 ratings-popup" onclick="hidePopupFunction(event)">\t<div class="popups resource-show">\t\t<div class="top-strip">Resource comments \t\t\t<button class="close-popup glyphicon" title="close"></button>\t\t</div>\t\t<ul class="results">'+e+"</ul>\t</div></div>";$(".black.ratings-popup").remove(),$(Geoss.popupsContainer).append(a),$(".black.ratings-popup .close-popup").click(function(){$(".black.ratings-popup").removeClass("active").hide()}),$.each(t.entries,function(t,e){$(".ratings-popup-item-"+t+" .ratings-popup-stars").rateYo({starWidth:"20px",normalFill:"#CCCCCC",ratedFill:"#E8B012",rating:e.score,readOnly:!0})}),$(".ratings-popup").show().addClass("active"),GWP&&$("html").hasClass("with-map")&&GeossUtil.handleDragAndResize($(".black .popups.resource-show"),".results")}else console.log("Failed to get comments: ",t),GeossUtil.showMessage("RATING ERROR","An error has occurred when saving your rating.")},error:function(t){console.log("Failed to get comments:",t),GeossUtil.showMessage("RATING ERROR","An error has occurred when saving your rating.")}})}),t.find(".rating").on("click",".rating-average, .rating-you",function(){var t=$(this).closest(".list-result").data("target-id"),e=$(this).closest(".list-result").find(".result-title").text(),a=$(this).closest(".rating").attr("data-score");a||(a=0);var i=$(this).closest(".rating").attr("data-comment");i||(i="");var r=null,o='<div class="black black2 add-rating-popup" onclick="hidePopupFunction(event)">\t<div class="popups resource-show">\t\t<div class="top-strip">Rate resource \t\t\t<button class="close-popup glyphicon" title="close"></button>\t\t</div>\t\t<div class="content">'+(r=GWP&&Liferay.ThemeDisplay.isSignedIn()?'<div class="title">Comment</div><div class="clearfix"></div><textarea class="resource-comment" name="resource-comment" maxlength="4000">'+i+'</textarea><div class="clearfix"></div>':GWP?'<div class="title">Comment</div><div class="clearfix"></div><textarea class="resource-comment" name="resource-comment" maxlength="4000" \tdisabled title="Guest users can only rate. Sign-in to comment."/><div class="clearfix"></div>':"")+'\t\t\t<div class="title">Rating:</div>\t\t\t<div class="clearfix"></div>\t\t\t<div class="add-rating-popup-stars-wrap">\t\t\t\t<div class="add-rating-popup-stars"/>\t\t\t\t<button class="btn btn-primary button-send-rating" type="button" disabled>Send</button>\t\t\t</div>\t\t\t<hr class="clear">\t\t</div>\t</div></div>';$(".black.add-rating-popup").remove(),$(Geoss.popupsContainer).append(o),$(".add-rating-popup .button-send-rating").attr("data-target-id",t),$(".add-rating-popup .button-send-rating").attr("data-target-title",e),$(".add-rating-popup .add-rating-popup-stars").rateYo({starWidth:"20px",normalFill:"#CCCCCC",ratedFill:"#E8B012",fullStar:!0,rating:a,onSet:function(t,e){$(".add-rating-popup .button-send-rating").prop("disabled",!1)}}),$(".black.add-rating-popup .close-popup").click(function(){$(".black.add-rating-popup").hide()}),$(".black.add-rating-popup .resource-comment").on("input",function(){$(".add-rating-popup .add-rating-popup-stars").rateYo("rating")>0&&$(".add-rating-popup .button-send-rating").prop("disabled",!1)}),$(".black.add-rating-popup .button-send-rating").click(function(){var t=$(this).attr("data-target-id"),e=$(this).attr("data-target-title"),a=$(".add-rating-popup .add-rating-popup-stars").rateYo("rating"),i=$(".add-rating-popup .resource-comment").val();$.ajax({url:SearchEngine.getUpdateRatingUrl(t,e,a,i),type:"GET",datatype:"JSON",success:function(t){if("object"==typeof t){var e=t.stats[0];$(".list-result").each(function(){$(this).data("target-id")==e.targetId&&($(this).find(".rating .rating-value").text(Number(e.averageScore).toFixed(1)),$(this).find(".rating .rating-users-number").text(e.totalEntries),$(this).find(".rating .rating-stars").rateYo("rating",e.averageScore),$(this).find(".rating").attr("data-score",e.score).attr("data-comment",e.comment),$(this).find(".rating .rating-you").remove(),e.score&&e.score>0&&$(this).find(".rating").append('<div class="rating-you" title="Rate resource">You: '+e.score+"</div>"))})}else console.log("Failed to rate resource:",t),GeossUtil.showMessage("RATING ERROR","Failed to retrieve resource comments.");$(".black.add-rating-popup").removeClass("active").hide()},error:function(t){console.log("Failed to rate resource:",t),GeossUtil.showMessage("RATING ERROR","Failed to retrieve resource comments."),$(".black.add-rating-popup").removeClass("active").hide()}})}),$(".add-rating-popup").show().addClass("active"),GWP&&$("html").hasClass("with-map")&&GeossUtil.handleDragAndResize($(".black .popups.resource-show"),".content")})}},DAB.Control={callSearch:function(){DAB.View.clearResults(),DAB.Facade.queryBase(readSearchForm())},prepareFacetedQuery:function(){DAB.Control.prepareBaseQuery(readSearchForm(!0))},prepareDrillDownQuery:function(t){var e=DAB.Control.prepareBaseQuery(readSearchForm()).request().setParameter("parents",encodeURIComponent(t)).removeParameter("st"),a=DAB.View.queryablesForEntries[t];if(null!=a&&void 0!=a?(e.setParameter("ts",""),e.setParameter("te",""),DAB.Control.addSateliteTermFrequencyParameter(e,t,a),DAB.Control.addGranulaFiltersToRequest(e,a)):e.removeParameter("tf"),Object.keys(MyWorkspace.Search.filterParams).length>0){var i=Object.keys(MyWorkspace.Search.filterParams);"granula-filters"==MyWorkspace.Search.filterSet&&(i.indexOf("prodType")>=0&&e.setParameter("prodType",MyWorkspace.Search.filterParams.prodType),i.indexOf("sarPolCh")>=0&&e.setParameter("sarPolCh",MyWorkspace.Search.filterParams.sarPolCh),i.indexOf("sensorOpMode")>=0&&e.setParameter("sensorOpMode",MyWorkspace.Search.filterParams.sensorOpMode),i.indexOf("sensorSwath")>=0&&e.setParameter("sensorSwath",MyWorkspace.Search.filterParams.sensorSwath),i.indexOf("relOrbit")>=0&&e.setParameter("relOrbit",MyWorkspace.Search.filterParams.relOrbit),i.indexOf("row")>=0&&e.setParameter("row",MyWorkspace.Search.filterParams.row),i.indexOf("path")>=0&&e.setParameter("path",MyWorkspace.Search.filterParams.path),i.indexOf("cloudcp")>=0&&e.setParameter("cloudcp",MyWorkspace.Search.filterParams.cloudcp),i.indexOf("dateFromGranula")>=0&&e.setParameter("ts",MyWorkspace.Search.filterParams.dateFromGranula),i.indexOf("dateToGranula")>=0&&e.setParameter("te",MyWorkspace.Search.filterParams.dateToGranula))}return e},prepareBaseQuery:function(t){var e=new DAB.Client.SimpleXmlRequest(t.query);return t.viewid&&e.request().setParameter("viewid",t.viewid),t.ts&&e.request().setParameter("ts",t.ts),t.te&&e.request().setParameter("te",t.te),t.gdc&&e.request().setParameter("gdc",t.gdc),t.bbox&&e.request().setParameter("bbox",t.bbox),t.w3w&&e.request().setParameter("w3w",t.w3w),t.rel&&e.request().setParameter("rel",t.rel),t.magt&&e.request().setParameter("magt",t.magt),t.evtOrd&&e.request().setParameter("evtOrd",t.evtOrd),t.minmag&&e.request().setParameter("minmag",t.minmag),t.maxmag&&e.request().setParameter("maxmag",t.maxmag),t.mind&&e.request().setParameter("mind",t.mind),t.maxd&&e.request().setParameter("maxd",t.maxd),t.kwd&&e.request().setParameter("kwd",t.kwd),t.frmt&&e.request().setParameter("frmt",t.frmt),t.sources&&e.request().setParameter("sources",t.sources),t.prot&&e.request().setParameter("prot",t.prot),t.organisationName&&e.request().setParameter("organisationName",t.organisationName),t.si&&e.request().setParameter("si",t.si),e},addSateliteTermFrequencyParameter:function(t,e,a){var i="",r=!0;a.split(",").filter(function(t){return void 0!=DAB.View.enumGranulaFilterLabels[t]}).forEach(function(t){r||(i+=","),i+=t,r=!1}),t.setParameter("tf",i)},addGranulaFiltersToRequest:function(t,e){e.split(",").forEach(function(e){DAB.Control.tryToAddEnumGranulaFilterToRequest(e,t),DAB.Control.tryToAddContinousGranulaFilterToRequest(e,t),DAB.Control.tryToAddIntegerGranulaFilterToRequest(e,t)});var a=$(".granula-filters .date #date-from-granula").val();a&&t.setParameter("ts",a);var i=$(".granula-filters .date #date-to-granula").val();i&&t.setParameter("te",i)},tryToAddIntegerGranulaFilterToRequest:function(t,e){var a=$("#filter-"+t).val();void 0!=a&&null!=a&&e.setParameter(t,a)},tryToAddEnumGranulaFilterToRequest:function(t,e){var a=$(".granula-filters ."+t+"-select .active input").attr("value");void 0!=a&&null!=a&&e.setParameter(t,a)},tryToAddContinousGranulaFilterToRequest:function(t,e){try{var a=$("#"+t+"-slider-range").slider("values");if(null!=a&&2==a.length){var i=a[0],r=a[1];e.setParameter(t,"["+i+","+r+"]")}}catch(t){throw t}},prepareSingleResultQuery:function(t){return new DAB.Client.SingleResultXmlRequest(t)}},satelliteParamsForRBox=["acquisition platform","acquisition platformid","acquisition productType","gmd\\:distributionInfo gmd\\:transferSize gco\\:Real","acquisition instrument","acquisition relativeOrbit","acquisition cloud_cover_percentage","acquisition row","acquisition path","acquisition instrumentSwath","acquisition sensorPolarisation","acquisition acquisitiontype","acquisition missiondatatakeid","acquisition startOrbitNumber","acquisition stopOrbitNumber","acquisition orbitdirection","acquisition productclass","acquisition productconsolidation","acquisition stopRelativeOrbitNumber","acquisition slicenumber","acquisition status","acquisition processingbaseline","acquisition processinglevel","dtstart","dtstop"];var satelliteParamsForRBoxParams={"acquisition platform":["Platform",!0,!0,!0,null,null],"acquisition platformid":["Platform Id",!1,!0,!0,null,null],"acquisition productType":["Product type",!0,!0,!0,null,null],"gmd\\:distributionInfo gmd\\:transferSize gco\\:Real":["Size",!0,!0,!1,null,DAB.View.roundSizeMB],"acquisition instrument":["Instrument",!0,!0,!0,null,null],"acquisition relativeOrbit":["Relative orbit",!0,!0,!1,null,null],"acquisition cloud_cover_percentage":["Cloud coverage",!0,!0,!0,null,null],"acquisition row":["Row",!0,!1,!0,null,null],"acquisition path":["Path",!0,!1,!0,null,null],"acquisition instrumentSwath":["Instrument swath",!1,!0,!1,null,null],"acquisition sensorPolarisation":["Sensor polarisation",!1,!0,!1,null,null],"acquisition acquisitiontype":["Aquisition type",!1,!0,!1,null,null],"acquisition missiondatatakeid":["Mission data taken",!1,!0,!1,null,null],"acquisition startOrbitNumber":["Start orbit number",!1,!0,!1,null,null],"acquisition stopOrbitNumber":["Stop orbit number",!1,!0,!1,null,null],"acquisition orbitdirection":["Orbit direction",!1,!0,!1,null,null],"acquisition productclass":["Product class",!1,!0,!1,null,null],"acquisition productconsolidation":["Product consolidation",!1,!0,!1,null,null],"acquisition stopRelativeOrbitNumber":["Stop Relative orbit number",!1,!0,!1,null,null],"acquisition slicenumber":["Slice number",!1,!0,!1,null,null],"acquisition status":["Status",!1,!0,!1,null,null],"acquisition processingbaseline":["Processing baseline",!1,!0,!1,null,null],"acquisition processinglevel":["Processing level",!1,!0,!1,null,null],dtstart:["Daytime start",!0,!0,!0,"Collection start date",DAB.View.extractDate],dtstop:["Daytime stop",!0,!0,!0,"Collection stop date",DAB.View.extractDate]};DAB.Facade={view:DAB.View,control:DAB.Control,queryBase:function(t){try{DAB.Client.callOpenSearch(DAB.Facade.control.prepareBaseQuery(t),DAB.Facade.view.presentMainResults)}catch(t){console.error(t),LogStore.logResourceError("opensearch",null,null,null)}},drillDown:function(t){DAB.Client.callOpenSearch(DAB.Facade.control.prepareDrillDownQuery(t),DAB.Facade.view.presentDrillDownResults)},filterQuery:function(t){DAB.Client.callOpenSearch(DAB.Facade.control.prepareBaseQuery(t),DAB.Facade.view.presentMainResults)},querySingleResult:function(t){DAB.View.clearResults(),DAB.Client.callOpenSearch(DAB.Facade.control.prepareSingleResultQuery(t),DAB.Facade.view.presentMainResults)},getMetadata:function(t){DAB.Client.getMetadata(t,DAB.Facade.view.presentMetadata)}};var stopQueryTriggered=!1;$("html").on("click",".black.black2 .close-popup",function(){$(".black.black2").hide().removeClass("active")}),$("html").on("click",".black.black4 .close-popup",function(){$(".black.black4").removeClass("active").hide()}),$("body").on("click",".black.saved3 .button_saved",function(){$("#query_search").removeAttr("readonly"),void 0!==DAB&&(DAB.Client.reqID=null),$(".black.saved3").hide()}),$("body").on("click",".black.saved3 .close-popup",function(){$("#query_search").removeAttr("readonly"),void 0!==DAB&&(DAB.Client.reqID=null),$(".black.saved3").hide()}),$("body").on("keydown",function(t){$(".black.saved3").is(":visible")&&(13!=t.which&&27!=t.which||$(".black.saved3 .button_saved").trigger("click"))}),$("html").on("click","black.saved3",function(t){"black saved3"==t.target.className&&$(".black.saved3").hide()}),$("html").on("click",".list-result .result-text .results-icons > div.orange-icons button.download",function(){var t="35px",e="77px";if($(".bookmarked-results-portlet").length)var t="5px",e="47px";$(this).siblings(".details-download").is(":visible")?($(this).closest(".result-text").animate({paddingBottom:t},{duration:400,queue:!1}),$(this).parent().animate({height:"30px"},{duration:400,queue:!1}),$(this).closest(".results-icons").animate({bottom:"5px"},{duration:400,queue:!1}),$(this).siblings(".details-download").slideUp(400)):($(".list-result .result-text").animate({paddingBottom:t},{duration:400,queue:!1}),$(".list-result .result-text .results-icons > div.orange-icons > div").animate({height:"30px"},{duration:400,queue:!1}),$(".list-result .result-text .results-icons").animate({bottom:"5px"},{duration:400,queue:!1}),$(".list-result .result-text .results-icons > div.orange-icons .details-download").slideUp("slow"),$(this).closest(".result-text").animate({paddingBottom:e},{duration:400,queue:!1}),$(this).parent().animate({height:"77px"},{duration:400,queue:!1}),$(this).closest(".results-icons").animate({bottom:"47px"},{duration:400,queue:!1}),$(this).siblings(".details-download").slideDown(400)),$(".bookmarked-results-portlet").length&&setTimeout(function(){resizeMap()},500)}),$("html").on("click",".list-result .result-text .results-icons button.info",function(){openMetadataWindow($(this).attr("value")),LogStore.ga_category="discovery",LogStore.logSearchResult(searchFormAttributes,"search_query",$(this).id,$(this).attr("class"),$(this).val(),"dab","viewed")}),$("html").on("click",".black1 .top-strip .close-popup",function(t){$(".black1 .popups.resource-detais").scrollTop(0),$(".black1").hide()}),$("html").on("click",".inner-pagination-container span.next",function(){if(!DAB.View.searchInProgress){var t=DAB.View.currentResults.itemsPerPage;DAB.View.currentResults.startIndex+=t,Geoss.actionBeforeRequest(),DAB.View.drillDownSearch?DAB.View.drillDown(DAB.View.drilledDownEntry,DAB.View.drilledDownItem):DAB.Facade.filterQuery(readSearchForm(!0,!1)),GWP&&GeossUtil.reserSearchBoxDimensions()}}),$("html").on("click",".inner-pagination-container span.prev",function(){if(!DAB.View.searchInProgress){var t=DAB.View.currentResults.itemsPerPage;DAB.View.currentResults.startIndex-=t,Geoss.actionBeforeRequest(),DAB.View.drillDownSearch?DAB.View.drillDown(DAB.View.drilledDownEntry,DAB.View.drilledDownItem):DAB.Facade.filterQuery(readSearchForm(!0,!1)),GWP&&GeossUtil.reserSearchBoxDimensions()}}),$("html").on("click",".list-result .result-text .results-icons > div.orange-icons button.map",function(){Geoss.synchronizeLayerList()}),$("html").on("click",".black2 .checkbox-decoration .add-layer",function(){var t,e=$(this).attr("data-value"),a=$(this).attr("data-format");"wms"==a?(t=createWMS(e),Geoss.addLayerCallback(t,$(this))):"tms"==a?(t=createTMS(e),Geoss.addLayerCallback(t,$(this))):"kml"==a?(DAB.View.checkLayerFile(e,this,"kml"),$(".black2 .top-strip .close-popup").trigger("click")):"kmz"==a&&(DAB.View.checkLayerFile(e,this,"kmz"),$(".black2 .top-strip .close-popup").trigger("click"))}),$("html").on("change",".inner-layer-box > div > .checkbox-decoration input:checkbox",function(){var t=$(this).attr("data-value");$(this).prop("checked")?showLayer(t):hideLayer(t)}),$("html").on("click",".goToMap",function(){centerMapOnEntry($(this).parent().siblings("input").attr("data_coords"),"goToMap",$(this).parent().siblings("input").attr("data_uuid"),{title:$(this).parent().siblings("label").html(),organisation:$(this).parent().siblings("input").attr("data_organisation")})}),$("html").on("click",".inner-layer-box .checkbox-decoration span.closex",function(){removeLayer($(this).parent().siblings("input").attr("data-value")),$(this).closest(".checkbox-decoration").parent().next(".clear").remove(),$(this).closest(".checkbox-decoration").parent().remove()}),$("body").on("click",".black.wmsMessage .button_saved",function(){$(".black.wmsMessage").hide();var t=$(this).closest(".black.wmsMessage").attr("data-id");$(".inner-layer-box .checkbox-decoration").each(function(){t==$(this).find("input").attr("data-value")&&$(this).find(".closex").trigger("click")}),$(".black.black2.active").show()}),$("body").on("click",".black.wmsMessage .close-popup, .black.wmsMessage .button_cancel",function(){$(".black.wmsMessage").hide()}),$("body").on("keydown",function(t){$(".black.wmsMessage").is(":visible")&&(27==t.which?$(".black.wmsMessage .button_cancel").trigger("click"):13==t.which&&$(".black.wmsMessage .button_saved").trigger("click"))}),GeossUtil={boxSearchUserWidth:null,boxSearchUserHeight:null,boxSearchUserLeft:null,queryStopped:!1,zeroResults:!1,searchBoxDimensions:{left:null,top:null,width:null,height:null,minHeight:null},reserSearchBoxDimensions:function(){$(".box-search").css({height:"",minHeight:""})},calcSearchBoxMaxHeight:function(){var t=$(".geoss-header").height(),e=$(window).height();if(window.matchMedia("(max-width: 1020px)").matches)a=-10;else var a=30;return e-t-a},calcSearchBoxMaxHeight2:function(){var t=$(".geoss-header").height();return $(window).height()-t},calcSearchBoxMinHeight:function(){var t=100;$(".box-search").hasClass("collapsed")&&(t=0);var e=$(".row-result-form .show-result").height();return 0!=e&&(e+=12),e+$(".row-form-search").height()+t+$(".row-search").height()+"px"},saveSearchBoxMaxDimensions:function(t){GeossUtil.searchBoxDimensions.minHeight&&!t&&$(".box-search").hasClass("resized")||(GeossUtil.searchBoxDimensions.minHeight=GeossUtil.calcSearchBoxMinHeight()),$(".box-search").hasClass("resized")?GeossUtil.searchBoxDimensions.maxHeight=GeossUtil.calcSearchBoxMaxHeight2():GeossUtil.searchBoxDimensions.maxHeight=GeossUtil.calcSearchBoxMaxHeight()},saveSearchBoxDimensions:function(){$(".box-search").hasClass("dragged")&&(GeossUtil.searchBoxDimensions.left=$(".box-search").css("left"),GeossUtil.searchBoxDimensions.top=$(".box-search").css("top")),$(".box-search").hasClass("resized")&&(GeossUtil.searchBoxDimensions.width=$(".box-search").width(),GeossUtil.searchBoxDimensions.height=$(".box-search").height()),GeossUtil.saveSearchBoxMaxDimensions()},applySearchBoxDimensions:function(){$(".box-search").is(".dragged.ui-draggable")&&($(".box-search").css("left",GeossUtil.searchBoxDimensions.left),$(".box-search").css("top",GeossUtil.searchBoxDimensions.top)),$(".box-search").is(".resized.ui-resizable")&&($(".box-search").hasClass("collapsed")||$(".box-search").height(GeossUtil.searchBoxDimensions.height)),$(".box-search").css("max-height",GeossUtil.searchBoxDimensions.maxHeight),$(".box-search").hasClass("collapsed")||$(".box-search").css("min-height",GeossUtil.searchBoxDimensions.minHeight),$(".box-search").width(GeossUtil.searchBoxDimensions.width)},setSearchBoxDimensions:function(){window.matchMedia("(max-width: 1020px)").matches?$(".box-search").css({height:"",width:"",left:"",top:"",maxHeight:$(window).height()-67+"px"}):(GeossUtil.saveSearchBoxMaxDimensions(),GeossUtil.applySearchBoxDimensions())},handleDragAndResize:function(t,e){window.matchMedia("(max-width: 1020px)").matches?t.hasClass("ui-resizable")&&t.resizable("destroy").draggable("destroy"):t.draggable({handle:".top-strip",containment:"body",start:function(t,a){var i=$(this).find(e);if(i.outerWidth()<=t.clientX-i.offset().left+20)return!1;$(this).addClass("dragged")}}).resizable({resize:function(t,e){-1!=$(this).attr("style").indexOf("height")&&$(this).css("max-height","none")},containment:$("#wrapper")}),t.css({width:t.width(),right:"auto",height:t.height(),right:"auto",left:(window.innerWidth-t.width())/2,top:(window.innerHeight-t.height())/2,transform:"none",marginLeft:"0px"})},handleSearchBoxDragAndResize:function(){window.matchMedia("(max-width: 1020px)").matches?($(".box-search").hasClass("ui-resizable")&&$(".box-search").resizable("destroy"),$(".box-search").hasClass("ui-draggable")&&$(".box-search").draggable("destroy")):($(".box-search").draggable({handle:".row-search",containment:$("#portlet_geosssearch_WAR_geossportlet"),start:function(t,e){$(".box-search").addClass("dragged"),$(".box-search").offset().top<$("header").height()&&$(".box-search").css("top",$("header").height()+"px")},stop:function(){$(".box-search").offset().top<$("header").height()&&$(".box-search").css("top",$("header").height()+"px"),GeossUtil.saveSearchBoxDimensions()},cancel:".search-button-1 span, .search-button-2 span, .search-button-2 button, #searchForm input"}),$(".box-search").hasClass("collapsed")||$(".box-search.searching").resizable({start:function(){var t=-1==$(".box-search").attr("style").indexOf("width");t&&$(".box-search").css("width",$(".box-search").width()),(t=-1==$(".box-search").attr("style").indexOf("height"))&&$(".box-search").css("height",$(".box-search").height()),$(".box-search").addClass("resized"),t&&(GeossUtil.saveSearchBoxMaxDimensions(),GeossUtil.applySearchBoxDimensions())},stop:function(t,e){GeossUtil.saveSearchBoxDimensions()},maxHeight:GeossUtil.calcSearchBoxMaxHeight2(),maxWidth:$(window).width(),containment:$("#portlet_geosssearch_WAR_geossportlet")}))},setChosenGeolocation:function(t,e,a,i){drawLayerAoi(t,e,a,i),centerMapOnAoi()},setChosenW3W:function(t){var e={async:!0,crossDomain:!0,url:"https://api.what3words.com/v2/forward?addr="+t+"&key=7ZYEO18T&lang=en&format=json&display=full",method:"GET",headers:{}};$.ajax(e).done(function(t){var e=t.bounds.southwest.lat,a=t.bounds.southwest.lng,i=t.bounds.northeast.lat;drawW3W(a,e,t.bounds.northeast.lng,i),centerMapOnAoi()})},isAnyFilterSelected:function(){return!!($("span#advanced_search").hasClass("filtering")||""!=$("input#query_search").val()||$(".row-result-form .filters").hasClass("notEmpty")||$(".row-result-form .iris-filters").hasClass("notEmpty")||""!=$(".filter-select input").val())},showMessage:function(t,e){if($(".black:visible").find(".close-popup").trigger("click"),0==$(Geoss.popupsContainer+" .saved3").length){$(Geoss.popupsContainer).append('\x3c!-- GENERAL ERROR/INFO POPUP --\x3e<div class="black saved3">\t<div class="popups setting-workspace row">\t\t<div class="">\t\t\t<div class="title"><button class="close-popup glyphicon" title="close"></button></div>\t\t\t<div class="content number">\t\t\t\t<div class="title-mode"></div>\t\t\t\t<div class="clearfix"></div>\t\t\t\t<button class="button_saved">OK</button>\t\t\t\t<hr class="clear">\t\t\t</div>\t\t</div>\t</div></div>')}$(".black.saved3").find(".title").text(t),$(".black.saved3").find(".title-mode").html(e),$(".black.saved3").show(),$(".black.saved3 .button_saved").focus()},showChooseSearchMessage:function(t,e){$(".chooseSearchMessage .title-mode").empty();var a="";a=t?"Are you looking for: "+t+" in location: "+e+"?":"Are you looking for any result in location: "+e+"?",$(".chooseSearchMessage .title-mode").html(a),$(".black.black2.active").hide(),$(".black.chooseSearchMessage").show()},findSpaceAndChangeOr:function(){var t=$("#query_search").val();if(2==((t=t.trim()).match(/"/g)||[]).length){var e=t.split('"'),a=e[1],i=e[0],r=e[2];return i&&(i=i.replace(/ /g," OR ")),r&&(r=r.replace(/ /g," OR ")),o=i+a+r}var o=t.replace(/ /g," OR ");return o},standardSearchProcess:function(){$(".box-search").removeClass("collapsed"),DAB.View.searchFormAttributes={},DAB.View.clearPagination(),$(".row-result-form .filters").hide(),DAB.View.hideIrisFilters(),$(".row-result-form .show-result button.btn-form-results").removeClass("rotating"),$(".wrap-result-list").hide(),$(".wrap-result-list").removeClass("showed"),$(".wrap-result-list").removeClass("showing"),$(".header-nav").hide(),$(".black.black4, .black.black2.wms").each(function(){$(this).remove()}),$(".box-search").addClass("searching").removeClass("minSlideShow minSlideHide"),$(".row-search .search-button-2 button.showAllMap").hide(),$(".row-search .search-button-2 button.showAllMap2").show(),GWP&&!$(".box-search").hasClass("dragged")&&$(".box-search").css({marginLeft:"auto",left:"15px"}),GWP&&setTimeout(function(){GeossUtil.handleSearchBoxDragAndResize()},500),Geoss.actionBeforeRequest(),GWP&&centerMapOnAoi(),setTimeout(function(){$(".row-search .search-input input").val().length>=0?(MyWorkspace.incSearchCount(),MyWorkspace.isRestoredBookmark()?MyWorkspace.queryBookmarkFeed(DAB.Facade.view.presentMainResults):MyWorkspace.isRestoredGranulaSearch()?DAB.Facade.querySingleResult(MyWorkspace.Search.folder):DAB.Control.callSearch(),GWP&&jsCurrMap&&("dark_nolabels"==jsCurrMap&&($(".addsat img").removeClass("active"),$(".dark_nolabels img").addClass("active")),"light_all"==jsCurrMap&&($(".addsat img").removeClass("active"),$(".light_all img").addClass("active")),"light_nolabels"==jsCurrMap&&($(".addsat img").removeClass("active"),$(".dark_nolabels img").addClass("active")),"addhyb"==jsCurrMap&&($(".addsat img").removeClass("active"),$(".addhyb img").addClass("active")),"removesat"==jsCurrMap&&($(".addsat img").removeClass("active"),$(".removesat img").addClass("active")),"oceanBasemap"==jsCurrMap&&($(".addsat img").removeClass("active"),$(".oceanBasemap img").addClass("active")),"topographicBasemap"==jsCurrMap&&($(".addsat img").removeClass("active"),$(".topographicBasemap img").addClass("active")),"dark_all"==jsCurrMap&&($(".addsat img").removeClass("active"),$(".dark_all img").addClass("active")),"WorldStreetBasemap"==jsCurrMap&&($(".addsat img").removeClass("active"),$(".WorldStreetBasemap img").addClass("active"))),searches(),$(".row-form-search>form").is(":hidden")||$(".row-form-search>form").slideToggle("slow"),"ChooseSelectorOptions"==$(".row-form-search .search-option-select .active input").val()&&($(".search-option-select input[value='Geolocation']").parent("label").trigger("click"),$(".search-option-select").trigger("click"),$(".row-form-search #geolocation_search").val(""))):($(".row-result-form").show(),$(".row-result-form .number-result .number-results").text("0"),$(".inner-pagination-container .numbers-pagination").text("0 of 0"),$(".row-result-form .filters").hide(),DAB.View.hideIrisFilters(),$(".row-result-form .show-result button.btn-form-results").addClass("rotating"),$(".wrap-result-list").hide())},1500),$(".box-layers-map").slideUp(10)},googleSearchProcess:function(t,e){$("#query_search").val(t);$(".search-option-select input[value='Geolocation']").parent("label").trigger("click"),$(".search-option-select").trigger("click"),$(".row-form-search #geolocation_search").val(e.name),GeossUtil.setChosenGeolocation(e.W,e.S,e.E,e.N),GeossUtil.standardSearchProcess()},popupsHandler:function(t){"layer-map"==t&&($("div.mode-map-div").hasClass("active")&&($(".mode-map-more").hide(),$(".mode-map-div").removeClass("active")),$(".box-layers-map").children().length>0&&$(".box-layers-map").slideToggle()),"mode-map"==t&&("block"==$(".box-layers-map").css("display")&&$(".box-layers-map").slideUp(),$(".mode-map-more").toggle(),$(".mode-map-div").toggleClass("active"))},formatDate:function(t){var e=t.getDate(),a=t.getMonth()+1,i=t.getFullYear();return e<10&&(e="0"+e),a<10&&(a="0"+a),i+"-"+a+"-"+e}};
